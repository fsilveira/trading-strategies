
--- PÁGINA 1 ---
Documentação
Módulo EstratégiasTODOS OS TÓPICOSVERSÃO 3.6
08/08/2025

--- PÁGINA 2 ---
Sumário
1 Introdução 1
2 Estrutura de uma Estratégia 1
2.1 Áreadedeclaraçãodeparâmetrosdeentrada . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
2.2 Áreadedeclaraçãodevariáveisefunções . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
2.3 Áreadecódigo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
3 Fluxo de Execução de uma Estratégia 3
4 Variáveis, tipos de dados e constantes 5
4.1 Tiposdedados . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
4.2 Sériesdedados . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
4.3 Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
4.4 Correlaçãodemúltiplosativos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
4.5 Acessandodadosanteriores . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
4.6 Sombreamentodefunçõesporvariáveis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
4.7 Constantes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
5 Controle de Fluxo 11
5.1 Ifthenelse(Seentãosenão) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
5.2 For(To/DownTo)Do(Para(Até/DownTo)Faça) . . . . . . . . . . . . . . . . . . . . . . . . . . 11
5.3 While(Enquanto) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
5.4 Repeat(Repita) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
6 Operadores 14
6.1 Operadoresmatemáticos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
6.2 Operadoreslógicos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
7 Function (Função) 16
7.1 CriandoFunções(Sintaxe) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
7.2 Funçõesdebiblioteca . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
8 Procedure (Procedimento) 17
8.1 CriandoProcedimentos(Sintaxe) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
9 Back-Testing 17
9.1 MododeExecuçãodoBacktest: OHLCeTickaTick . . . . . . . . . . . . . . . . . . . . . . . . . 18
10 Automação de Estratégias 19
10.1 Criandoumaestratégiadeexecução . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
10.2 Criandoumaautomação . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
10.3 Opçõesdeentrada . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
10.4 MododeExecução . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
10.5 HoráriosdeOperação . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
10.6 Opçõesdesaída . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
10.7 Risco . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
10.8 Segurança . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
10.9 Acompanhamento . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
10.10 Raio-X . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
10.11 RegrasdeExecução . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
11 Estratégias 34
11.1 AbrirEstratégias . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
11.2 CentraldeEstratégias . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
11.3 Exportar/ImportarEstratégias . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35
11.4 Screening . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
11.5 InserirRegradeColoração . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37

--- PÁGINA 3 ---
11.6 EditordeEstratégias . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
11.7 PropriedadesdoEditordeEstratégias . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
11.8 NovaEstratégia . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
11.9 TermômetrodeEstratégia . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
12 Block Builder 43
12.1 TiposdeEstratégiasSuportadas . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
12.2 CriandoumaEstratégia . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
12.3 AplicandoaEstratégianoGráfico . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
12.4 ExemploPrático . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
13 Funções de Alarme 46
13.1 FunçãoAlert . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46
14 Funções de Back-Testing 47
14.1 FunçãoBuyAtMarket . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
14.2 FunçãoBuyLimit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
14.3 FunçãoBuyPosition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
14.4 FunçãoBuyPositionQty . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50
14.5 FunçãoBuyPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
14.6 FunçãoBuyStop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
14.7 FunçãoBuyToCoverAtMarket . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
14.8 FunçãoBuyToCoverLimit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
14.9 FunçãoBuyToCoverStop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56
14.10 FunçãoCancelPendingOrders . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58
14.11 FunçãoClosePosition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59
14.12 FunçãoDailyResult . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
14.13 FunçãoHasPendingOrders . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
14.14 FunçãoHasPosition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62
14.15 FunçãoIsBought . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
14.16 FunçãoIsSold . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
14.17 FunçãoMyPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
14.18 FunçãoPosition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
14.19 FunçãoPositionQty . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67
14.20 FunçãoPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
14.21 FunçãoReversePosition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
14.22 FunçãoSellPosition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70
14.23 FunçãoSellPositionQty . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
14.24 FunçãoSellPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
14.25 FunçãoSellShortAtMarket . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
14.26 FunçãoSellShortLimit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
14.27 FunçãoSellShortStop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
14.28 FunçãoSellToCoverAtMarket . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76
14.29 FunçãoSellToCoverLimit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77
14.30 FunçãoSellToCoverStop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
14.31 FunçãoSendOrder . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80
14.32 FunçãoOpenResult . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
14.33 FunçãoXRay . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
15 Funções de Calendário 83
15.1 FunçãoBarAnnualization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83
15.2 FunçãoBarDuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
15.3 FunçãoBarDurationF . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
15.4 FunçãoBartype . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
15.5 FunçãoCalcDate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
15.6 FuncaoCalcTime . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88
15.7 FunçãoCloseD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
15.8 FunçãoCloseM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
15.9 FunçãoCloseW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91

--- PÁGINA 4 ---
15.10 FunçãoCloseY . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
15.11 FunçãoCurrentAssetDate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
15.12 FunçãoCurrentDate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94
15.13 FunçãoCurrentTime . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
15.14 FunçãoDate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
15.15 FunçãoDayOfMonth . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97
15.16 FunçãoDayOfWeek . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98
15.17 FunçãoDaysToExpiration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
15.18 FunçãoELDate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 100
15.19 FunçãoELDate_Consol . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101
15.20 FunçãoFindBar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102
15.21 FunçãoFriday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
15.22 FunçãoHighD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104
15.23 FunçãoHighM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
15.24 FunçãoHighW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
15.25 FunçãoHighY . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
15.26 FunçãoLastCalcDate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
15.27 FunçãoLastCalcTime . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109
15.28 FunçãoLastDayOfMonth . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 110
15.29 FunçãoLowD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111
15.30 FunçãoLowM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112
15.31 FunçãoLowW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113
15.32 FunçãoLowY . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114
15.33 FunçãoMinutesIntoWeek . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
15.34 FunçãoMonday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117
15.35 FunçãoMonth . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
15.36 FunçãoNext3rdFriday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119
15.37 FunçãoOpenD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
15.38 FunçãoOpenM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
15.39 FunçãoOpenW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122
15.40 FunçãoOpenY . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
15.41 FunçãoRS_BarsPerDay . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
15.42 FunçãoSaturday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
15.43 FunçãoSunday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
15.44 FunçãoThursday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 127
15.45 FunçãoTime . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128
15.46 FunçãoTimeExchange . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129
15.47 FunçãoTimeToMinutes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130
15.48 FunçãoToday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131
15.49 FunçãoTuesday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 132
15.50 FunçãoVolumeD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133
15.51 FunçãoVolumeM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 134
15.52 FunçãoVolumeW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 135
15.53 FunçãoVolumeY . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136
15.54 FunçãoWednesday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137
15.55 FunçãoYear . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 138
15.56 FunçãoYesterday . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139
16 Funções de Candlestick 140
16.1 FunçãoC_3WhSolds_3BlkCrows . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 140
16.2 FunçãoC_BullEng_BearEng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142
16.3 FunçãoC_Doji . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143
16.4 FunçãoC_Hammer_HangingMan . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
16.5 FunçãoC_MornDoji_EveDoji . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 145
16.6 FunçãoC_MornStar_EveStar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147
16.7 FunçãoC_PierceLine_DkCloud . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148
16.8 FunçãoC_ShootingStar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149

--- PÁGINA 5 ---
17 Exemplos 150
17.1 FunçãoDiMaisDiMenos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150
17.2 FunçãoIFR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151
17.3 FunçãoPaintVar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152
18 Funções Gráficas 153
18.1 FunçãoAvgPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 153
18.2 FunçãoBarCount . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 154
18.3 FunçãoConsoleLog . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
18.4 FunçãoCurrentBar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 156
18.5 FunçãoGetPlotColor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157
18.6 FunçãoGetPlotWidth . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 158
18.7 FunçãoGraphicInterval . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159
18.8 FunçãoGraphicOffset . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 160
18.9 FunçãoHorizontalLine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 161
18.10 FunçãoHorizontalLineCustom . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162
18.11 FunçãoLastBarOnChart . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164
18.12 FunçãoLeader . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165
18.13 FunçãoLineSegment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 166
18.14 FunçãoMaxBarsBack . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 168
18.15 FunçãoMaxBarsForward . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
18.16 FunçãoMedianPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 170
18.17 FunçãoNoPlot . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171
18.18 FunçãoPaintBar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172
18.19 FunçõesPlot . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173
18.20 FunçãoPlotN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 174
18.21 FunçãoPlotText . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 175
18.22 FunçãoRange . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177
18.23 FunçãoRangeLeader . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
18.24 FunçãoRGB . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
18.25 FunçãoSetPlotColor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180
18.26 FunçãoSetPlotStyle . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 181
18.27 FunçãoSetPlotType . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 183
18.28 FunçãoSetPlotWidth . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184
18.29 FunçãoTrueHigh . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 185
18.30 FunçãoTrueLow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 186
18.31 FunçãoTrueRange . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187
18.32 FunçãoTrueRangeCustom . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 188
18.33 FunçãoTypicalPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189
18.34 FunçãoVerticalLine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190
18.35 FunçãoVerticalLineCustom . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 191
18.36 FunçãoWeightedClose . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 193
19 Indicadores 194
19.1 FunçãoTWOMVVOLATILITY . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 194
19.2 FunçãoADX . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 196
19.3 FunçãoAccAgressSaldo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 197
19.4 FunçãoAccuDistr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 198
19.5 FunçãoAccuDistrW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 199
19.6 FunçãoAdaptiveMovingAverage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 200
19.7 FunçãoAgressionVolBalance . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 201
19.8 FunçãoAgressionVolBuy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202
19.9 FunçãoAgressionVolSell . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 203
19.10 FunçãoAllTimeHigh . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 204
19.11 FunçãoAllTimeLow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 205
19.12 FunçãoArmsEaseOfMov . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 206
19.13 FunçãoAroonLin . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 207
19.14 FunçãoAroonOsc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 208

--- PÁGINA 6 ---
19.15 FunçãoAutoFibonacci . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 209
19.16 FunçãoAutoFibonacciCustom . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 211
19.17 FunçãoAveran . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212
19.18 FunçãoAvgAgent . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 213
19.19 FunçãoAvgAgrBuySell . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214
19.20 FunçãoAvgAgrTotal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 216
19.21 FunçãoAvgSeparation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 218
19.22 FunçãoAvgTrueRange . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 219
19.23 FunçãoBTCPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 220
19.24 FunçãoBTCSpread . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 221
19.25 FunçãoBalanceAgent . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 222
19.26 FunçãoBalanceOfPower . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 223
19.27 FunçãoBearPower . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224
19.28 FunçãoBollingerBPerc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 226
19.29 FunçãoBollingerBandW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 228
19.30 FunçãoBollingerBands . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 230
19.31 FunçãoBullPower . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 232
19.32 FunçãoCCI . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 234
19.33 FunçãoChaikinMoneyFlow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 235
19.34 FunçãoChaikinOsc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 236
19.35 FunçãoChainSetup . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 237
19.36 FunçãoCOHENPRICEWAVE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 238
19.37 FunçãoCOHENWEISWAVE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 239
19.38 FunçãoContadorDeCandle . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 240
19.39 FunçãoDTOscillator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 241
19.40 FunçãoDarvasBox . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 243
19.41 FunçãoDecisionPoints . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 244
19.42 FunçãoDiPDiM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 246
19.43 FunçãoDiDiIndex . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247
19.44 FunçãoDivergenceDetector . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 249
19.45 FunçãoDonchianCH . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 252
19.46 FunçãoEnvelope . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 253
19.47 FunçãoEuroinvest . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 255
19.48 FunçãoFastStochastic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 257
19.49 FunçãoFastWMA . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 259
19.50 FunçãoFgzRobot . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 260
19.51 FunçãoFinancialVol . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 261
19.52 FunçãoForceIndex . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 262
19.53 FunçãoFrassonATR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 263
19.54 FunçãoFrassonVH . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 265
19.55 FunçãoFullStochastic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 267
19.56 FunçãoFuraChao . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 268
19.57 FunçãoFuraTeto . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 269
19.58 FunçãoHeikinAshi . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 270
19.59 FunçãoHighestVolume . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 272
19.60 FunçãoHighestVolumePrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 274
19.61 FunçãoHiLoActivator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 276
19.62 FunçãoHistVolatility . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 278
19.63 FunçãoHullMovingAverage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 279
19.64 FunçãoIchimokuCloud . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 280
19.65 FunçãoImpliedVolatility . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 282
19.66 FunçãoKVO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 283
19.67 FunçãoKeltnerCH . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 284
19.68 FunçãoLSVolatilityIndex . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 286
19.69 FunçãoLinearRegressionChannel . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 287
19.70 FunçãoMACD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 289
19.71 FunçãoMFI . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 290
19.72 FunçãoMIMA . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 291

--- PÁGINA 7 ---
19.73 FunçãoMIMAROC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 292
19.74 FunçãoMADRIDTRENDSQUEEZE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 293
19.75 FunçãoMAGOMACD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 294
19.76 FunçãoMAGOMEDIAS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 295
19.77 FunçãoMomentum . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 297
19.78 FunçãoMomentumStochastic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 299
19.79 FunçãoMoneyFlow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 300
19.80 FunçãoMoneyFlowIndex . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 301
19.81 FunçãoMADRIDMOVINGAVERAGE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 302
19.82 FunçãoNelogicaBottomFinder . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 303
19.83 FunçãoNelogicaPullBackFinder . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 304
19.84 FunçãoNelogicaWeisWave . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 305
19.85 FunçãoOBV . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 306
19.86 FunçãoOBVAvg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 307
19.87 FunçãoOnBalanceTR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 308
19.88 FunçãoOpenDaily . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 309
19.89 FunçãoOpenInterest . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 310
19.90 FunçãoPTAX . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 311
19.91 FunçãoPTAXFuturo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312
19.92 FunçãoParabolicSAR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 313
19.93 FunçãoPhibo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 314
19.94 FunçãoPivot . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 315
19.95 FunçãoPowerMeter . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 317
19.96 FunçãoPRICENERY . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 319
19.97 FunçãoPriceOsc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 320
19.98 FunçãoPriceVolumeTrend . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 322
19.99 FunçãoPriorCote . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 323
19.100 FunçãoQuantityVol . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 324
19.101 FunçãoRBG . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 325
19.102 FunçãoROC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 326
19.103 FunçãoRSI . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 328
19.104 FunçãoRafi . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 329
19.105 FunçãoTENDENCYTRACKER . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 330
19.106 FunçãoRavi . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 331
19.107 FunçãoRenkoVTwo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 332
19.108 FunçãoRsiStochastic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 334
19.109 FunçãoSafeZoneDownTrend . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 335
19.110 FunçãoSafeZoneUpTrend . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 336
19.111 FunçãoSampleAverage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 337
19.112 FunçãoSampleBollinger . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 338
19.113 FunçãoSampleMACD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 339
19.114 FunçãoSampleRSI . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 340
19.115 FunçãoSampleStochastic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 341
19.116 FunçãoSampleVWAP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 342
19.117 FunçãoSanto . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 343
19.118 FunçãoSlowStochastic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 344
19.119 FunçãoSOMOSRENKOTRENDMPONTO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 346
19.120 FunçãoStdDevConstPeriod . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 347
19.121 FunçãoStopATR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 348
19.122 FunçãoTOSCANABRUNELLO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 350
19.123 FunçãoTOSCANAPICCOLA . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 351
19.124 FunçãoTOSCANAPICCOLO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 352
19.125 FunçãoTOSCANAPRODUTIVIDADE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 353
19.126 FunçãoTOSCANART . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 355
19.127 FunçãoTRIX . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 356
19.128 FunçãoTRIXM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 357
19.129 FunçãoTRPTAX . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 358
19.130 FunçãoTRPTAXFuturo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 359

--- PÁGINA 8 ---
19.131 FunçãoTilson . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 360
19.132 FunçãoTimeAgrBuySell . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 361
19.133 FunçãoTimeAgrSellBuy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 362
19.134 FunçãoTimeAgrTotal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 363
19.135 FunçãoTopBottomDetector . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 364
19.136 FunçãoTRENDAVERAGE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 365
19.137 FunçãoTRENDCLOUD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 367
19.138 FunçãoTRENDDIFUSOR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 369
19.139 FunçãoTRENDFLOW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 371
19.140 FunçãoTRENDSNIPER . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 373
19.141 FunçãoTRENDSOLDIER . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 375
19.142 FunçãoTRADENCIATRENDVARIATION . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 377
19.143 FunçãoTRENDVOLAG . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 379
19.144 FunçãoTrades . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 380
19.145 FunçãoTwoMVAggression . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 381
19.146 FunçãoTwoMVPower . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 382
19.147 FunçãoVSS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 383
19.148 FunçãoVWAP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 384
19.149 FunçãoVWAPDate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 385
19.150 FunçãoVWAPMonthly . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 386
19.151 FunçãoVWAPWeekly . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 387
19.152 FunçãoVWMA . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 388
19.153 FunçãoValerie . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 389
19.154 FunçãoVolumeAgent . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 390
19.155 FunçãoVolumeAtPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 391
19.156 FunçãoWilliams . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 392
20 Funções de Livro 393
20.1 FunçãoAskPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 393
20.2 FunçãoAskSize . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 394
20.3 FunçãoBidPrice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 395
20.4 FunçãoBidSize . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 396
20.5 FunçãoBookSpread . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 397
20.6 FunçãoBuyOfferCount . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 398
20.7 FunçãoGetAsset . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 401
20.8 FunçãoGetFeed . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 404
20.9 FunçãoIsBMF . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 407
20.10 FunçãoLote . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 408
20.11 FunçãoMinPriceIncrement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 409
20.12 FunçãoMinOrderIncrement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 410
20.13 FunçãoMinOrderQty . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 411
20.14 FunçãoSellOfferCount . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 412
20.15 FunçãoTotalBuyQtd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 415
20.16 FunçãoTotalSellQtd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 418
21 Funções Matemáticas 421
21.1 FunçãoABS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 421
21.2 FunçãoArctangent . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 422
21.3 FunçãoCeiling . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 423
21.4 FunçãoCombination . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 424
21.5 FunçãoCos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 425
21.6 FunçãoCosine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 426
21.7 FunçãoCotangent . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 427
21.8 FunçãoExp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 428
21.9 FunçãoExpValue . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 429
21.10 FunçãoExtremePriceRatio . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 430
21.11 FunçãoFactorial . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 431
21.12 FunçãoFastD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 432

--- PÁGINA 9 ---
21.13 FunçãoFastK . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 433
21.14 FunçãoFloor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 434
21.15 FunçãoFracPortion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 435
21.16 FunçãoGCD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 436
21.17 FunçãoIntPortion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 437
21.18 FunçãoLog . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 438
21.19 FunçãoLogN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 439
21.20 FunçãoMax . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 440
21.21 FunçãoMin . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 441
21.22 FunçãoMinutesToTime . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 442
21.23 FunçãoMod . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 443
21.24 FunçãoNeg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 444
21.25 FunçãoNumUnits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 445
21.26 FunçãoPercentR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 446
21.27 FunçãoPermutation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 447
21.28 FunçãoPos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 448
21.29 FunçãoPower . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 449
21.30 FunçãoPowerF . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 450
21.31 FunçãoRandom . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 451
21.32 FunçãoRound . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 452
21.33 FunçãoRound2Fraction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 453
21.34 FunçãoSign . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 454
21.35 FunçãoSin . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 455
21.36 FunçãoSine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 456
21.37 FunçãoSlowK . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 457
21.38 FunçãoSqrt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 458
21.39 FunçãoSquare . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 459
21.40 FunçãoTangent . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 460
21.41 FunçãoUltimateOscillator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 461
21.42 FunçãoVolatility . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 462
21.43 FunçãoVolumeOsc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 463
21.44 FunçãoVolumeROC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 464
22 Funções de Opções 465
22.1 FunçãoDelta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 465
22.2 FunçãoGamma . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 467
22.3 FunçãoRho . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 469
22.4 FunçãoStrike . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 471
22.5 FunçãoTheta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 472
22.6 FunçãoVega . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 474
23 Screening 476
23.1 FunçãoSelect . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 476
24 Funções de Usuário 477
24.1 FunçãoCum . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 477
24.2 FunçãoFastKCustom . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 478
24.3 FunçãoHarmonicMean . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 480
24.4 FuncãoHighest . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 481
24.5 FunçãoHighestBar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 482
24.6 FunçãoLowest . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 483
24.7 FunçãoLowestBar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 484
24.8 FunçãoMedia . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 485
24.9 FunçãoMediaExp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 486
24.10 FunçãoMidPoint . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 487
24.11 FunçãoPercentChange . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 488
24.12 FunçãoPriceOscillator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 489
24.13 FunçãoRateOfChange . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 490
24.14 FunçãoSlowD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 491

--- PÁGINA 10 ---
24.15 FunçãoStdDevs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 492
24.16 FunçãoSummation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 493
24.17 FunçãoTriAverage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 494
24.18 FunçãoUlcerIndex . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 495
24.19 FunçãoWAverage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 496
24.20 FunçãoWellesSum . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 497
24.21 FunçãoxAverage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 498
25 Funções Utils 499
25.1 FunçãoAssetHasValue . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 499
25.2 FunçãoBoolToString . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 500
25.3 FunçãoCompareFloat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 501
26 Anexos 502
26.1 Exemplosdefuncionamentodeestratégias . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 502

--- PÁGINA 11 ---
1Introdução
A NTSL (Nelogica Trading System Language) é uma linguagem avançada desenvolvida para a criação de sistemas
algorítmicos de operação com alto desempenho e eficiência. Projetada para atender às necessidades de traders e
investidores,aNTSLpermiteaimplementaçãodeestratégiasautomatizadasdeformaintuitivaeflexível. Seugrande
diferencialéafacilidadedeuso,possibilitandoaescritadecódigosemportuguês,tornandoodesenvolvimentoea
compreensãodasestratégiasmaisacessíveisparatodososusuários.
2Estrutura de uma Estratégia
Observeotrechodecódigoabaixoquerepresentaoindicadormédiamóvel. Essecódigoapresentaastrêsáreasque
definemaestruturadeumaestratégia. Sãoelas: áreadedeclaraçãodeparâmetrosdeentrada,áreadedeclaração
devariáveisefunçõeseáreadecódigo.
Aáreadeparâmetrosdeentradacompreendetodaaregiãoentreapalavrareservadainput(parâmetro)eapalavra
reservada var. A área de variáveis e funções começa com a palavra var e estende-se até a palavra begin (inicio).
Finalmente,aregiãodecódigoinicia-secomapalavrareservadabegin(inicio)efinalizanapalavraend(fim),conforme
imagemabaixo:
Entrada input(parametro)
Variáveis
e Funçõesvar
Códigobegin(inicio)
end(fim)
1

--- PÁGINA 12 ---
2.1 Área de declaração de parâmetros de entrada
Naáreadedeclaraçãodeparâmetrosdeentradainformamostodososparâmetrosexternosqueaestratégiausará.
Essesparâmetrossãofundamentais,pois:
•Definemainterfacecomomundoexterno,ouseja,éondeusuáriopoderáalterareoqueservirácomoparâmetro
dechamadacasoaestratégiasejautilizadaemoutrainterface/estratégia.
•Defineositensqueserãoanalisadosnoprocessodeotimização.
Paradefinirumparâmetro: NOME_DO_PARÂMETRO(VALOR_DE_INICIALIZAÇÃO)
Exemplo:
Input Definição
Preço(Close); Defineumparâmetroinicializadocomovalordefechamentodepreços
dasériededados.
Período(2); DefineumparâmetrochamadoPeríodocomovalor2.
2.2 Área de declaração de variáveis e funções
Naáreade declaraçãodevariáveisinformamostodasas variáveisqueserão utilizadasnaestratégia. Nesta região
também descrevemos funções que desejamos usar no código. As funções devem ser sempre codificadas após a
declaraçãodasvariáveis.
Paradeclararumavariável: NOME_DA_VARIAVEL:TIPO
Exemplo:
Variável Definição
sResult: Float; CriaumavariávelchamdasResultdotipopontoflutuante.
nIndex: Integer; CriaumavariávelchamadanIndexparaarmanzenarnúmerointeiros.
2.3 Área de código
Nestapartedescreve-seocódigopropriamentedito,ouseja,asregrasqueutilizamparâmetros,variáveiseoutros
dadosparacalcularsinaiseindicadores.
2

--- PÁGINA 13 ---
3Fluxo de Execução de uma Estratégia
Ocódigodeumaestratégiaéexecutadodemaneirasequencial. Porém,eleéexecutadosequencialmentecandlepor
candle,comosehouvesseumlaçoquepercorretodasériededadosdeumativo.
Sendo assim, a sequência de comandos existente na área de código será executada uma vez para cada candle
existente. Paracadacandle,seráexecutadoocódigodaestratégiaemumloopimplícito. Aregraempseudocódigo
é,portanto:
•TendoumasériededadosXdetamanhoN;
•ParacadaitemX[i],comivariandode0atéN-1,executa-seaáreadecódigodaestratégia;
•Acadanovodadodoativo,ocódigodaestratégiacontinuasendoexecutado,avaliandooúltimoeopenúltimo
candle;
Importante:
•Omesmocandlepodeserprocessadodiversasvezes. Issoocorremuitoemtemporeal,ondecadatradepode
gerarumanotificaçãodereprocessamentodofluxodeexecução.
•Quandoumaordeméexecutada,ofluxodeexecuçãoreprocessaomesmocandleparaativarasordensCovers.
•Dependendodanotificaçãodoscandles,podemserreprocessadoscandlespassados. Issodeveserlevadoem
consideraçãopeloprogramador.
•Semprequeumcandlepassadoéreprocessado,serãoreprocessadostodoscandlesatéoatual.
•Em tempo real, quando o código está executando ao mesmo tempo que recebe novos dados do mercado,
o código da estratégia é executado diversas vezes para o último e o penúltimo candle durante a execução,
podendotambémexecutaremcandlespassados.
Essesprocessamentospodemalterarvaloresdevariáveisglobaisoudesérie,epodemcausarmudançasnacoloração
paracandlespassadosoumudançadecomportamentoquandoocódigoépausadoeexecutadonovamente.
Quandoestiverutilizandosériesemsuaestratégia,éimportantelembrarqueoprimeirotickdocandleteráovalor
[0] zerado. Como comentamos anteriormente, sua estratégia será executada não apenas no último candle e sim
tambémaopassado, devidoaoscálculosqueprecisamserfeitosparagarantirqueaNTSLfuncionecorretamente.
É importante ressaltar que não se pode assumir que um candle no passado não será avaliado, porém, se desejar,
é possível inibir o recálculo de algum valor utilizando a função LastBarOnChart() em uma condição no início do
códigoparaevitarisso. Éfundamentalcompreenderqueo[0]sempreestásereferindoaocandlequeestásendo
avaliado,enãonecessariamenteserádoúltimocandle.
Abaixo, um exemplo de como uma variável arbitrária ”nValor”funcionaria caso o último candle estivesse sendo
avaliado. Casoeuquisesseacessarovalordelahá2candlespassados,utilizaria ”nValor[2]” .
3

--- PÁGINA 14 ---
Porém,casoocódigoestejasendoexecutadoemumcandlenopassado,o nValor[0]seriareferenteaocandleatual
doprocessamento,enãoaoúltimocandlecomonoexemplopassado. Osoutroscandlestambémseriamacessados
combasenocandlequeestásendoprocessadonomomento,comonoexemploabaixo.
4

--- PÁGINA 15 ---
4Variáveis, tipos de dados e constantes
Asvariáveissãoutilizadasparaarmazenardados,conformeseutipoespecífico.
4.1 Tipos de dados
•Float ou Real - Representanúmerosdepontoflutuante.
•Integer ou Inteiro - Representanúmerosinteiros.
•Boolean ou Booleano - Representaçãológica: TrueouVerdadeiroeFalseouFalso
•Serie -Representaumasériededados.
ANTSLsuportaaconversãoimplícitadevaloresFloataInteiros,istoé,atribuirumvalorFloatdiretamenteaumvalor
Integer. Ovalorinteiroseráovalordopontoflutuante,descartandoascasasdecimais. Porexemplo,seeuatribuir
2.99ou2.35auminteiro,ovalordointeiroserá 2. Paraoutroscomportamentosdearredondamento,alinguagem
disponibilizaasfunçõesCeiling,FlooreRound. Paramaisdetalhessobreessasfunções,consulteessemesmomanual
naseçãodefunções.
Asvariáveisnalinguagemoferecemumaflexibilidademuitomaiordoquenamaioriadossistemasdeprogramação
conhecidos.
Todas as variáveis são globais, e deve ser dada uma atenção especial quando utilizadas. Ao programar usando
variáveis globais, deve ser levado em consideração o comportamento do processamento do fluxo de execução, a
cadavezqueofluxodeexecuçãoérealizadoasvariáveispodemterseuvaloralteradocombasenoúltimovalorque
tinham.
Quandoumavariávelforacessadautilizandocolchetes(exemplo: [x]),elaseráconsideradaumasériededadospelo
compilador. Seucomportamentoédiferente: sériesiniciamcadacandlecomseuvalorzerado. Tambémépossível
navegarentrevaloresatuaisepassados,medianteindexação.
4.2 Séries de dados
AssériesdedadossãoutilizadasparaobterdadosespecíficosdecadaCandle.
Séries:
•AberturaouOpen-Retornaovalordeaberturadecadacandle.
•Fechamento ouClose-Retornaodadodefechamento.
•MinimaouLow-Retornaovalordemínima.
•MaximaouHigh-Retornaodadodemáxima.
•Quantidade ouQuantity-Retornaovalordecontratosnegociadosdecadacandle.
•Volume-Retornaodadodevolumefinanceirodecadacandle.
4.3 Arrays
AnálogoaotipoSerie,aestruturadeumArraypermiteoarmazenamentodedadosdeumtipoespecífico,contudo,
apóssuacriação,seucomprimentoseráfixo,oquepermiteumaalocaçãomenordememória.
OacessoaoselementosdeumArrayéefetuadomedianteindexação.
Estrutura da declaração:
1
2var
Variavel : Array [Tamanho ]OfTipo ;
Afimdeexemplificação,segueumexemplodedeclaraçãodeumArrayestáticode10elementos,oqualépreenchido
comvaloresde1a10(primeiraestruturaderepetição),eefetuadoosomatóriodosvalores:
5

--- PÁGINA 16 ---
1
2
3
4
5
6
7
8
9
10
11var
i, sum : Integer ;
lista : array [1..10]ofInteger ;
begin
for i := 1to10do
lista[i] := i;
sum := 0;
for i := 1to10do
sum := sum + i;
Plot (sum);
end;
4.4 Correlação de múltiplos ativos
É possível ainda acessar os dados, ao utilizar o recurso Asset, onde é necessário parametrizar o ativo específico,
e a bolsa a qual pertence. As bolsas visualizadas na plataforma dependem se o usuário possui acesso a elas. Na
documentaçãonaplataformaestádisponível,naabaconstantes,apenasosfeedsqueousuárioteráacesso.
Bolsas que podem ser parametrizadas:
•feedBCB
•feedBMF
•feedBMFSynthetic
•feedBovespa
•feedCME
•feedDowJones
•feedEconomic
•feedMetrics
•feedNasdaq
•feedNyse
•feedOXR
•feedVector
•feedActivTrades
Estrutura da declaração:
1
2const
variavel = Asset ("nomeDoAtivo" ,feedNOMEDABOLSA );
Aseguir,umexemplodedeclaração,eacessoaosdadosdefechamentoeabertura:
1
2
3
4
5
6const
WDOFUT = Asset ("WDOFUT" ,feedBMF );
begin
Plot (WDOFUT.close);
Plot2 (WDOFUT.open);
end;
Alémdoacessoàssériesdedados,pode-seretornaroticker(String)ebolsa(String)doAssetdeclarado,apartirdas
funçõesGetAsseteGetFeed:
6

--- PÁGINA 17 ---
1
2
3
4
5
6const
WDO = Asset ("WDOFUT" ,feedBMF );
begin
if(MaxBarsForward = 0)then
PlotText ("Ticker: " + WDO.GetAsset + " ‐ Bolsa: " + WDO.GetFeed, clRed ,0,7);
end;
ÉpossívelinclusivedeclararNativos,afimdecorrelacionarosdadosparaimplementaçãodaestratégia.
Aseguir,umexemplodecoloração,ondeseráaplicadaacorverde,casoofechamentodoWDOestiveracimadesua
média(20períodos),eoativoWIN,fechandoabaixodesuamédia(20períodos).
Acoloraçãovermelhaseráaplicada,casoofechamentodoWDOestiverabaixodamédia,eoúltimopreçodoWIN
acimadesuamédia.
Acoloraçãocinzaseráidentificada,casonãosejamsatisfeitasascondições.
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17const
WDO = Asset ("WDOFUT" ,feedBMF );
WIN = Asset ("WINFUT" ,feedBMF );
input
Periodo( 20);
var
wdoMedia : Float ;
winMedia : Float ;
begin
wdoMedia := MediaExp (Periodo, WDO.close);
winMedia := MediaExp (Periodo, WIN.close);
if(WDO.close > wdoMedia) and (WIN.close < winMedia) then
PaintBar (clLime )
else if(WDO.close < wdoMedia) and (WIN.close > winMedia) then
PaintBar (clAqua )
end
Limite de ativos: Nãoépermitidodeclararouutilizarmaisde30ativosdistintosemumaúnicaestratégia. Caso
esselimitesejaexcedido,aseguintemensagemseráexibida,eaestratégianãoseráexecutada:
ErrodeExecução: Limitemáximode30múltiplosativosexcedido.
Atenção: Ao utilizar gráficos atemporais em conjunto com múltiplos ativos, as avaliações de
fechamento de candle serão feitas sempre em função do fechamento de candle do ativo principal.
Nesse momento, os ativos auxiliares não necessariamente terão seus fechamentos no mesmo mo-
mento, já que esses gráficos são atemporais, e não respeitam o mesmo critério de fechamento: tempo.
Porcontadisso, éesperadoqueobacktestouoreplaytenhamresultadosdiferentesdaautomação(queacontece
nosativosemtemporeal),issoporque,emtemporeal,nãoseestálevandoemcontaomesmocandlefechadopara
aanálisedosdadose,embacktestoureplay,obacktestpodeestarolhandoparacandlesquejáestãocompletos,ou
seja,fecharamapósofechamentodocandledoativoprincipal. Issosedeveaofatoquenobacktest,sóavaliamos
candlesjáfechadosenãoháconhecimentodotick-a-tickdentrodocandle. Destemodo,depoisdocandledoativo
principalterfechado,oscandlesdeoutrosativosaindaestavamemformação.
4.5 Acessando dados anteriores
OdadoatualdeumavariávelpodeserdescritoporVariavel[0]. Onúmeroentrecolchetesindicaodadodequantos
períodos anteriores deseja-se acessar (sendo 0, portanto, da barra corrente). Para ilustrar melhor, vamos a um
exemplo:
1sResult := Preco[ 1];
7

--- PÁGINA 18 ---
A linha de código acima está atribuindo o valor da variável Preco[1] para a variável sResult. Imagine que Preço
correspondeatodososvaloresdefechamentodasériededadosdeumcertoativo,comonatabelaabaixo:
Data Posição Valor
05/10/2010 Preço[0] 12,43
04/10/2010 Preço[1] 12,40
01/10/2010 Preço[2] 11,39
30/09/2010 Preço[3] 12,51
29/09/2010 Preço[4] 12,38
dd/mm/aaaa Preço[5] xx,xx
Portanto,Preco[1]refere-seaovalordeontemdopreçodefechamento(sResultvaleentão12,40emnossoexemplo).
Dessa forma, o número inteiro que especificarmos entre colchetes indica ao sistema quantos períodos no passado
deve-seacessarainformação.
4.6 Sombreamento de funções por variáveis
NaNTSL,variáveisefunçõescompartilhamomesmoespaçodenomesnoescopodoscript. Issosignificaque, ao
declararumavariávelcomomesmoidentificadordeumafunçãoexistente,afunçãoserásobrescritaporessavariável
nocontextoatual. Essecomportamentoéconhecidocomo sombreamento .
Quando isso ocorre, a função original deixa de estar acessível enquanto a variável estiver em escopo, o que pode
resultaremerrosdeexecução,especialmenteaoutilizarnomesdefunçõesnativascomo BuyToCover ,SellToCover ,
entreoutras.
Exemplo: Sombreamento de função nativa
1
2
3
4
5
6
7var
BuyToCover: integer;
begin
BuyToCover := 1;// A função BuyToCover é sobrescrita por esta variável
ifClose > Media (Close, 20)then
BuyToCover(); // Erro: BuyToCover agora é um inteiro , não uma função
end;
Noexemploacima,afunção BuyToCover éumafunçãonativausadaparaenviodeordensderecompraadescoberto.
Noentanto,aodeclararumavariávelcomomesmonome( BuyToCover: integer ),afunçãooriginalfoisobrescrita.
Atentativadeinvocaçãodafunçãoresultaemerro,poisonomeagoraserefereaumvalorinteiro.
Boas práticas
•Evitedeclararvariáveiscomnomesiguaisafunçõesnativas,como BuyToCover ,SellShortStop ,Media,etc.
•Prefiranomesmaisdescritivosparavariáveis,como qtdeCompra ,reversaoLong ,ativarSinal ,etc.
•Semprereviseseonomeescolhidoparaavariávelnãocorrespondeanenhumafunçãodalinguagem.
4.7 Constantes
Sãoutilizadasparaainserçãodeparâmetrosdedeterminadasfunções,estesvaloresnãopodemseralteradospelo
usuário.
Lado da Ordem:
•osCompra-Ordemdecompra.
8

--- PÁGINA 19 ---
•osVenda-Ordemdevenda.
Opções:
•optCall-Opçãodecompra.
•optPut-Opçãodevenda.
Tipo de Ordem:
•otLimit-Tipolimite.
•otMarket-Amercado.
•otStopLimit -Tipostop.
Cores:
•clAqua ou clAzulClaro -Corazul-claro
•clBlack ou clPreto -Corpreta
•clAzul-Corazul
•clCreme-Corcreme
•clCinzaEscuro -Corcinza-escuro
•clFucsia-Corfúcsia
•clCinza-Corcinza
•clVerde-Corverde
•clVerdeLimao -Corverde-limão
•clCinzaClaro -Corcinza-claro
•clMarrom-Cormarrom
•clCinzaMedio -CorCinzamédio
•clVerdeClaro -Corverde-claro
•clAzulMarinho -Corazul-marinho
•clVerdeOliva -Corverde-oliva
•clPurpura-Corpúrpura
•clVermelho -Corvermelha
•clPrata-Corprata
•clAzulClaro -Corazul-claro
•clTeal-CorVerde-azulado
•clBranco-Corbranca
•clAmarelo-Coramarela
Constantes Matemáticas:
•Math_PI–NúmeroPi
•Math_Sqrt2 –Raizquadradade2
•Math_Euler –NúmerodeEuler
•Math_Log2E –log2(e)
9

--- PÁGINA 20 ---
•Math_Log10E –log10(e)
•Math_Ln2–ln(2)
•Math_Ln10–ln(10)
•Math_PI_Div2 –π/2
•Math_PI_Div4 –π/4
•Math_1DivPI –1/π
•Math_2DivPI –2/π
•Math_2DivSqrtPI –2/√π
•Math_1DivSqrt2 –1/√
2
•Math_SqrtPI –Raizquadradade π
•Math_EulerMascheroni –ConstantedeEuler-Mascheroni
•Math_Phi–NúmerodeOuro
•Math_EmbreeTrefethen –ConstantedeEmbree-Trefethen
•Math_FeigenbaumDelta –ConstantedeFeigenbaum( δ)
•Math_FeigenbaumAlpha –ConstantedeFeigenbaum( α)
•Math_TwinPrime –Constantedosprimosgêmeos
•Math_MeisselMertens –ConstantedeMeissel-Mertens
•Math_BrunTwinPrimes –ConstantedeBrunparaprimosgêmeos
•Math_BrunQuadruples –ConstantedeBrunparaprimosquádruplos
•Math_BruijnNewman –ConstantedeBruijn-Newman
•Math_Catalan –ConstantedeCatalan
•Math_LandauRamanujan –ConstantedeLandau-Ramanujan
•Math_Viswanath –ConstantedeViswanath
•Math_Legendre –ConstantedeLegendre
•Math_RamanujanSoldner –ConstantedeRamanujan-Soldner
•Math_ErdosBorwein –ConstantedeErdős-Borwein
•Math_Liouville –ConstantedeLiouville
•Math_MinInt –Menorinteirosuportado
•Math_MaxInt –Maiorinteirosuportado
10

--- PÁGINA 21 ---
5Controle de Fluxo
Asinstruçõesdefluxosãoutilizadasparaadministrarasequênciadeexecuçãodasinstruçõesdentrodeumprograma.
ANTSLapresentatrêstiposdessetipo:
5.1 If then else (Se então senão)
Se(condição)forverdadeiroexecuta-sealistagem(comandos1),caso(condição)sejafalsoexecuta-se(comandos
2). Tanto(comandos1)quanto(comandos2)podemsersequênciasdeinstruções.
Aexpressão(condição)podeserqualquertipodetestequeresulteemverdadeirooufalso,algunsexemplos:
1
2
3if(Close > Close[ 1])
if(nIndex = 10)
if(bCond = false )and (Volume > 1000 )
Aseguirumexemplodecoloraçãodecandlesdeacordocomacondiçãopresenteno If then else (Se então senão) .
1
2
3
4
5
6
7
8begin
if(close = close[ 1])then
PaintBar (clYellow )
else if(close > close[ 1])then
PaintBar (clGreen )
else
PaintBar (clRed );
end;
Se o valor de fechamento da barra atual (Close equivale a Close[0]) for igual ao fechamento da barra anterior
(RepresentadoporClose[1])executa-seocódigoquesegueapalavrareservada THEN (ENTÃO) .Casocontrário,
osistemaexecutaocódigosubsequenteatéchegarnapalavrareservada ELSE (SENÃO) .
Exemplo com múltiplas instruções begin e end (inicio e fim)
Quandoalistagem(comandos1oucomandos2)contivermaisdeumainstrução,énecessáriodelimitaroblococom
begin (inicio) eend (fim). Vejaoexemplo:
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17begin
if(close = close[ 1])then
begin
PaintBar (clYellow );
PlotText ("Fechamento igual ao anterior", clYellow );
end
else if(close > close[ 1])then
begin
PaintBar (clGreen );
PlotText ("Fechamento superior ao anterior", clGreen );
end
else
begin
PaintBar (clRed );
PlotText ("Fechamento inferior ao anterior", clRed );
end;
end;
5.2 For (To / DownTo) Do (Para (Até / DownTo) Faça)
O comando FOR (PARA) é utilizado para definir um loop controlado, ou seja, o bloco é executado repetidamente
atéqueavariáveldecontagemsaiadovalorinicialeatinjaovalorfinal.
11

--- PÁGINA 22 ---
Paraavariávelcontroladora,pode-seincremetá-la,apartirdocomando To (Até),oudecrementá-la,aoutilizarna
estruturao DownTo.
Exemplo (For To Do (Para Até Faça)):
Observeocódigodamédiamóvel,avariáveldecontagemnIndexcomeçacomovalor0edevechegaraovalorde
Periodo–1. Noexemplo,Periodofoidefinidocomoparâmetrodeentrada,paradefinirotamanhodamédia.
Assim,casosejaparametrizadoovalor0(Periodo),ocomandoFORcriaráumloopde9iterações(de0até8)para
cadabarra,calculandoassimovalormédioparaaposiçãoatual.
1
2
3
4
5
6
7
8
9
10
11
12
13
14input
Preco(close);
Periodo( 9);
var
sResult : Float ;
nIndex : Integer ;
begin
sResult := 0;
for nIndex := 0toPeriodo ‐ 1do
begin
sResult := sResult + Preco[nIndex];
end;
Plot (sResult / Periodo);
end;
Exemplo (For To Do x For DownTo Do (Para Até Faça x Para DownTo Faça)):
Afimdidático,segueumexemplodecálculodefatorial,utilizandoasduasestruturas.
For To Do (Para Até Faça):
1
2
3
4
5
6
7
8
9
10
11input
n(6);
var
fatorial : Integer ;
i :Integer ;
begin
fatorial := 1;
For i := 1TonDo
fatorial := fatorial * i;
Plot (fatorial);
end;
For DownTo Do (Para DownTo Faça):
1
2
3
4
5
6
7
8
9
10
11input
n(6);
var
fatorial : Integer ;
i :Integer ;
begin
fatorial := 1;
For i := n DownTo 1Do
fatorial := fatorial * i;
Plot (fatorial);
end;
5.3 While (Enquanto)
A execução da estratégia ao chegar no comando WHILE testa o resultado de (condição). Caso (condição) seja
12

--- PÁGINA 23 ---
verdadeiro (true) a listagem (comandos) é executada. Após a execução a (condição) volta a ser testada, assim, o
loopapenasiráseencerrarquando(condição)deixardeserverdadeira.
Exemplo:
Nocódigoaseguir,reescrevemosoindicadormédiamóvelutilizandoainstrução WHILE (ENQUANTO) aoinvésde
FOR (PARA) .
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16input
Preco(close);
Periodo( 9);
var
sResult : Float ;
nIndex : Integer ;
begin
sResult := 0;
nIndex := 0;
while (nIndex <= Periodo ‐ 1)do
begin
sResult := sResult + Preco[nIndex];
nIndex := nIndex + 1;
end;
Plot (sResult / Periodo);
end;
5.4 Repeat (Repita)
Estecomando difere-sedo ForeWhile, no sentido deque a condição serátestada no final daestrutura, e não no
início,portanto,asinstruçõesdoblocoserãoexecutadaspelomenosumavez.
Exemplo:
Afimdecomparaçãocomasoutrasestruturasjáabordadas,segueoexemplodecálculodefatorial:
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16input
n(5);
var
fatorial : Integer ;
i :Integer ;
begin
fatorial := 1;
i := 1;
repeat
begin
fatorial := fatorial * i;
i := i + 1;
end
until (i > n);
Plot (fatorial);
end;
13

--- PÁGINA 24 ---
6Operadores
Osoperadoresconstituemossímbolosmatemáticoselógicosusadosemcálculosecomparações.
6.1 Operadores matemáticos
Osoperadoresmatemáticossão:
Operador Descrição Exemplo Resultado
+ Adição 5+4 9
- Subtração 5-4 1
* Multiplicação 5*4 20
/ Divisão 5/4 1,25
Ooperadordedivisãopossuiamaiorforçadeprecedência,seguidopormultiplicação. Assim,comoconstanaimagem
abaixo:
Expressão Resultado
10*10/5+2 22
10*10+2 102
50+100*10/2-2 549
6.2 Operadores lógicos
Os operadores lógicos são usados principalmente para comparações e para combinar várias condições em uma
expressãológica. Aquiestáumaexplicaçãodeseuuso:
”E” lógico
Representadopelapalavrareservada and (e), retornaráTRUEsomentequandoasduas condiçõesdetesteforem
verdadeirasconformetabelaverdadeabaixo:
Condição 1 AND Condição 2 Resultado
FALSE AND FALSE FALSE
FALSE AND TRUE FALSE
TRUE AND FALSE FALSE
TRUE AND TRUE TRUE
”OU” lógico
Representado pela palavra reservada or (ou), retornará TRUE (verdadeiro) sempre que pelo menos uma das
condiçõesdetesteforverdadeira,conformetabelaverdadeabaixo:
Condição 1 OR Condição 2 Resultado
FALSE OR FALSE FALSE
FALSE OR TRUE TRUE
TRUE OR FALSE TRUE
TRUE OR TRUE TRUE
14

--- PÁGINA 25 ---
”NOT” lógico
Representado pela palavra reservada not (não), retornará TRUE (verdadeiro) quando uma condição de teste for
falsa,conformetabelaverdadeabaixo:
Condição NOT Resultado
FALSE NOT TRUE
TRUE NOT FALSE
15

--- PÁGINA 26 ---
7Function (Função)
Conformevisto,funçõessãodeclaradasedescritasnaáreadedeclaraçãodevariáveisefunções,abaixoumexemplo
defunções:
Observequeprimeiroédeclaradaavariávelusadanaáreaprincipal. Ésempreinteressantemanterocódigoomais
claroeorganizadopossíveleasfunçõesdesempenhamumpapelfundamentalnessatarefa.
7.1 Criando Funções (Sintaxe)
1
2
3
4Função NomedaFunção (parâmetro1 : Tipo ;
parâmetro2 : Tipo ; parâmetroN : Tipo ):Tipo de Retorno ;
begin
Comandos
end;
7.2 Funções de biblioteca
Alémdousuáriopodercriarseusprópriosindicadores,épossívelutilizarabibliotecadosistema,ouseja,ousuário
podeutilizarestratégiasjácriadasemnovas.
Dentrodasfuncionalidadesdebibliotecas,ousuáriopoderácolorirosgráficosdeacordocomascondiçõesdetermi-
nadaspeloseuindicador.
16

--- PÁGINA 27 ---
8Procedure (Procedimento)
Proceduressãosemelhantesàsfunções,masnãoretornamumvalor. Elassãousadasparaagruparcomandosque
podem ser chamados em diferentes partes do código, ajudando a manter a organização e legibilidade. A seguir,
temosumexemplopráticodeumaprocedureparaabrirposiçõesnomercadocombaseemparâmetros.
8.1 Criando Procedimentos (Sintaxe)
1
2
3
4procedimento NomeDaProcedure (parâmetro1 : Tipo ;
parâmetro2 : Tipo ; parâmetroN : Tipo );
begin
Comandos
end;
9Back-Testing
A funcionalidade de Back-testing permite ao usuário avaliar uma determinada estratégia, teoria ou modelo através
deumaanálisededadoshistóricos.
ListadefuncionalidadesutilizadasparaBack-Testing:
•Listadefunções;
•Criarregradeexecução;
•Execuçãodaestratégia.
ApóscriadaaestratégiadeBack-Testing,paraseradicionadodiretamentenográfico,cliquenobotãodireitosobreo
mouseeselecioneaopção”InserirEstratégiadeExecução”.
Ocódigodeback-testingsimulaomesmocomportamentodaautomação,assimulaçõesdeexecuçãodeordenssão
processadastodasaofinaldofluxodeexecuçãodocandle. Quandoocorreaumentodeposiçãoaofinaldofluxode
execução,ocódigoéreprocessadoparaativarasordensdecoberturadaoperação(ordensToCover). Ousuáriopode
observaressecomportamentoquandoutilizaromododebug.
17

--- PÁGINA 28 ---
9.1 Modo de Execução do Backtest: OHLC e Tick a Tick
OProfitUltrapermiteescolherentredoismodosdeexecuçãoparaobacktest: OHLCouTickaTick. Abaixo,explicamos
comocadaumdessesmodosoperaesuascaracterísticasespecíficas.
OmodoOHLC(Open,High,Low,Close)utilizaapenasospreçosdeabertura,máxima,mínimaefechamentodecada
candlepararealizaroscálculosesimularomovimentodasoperações. AssaídasLimiteStoputilizamospreçosde
máxima,mínimaefechamentoparasimularasexecuções.
Comoosmovimentosdentrodocandlenãosãoconsiderados, assimulaçõessãomenosdetalhadasemrelaçãoao
fluxorealdepreçosintraday. Emcasosdeordensdestopougain,omovimentodopreçoéverificadocombasenos
níveisOHLCdocandle.
O modo Tick a Tick utiliza exatamente o fluxo dos preços dentro de cada candle para simular as operações. Isso
garantemaiorprecisãoaorefletircomoasordensseriamexecutadasemtemporeal. Permitindosimulaçõesdesaídas
LimiteStopnosexatospontosemqueseriamexecutadasduranteopregão.
EmsimulaçõesOHLC,obacktestpodeconcluirqueumstopouumgainnãofoiatingidoaoavaliarapenasospreços
doOHLC,poracharqueaordemexecutouapósavariaçãodepreço. JánomodoTickaTick,omesmostoppode
serexecutadocorretamenteaoanalisarospreçosintraday,assegurandoaaderênciaàlógicaoperacionalreal.
Porutilizarumagranularidademaisfina,omodoTickaTicktemmenordisponibilidadedehistóricoquandocomparado
ao OHLC. Isso pode afetar simulações de períodos longos. Essa limitação pode ser encontrada ao executar uma
estratégianomodoTickaTick.
Considere a imagem abaixo, que ilustra dois candles de alta, onde a linha verde representa o movimento real dos
preçosdentrodocandleeopontovermelho,apontoondeumaordemfoienviada. Nocasodeumbacktestenviando
umaordemalgunsticksacimadaabertura,nomodoOHLC,aordemsóseriaexecutadaapósopreçoatingiramínima
(LOW)e,posteriormente,alcançarofechamento(CLOSE).JánomodoTickaTick,aordempoderiaserexecutada
assimqueopreçoatingeonívelprogramado,mesmoantesdocandleserconcluído,permitindo,porexemplo,que
umaordemdeLOSSsejadisparadaantesdofechamentodocandle.
18

--- PÁGINA 29 ---
10Automação de Estratégias
OmódulodeAutomaçãodeEstratégiastemoobjetivodeautomatizarasestratégiasdeexecuçãocriadasnoEditor
de Estratégias. Ele está disponível nas versões mais avançadas das plataformas Nelogica, em modo simulação de
formagratuitaedisponívelparacontasreaispormeiodemódulosopcionais.
Onovomódulodeautomaçãoespelhaofuncionamentodobacktestdasestratégiasparaexecuçãodeordensreaise
emsimulador. Parafazerogerenciamentodessasautomaçõespode-seacessaromenuEstratégias>Automaçãode
Estratégias.
AjaneladeAutomaçõesdeEstratégiaspermitequepossamoscriaregerenciarautomações,acompanharoresultado
detodasasautomaçõesdemaneirasimplificada. Casoqueiraumdetalhamentomaiordaautomaçãopode-seclicar
comobotãodireitoeirem”DetalhesdaAutomação”. Nosdetalhesépossívelacompanhartodososeventosquea
execuçãogerou,assimcomodiversosindicadoresdeperformancedaautomação.
Os próximos capítulos detalham desde a criação de uma estratégia de execução utilizando o novo módulo de Au-
tomação de Estratégias, como o usuário pode acompanhar essas automações, e por fim detalha regras gerais da
execuçãodasestratégias.
10.1 Criando uma estratégia de execução
Paracriarumaautomaçãovocêprecisarácriarumaestratégiadeexecução,quepodesercriadaapartirdoEditorde
Estratégias. Sevocêjásabeoqueéisso,podeseguirparaopróximopasso.
Ao abrir o Editor de Estratégias, você pode criar sua estratégia de execução utilizando funções de backtest (essas
funçõesirãocaracterizaraestratégiacomosendoumaestratégiadeexecuçãoeissopossibilitaráasuaseleçãono
próximo passo para que a estratégia seja automatizada). Para criar uma estratégia de execução você deve usar
funçõesdomódulobacktest,quepodeservistonaimagemabaixo:
19

--- PÁGINA 30 ---
SugerimosquevocêutilizeafunçãoNovaestratégia,eselecioneexemplosdeestratégiasdeexecuçãosevocênão
estiverfamiliarizadocomprogramaçãooucomoEditordeEstratégias.
20

--- PÁGINA 31 ---
Abaixoéapresentadoumexemplodeestratégia,utilizandooindicadorIFR/RSI,quepodeserutilizadonomódulode
estratégiasautomatizadas:
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21/////////////////////////////////////////////////////////////////////
// IFR //
/////////////////////////////////////////////////////////////////////
begin
// Verifica se está comprado
if(IsBought )then
begin
// Fecha a posição com uma venda caso o IFR
// esteja superior a 70 (sobrecomprado)
if(RSI(9,0) > 70)then
SellToCoverAtMarket;
end
// Verifica se está vendido
else if(IsSold )then
begin
// Fecha a posição com uma compra caso o IFR
// esteja inferior a 30 (sobrevendido)
if(RSI(9,0) < 30)then
BuyToCoverAtMarket ;
end;
end;
10.2 Criando uma automação
Paracriarumanovaautomação,bastaabrirainterfacedecontroleelocalizarobotão“NovaAutomação”,disponível
nomenusuperiordajanela. Essebotãoestarásemprevisívelnessaáreadainterface. Casoaindanãoexistanenhuma
automaçãocriada,omesmobotão“NovaAutomação”seráexibidoemdestaquenocentrodatela.
21

--- PÁGINA 32 ---
Após clicar nesse botão será aberta a janela de criação da da estratégia automatizada onde será configurada os
parâmetrosdaautomaçãoemduasetapas. Aprimeiraetapacontémconfiguraçõesessenciaiseobrigatóriasparaa
criaçãodaautomação.
Na primeira etapa, nas configurações obrigatórias, é possível definir a conta, a estratégia de execução, ativo alvo,
quantidadeporordem,quantidademáximadaposiçãoeoperíodoqueaestratégiausarácomobaseparaasanálises.
A Estratégia de execução é o “cérebro” da automação. Aqui será selecionado aquela estratégia implementada no
editor. Ao clicar no botão “Selecionar Estratégia” estarão listadas todas as estratégias de execução presentes na
plataforma. Além disso, caso a estratégia selecionada possua parâmetros de entrada, os mesmos serão listados
nessajanelaparaquepossamsereditadosdamelhormaneiraparaaestratégiaespecífica.
A próxima etapa contém configuraçõesopcionais que podem ser exploradas nos menus acima quando as Configu-
raçõesAvançadasestiveremativas(cantoinferioresquerdo). AquipodemosconfiguraropçõesdeEntradaeSaída,
RiscoeSegurança. Essasopçõesestãodetalhadasaseguir:
22

--- PÁGINA 33 ---
10.3 Opções de entrada
Nestaseçãoépossívelespecificarparâmetrosquealteremaestratégiadeaberturadeordensdaautomatização.
Emordemdeentradavocêpodeespecificarqualvaiserotipodeaberturadeposição, ouseja, seaestratégiairá
abrirnovasposiçõesapenasdecompra,ouapenasdevendaouambososlados.
Épossíveltambémescolhersevocêdesejaconfirmarcadaordemdeaumentodeposição. Nestecaso,aconfirmação
deordensserámostradaparacadanovaordemdaestratégia.
10.4 Modo de Execução
Há dois modos de execução: ”Realizar envio de ordens no fechamento do candle” e”Realizar envio de
ordens quando a condição for satisfeita” . A mudança de uma opção para a outra causa grande impacto na
maneiracomoocódigodaestratégiaéinterpretado. Abaixo,édetalhadocomocadamodosecomporta.
23

--- PÁGINA 34 ---
Ordens no Fechamento do Candle
Estaéaconfiguraçãopadrãodomododeexecuçãodaautomaçãoeéaquetrazmaiorsemelhançacomasoperações
realizadaspormeiodobacktestnoEditordeEstratégias. Paraativarestemodoselecioneaopção “Realizar envio
de ordens no fechamento do candle”.
Acadafechamentodecandle,ocódigoparaenviodeordenséreavaliadoesetornadisponívelparaoenviodenovas
ordensdeentrada,ouaalteraçãodeordensdeentradaabertasoudeordensCover,casohajaposição. Destemodo,
aescolhadetempográficoécrucialparasuaautomação.
Ordensqueaumentemaexposiçãoparaomercadoeforamenviadasaofinaldeumcandleequenãoforemexecu-
tadasatéofinaldocandleseguinteserãocanceladasoueditadasquandoopróximocandlefinalizar,deacordocom
a estratégia do usuário. Uma vez que, apenas sabemos que um candle foi finalizado quando o próximo iniciar em
gráficosatemporais,poderáocorreraexecuçãodeordensemumcandlesubsequentecasoocancelamentochegue
nabolsaapósaexecuçãodamesma.
Éimportanteressaltarqueaautomaçãopoderáapresentardivergênciasemrelaçãoaobacktestaosercomparado
comaexecuçãodaautomaçãoemumacontadesimulação(ordenssimuladas)oucontareal(ordensreais),operando
aovivonomercadoreal. Issosedeveadiversosfatores,como: Spread,Margem,RLP,DelaysnaBolsa,Altavolatil-
idadedepreçodealgunsativos,entreoutros.
Essas diferenças acontecem primordialmente em séries de dados atemporais, as quais podem causar a criação de
muitos candles em pouco tempo. No backtest, por termos zero delay, as ordens são criadas sempre no candle
subsequente, porém no mercado real, onde há delay, por menor que ele seja, ordens podem ser executadas em
candlessubsequentesjáquenãohouvetemponacriaçãodocancelamentodessasordens.
Alémdisso,háumasegundaopçãocasoessemodosejaselecionado. Ativandoessafunção,vocêteráumaexecução
maispróximaaobacktest,jáqueocódigoexecutaráapenasnofechamentodocandleoucomumaatualizaçãode
posição. Comaopçãodesativada,ocódigoéexecutadodiversasvezesnomesmocandle.
Ordens ao Satisfazer Condição
Esteéomodoavançadodeenviodeordensautomatizadas. Elenãoécompatívelcomobacktestdaaplicação,uma
vezquerealizaoperaçõesaqualquermomentoduranteaformaçãodoscandles,oqueimpedeobacktestdesimular
adequadamente esse modo de execução. Para ativar este modo, selecione a opção “Realizar envio de ordens
quando a condição for satisfeita” .
Nestemodo, ocódigoéconstantementeavaliadoduranteaexecuçãodaautomação, easordenspodemserenvi-
adasaqualquermomentoduranteaformaçãodocandle,desdequeocódigosatisfaçaacondiçãodeenvio. Como
mostradonaimagemacima,existemduasopçõesquepodemserconfiguradasnestemodo. Detalhamoscadauma
delasaseguir:
A primeira opção, “Esperar o fechamento do candle para primeira execução” faz com que a automação
aguardeoencerramentodocandleatualparacomeçaraexecutarordens. Ouseja,somentequandoumnovocandle
foriniciadoéqueasordensserãoenviadas.
A segunda opção, “Permitir múltiplos envios e alterações de ordens para a mesma barra” , quando habil-
itada, permite que a automação envie e modifique ordens de entrada e saída à medida que o código satisfaça as
condições de envio. Isso ocorre respeitando um intervalo mínimo entre as alterações, como medida de proteção
contraenvioexcessivodeordens(flood). Casoessaopçãonãoestejaselecionada,aautomaçãolimitaráoenvioea
modificaçãodeordensaapenasumavezporbarra,semprequeacondiçãodefinidanocódigoforsatisfeita.
Aestratégiadeatualizaçãodasordens,quandoaopçãodemúltiplosenviosparaamesmabarraestiverhabilitada,
seguiráumaequaçãolinearquedependedaproximidadedasordensemrelaçãoaopreçoatual. Ouseja:
•Seasordensestiveremmuitodistantesdopreçoatual,serãoatualizadascommenorfrequência;
•Seestiveremmuitopróximasdopreçoatual,serãoatualizadascommaiorfrequência.
24

--- PÁGINA 35 ---
Vale ressaltar que todas as ordens são atualizadas simultaneamente. No entanto, a frequência de atualização é
definidacombasenaordemmaispróximadopreçoatual.
Existeumintervalomínimodeatualizaçãode10segundos. Assim,asordensserãoenviadasoualteradas,nomáximo,
acada10segundos.
Otemporizadordeenviodeordenssóéatualizadoquandoocorrealgumamodificação. Ouseja,seocódigoenviar
uma ordem diferente das que já estão apregoadas, o sistema irá verificar quando ocorreu a última modificação e
determinaromomentodapróximaatualização,liberandoentãonovosenviosoualterações.
Assimcomonomododeatualizaçãoaofechamentodocandle,asordensdesaídasempreserãoatualizadasquando
houverumaumentodeposição,afimderealizarorebalanceamentodasordensdecobertura.
Neste modo de execução, as condições para envio de ordens são avaliadas de forma contínua e em tempo real,
permitindoqueaentradaocorraimediatamenteassimqueacondiçãoespecificadaforsatisfeitacomo,porexemplo,
nocruzamentodemédiasmóveisounorompimentodeumníveldepreçopré-definido. Essaabordagemproporciona
maioragilidadeeprecisãonaexecução,poisasordenspodemserenviadasnoexatomomentoemqueascondições
sãoatendidas.
Lembre-sedequeestemodonãoécompatívelcomobacktestdeestratégias,poisdependededadosemtemporeal,o
queinviabilizaaprevisãoprecisadocomportamentodaautomação. Paratestarodesempenhodesuaestratégianeste
modo, énecessárioutilizarorecursodereplaydemercadoourealizarostestesdiretamentenopregão, utilizando
umacontadesimulação.
10.5 Horários de Operação
Nestaseçãoépossívelconfigurarosperíodosemqueaestratégiapoderáounãoenviarordens,conformeasopções
disponíveis:
•Intervalo de Execução: defineoperíodoemqueaestratégiaestaráhabilitadaparaenviarordens. Apóso
horáriofinaldointervalo,aestratégianãoserápausada,masdeixarádeenviarnovasordensautomaticamente.
Casodeseje,épossívelmarcaraopçãoZerarPosiçãoparaque,aofinaldointervalo,todasasposiçõesabertas
sejamencerradasautomaticamente.
•Intervalo de Suspensão: aoinvésdedefinirquandoaautomaçãoiráoperar,estemodopermiteconfigurar
períodosemqueaestratégianãodeveráoperar. Duranteesseintervalo,nenhumanovaordemseráenviada.
Assimcomonomodoanterior,épossívelhabilitaraopçãoZerarPosiçãoparaforçaroencerramentodeposições
abertasnoiníciodointervalodesuspensão.
Essas configurações permitem maior controle sobre a atuação da estratégia durante o pregão, possibilitando, por
exemplo,evitaroperaçõesemhoráriosdebaixaliquidezoueventosdemaiorvolatilidade.
10.6 Opções de saída
Nestaoutraetapadaconfiguração,épossívelalterarconfiguraçõesdesaídadesuaautomação.
AquiépossívelconfigurarumaestratégiaOCOqueseráabertajuntocomsuasordens, masatenção, casovocêjá
tenhaordensdesaídaimplementadasemsuaestratégiadenegociação(ordensdecobertura),estasnãoserãomais
executadasjáqueasordensOCOterãopreferência.
25

--- PÁGINA 36 ---
Tambémépossívelconfigurarnestaseçãoazeragemautomáticaporhorário. Aplataformaprecisaestarabertapara
queazeragemaconteça,assimcomoparaqueaautomaçãofuncione.
10.7 Risco
Seguindoasconfiguraçõestemosasconfiguraçõesderiscodaautomação. NaseçãoPausareZeraraoAlcançaré
possívelconfigurarparâmetrosqueirãopausareencerrarasposiçõesabertasdeacordocomumobjetivodeganho,
ouumlimitedeperda. Casovocênãodesejeencerraraposiçãoquandoatingirumobjetivodeganhoselecionaa
opção”NãoZeraraoAtingirObjetivodeGanho”.
JáaseçãoPausaraoAlcançarpossibilitaqueaautomaçãosejapausadaquandoalcançadososnúmerosdeperdas
consecutivasemáximodeoperaçõesconfigurados.
Aquitambémdisponibilizamosumatalhoparaquevocêpossaconfiguraroriscoglobaldacarteira/contanogerenci-
adorderiscodaplataforma.
10.8 Segurança
Por fim, na seção Segurança, temos algumas configurações para definir o comportamento da estratégia em caso
ocorraumerrodeexecuçãonocódigodamesmaoueventuaismudançasdomercado,comoaentradadoativoem
leilão.
26

--- PÁGINA 37 ---
Umavezcriadaaautomação,vocêpodevisualizá-lanajanelaAutomaçãodeEstratégias:
10.9 Acompanhamento
Para acompanhar a sua automação você pode visualizar um resumo rápido das principais informações na lista de
automações da janela Automação de Estratégias. Nela você pode visualizar o status, conta e carteira em que a
automaçãoestávinculada,ativo,nomedaestratégia,períodográficoeosresultadosrelacionadosàexecução.
Vocêtambémpodevisualizarnestajanelaumresumodasestatísticasrelacionadasaessaestratégiaquecontémmais
detalhesdaestratégia:
27

--- PÁGINA 38 ---
Paraligar/pausarumaautomaçãodemaneiraindividualpode-seutilizaropainel,eclicaremexecutar:
AtravésdomenudecontextotambémépossívelzeraraposiçãodeumaestratégiapausadaouPausar+ZerarPosição
deumaestratégiaemexecução. PodemostambémeditarocódigodaautomaçãonoEditordeEstratégias, Excluir
aautomaçãoqueiráexcluirtambémacarteiraatreladaaela. Pararealizarediçõesnasuaautomação,vocêpode,
dentrodointerfacedecontrole,clicarcombotãodireitonaestratégiadesejadaeirem”EditarAutomação”ouclicar
diretamentenaengrenagem. Lembrandoquecasoasuaautomaçãoestejaligada,aorealizaralgumaediçãoelaserá
pausada.
28

--- PÁGINA 39 ---
Paraacompanharosdetalhesdoqueaexecuçãoestáexecutando,váemDetalhesdaAutomação. Nestajanelavocê
poderáacompanhartantoasordensesinaisqueaestratégiaestágerando,comotambémacompanharaperformance
eresultadosdaestratégiamaisdetalhadamente.
NajaneladeAutomaçõesépossívelutilizarosbotõesnocantosuperiordireitodainterfacedecontroleparapausar
todasasautomaçõesemexecuçãoouparapausarezerartodasasposiçõesemaberto:
29

--- PÁGINA 40 ---
Casovocêpossuaalgumaautomaçãoligadaserápossívelidentificarmesmocomajaneladeestratégiasautomatizadas
fechadas,poisnomenusuperiordasuaPlataformaserádestacadoemazulomenudeEstratégias.
Neste menu você será informado quantas estratégias você possui em execução e permitirá que você tome ações
rápidasatravésdomenucomopausartudooupausarezerartudo.
10.10 Raio-X
Disponívelexclusivamentenosprodutoscomomódulo Automações Premium (ousuperior),afunção XRayéum
dosprincipaisrecursosintroduzidosna Automação 2.0 . Elafoidesenvolvidaparaproporcionarmaiorvisibilidadee
controlesobreascondiçõesevariáveisenvolvidasnaexecuçãodeestratégiasautomatizadas.
Objetivo
Afunção XRaypermite:
•Acompanharoestadodascondiçõesutilizadasnalógicadaestratégia.
•Visualizarosvaloresatuaisdasvariáveisenvolvidasnatomadadedecisão.
•Agrupar visualmente as condições no Gerenciador de Automações, utilizando cores e nomes distintos para
facilitaraleitura(ex: amareloparacompra,verdeparavenda).
30

--- PÁGINA 41 ---
ParaqueasinformaçõesapareçamcorretamentenoGerenciadordeAutomações,énecessárioinserirafunção XRay
nocódigodaestratégia. Achamadadafunçãodeveindicaronomedacondição,seuvalorlógico,ogrupoaoqual
pertence,ovalorassociadoeacorcorrespondente.
Visualização no Gerenciador de Automações
Ao executar uma automação com a função XRayno código, o botão Raio-Xficará disponível no Gerenciador de
Automações. Atravésdele,épossível:
•Verificarquaiscondiçõesforamsatisfeitasduranteaexecução.
•Observarosvaloresdasvariáveisassociadasacadacondição.
•Distinguirentrediferentesgruposdecondições(comocompraevenda)pormeiodecoreseidentificadores.
31

--- PÁGINA 42 ---
Diferenciais do recurso
•Facilitaoentendimentodocomportamentodaautomaçãoduranteaexecução.
•Permiteidentificarrapidamentefalhaslógicasouinconsistênciasnascondições.
•Atuacomoumaferramentadedepuraçãovisualparaaprimoramentodasestratégias.
Para mais informações sobre a função XRay, consulte a seção 14.33 - Função XRay no capítulo Funções de
Back-testing .
10.11 Regras de Execução
As automações de estratégias funcionam com as mesmas regras que são utilizadas no backtest das estratégias de
execução. Paraentendermelhoroquecadafunçãofazrelacionadaàexecuçãodeordens,recomendamosprimeira-
mentealeituradaseção 14 - Funções de Back-Testing . Aquidetalhamosasregrasportrásdosmecanismosde
automaçãoparafacilitaroentendimentodousuárionahoradeimplementarumaestratégiadeexecuçãojápensando
nasuaautomação.
Reprocessamento do candle em aumentos de posição
Casohouverexecuçãodealgumaordem(aumentodeposição),ocódigoéreprocessadoparaacriaçãodeeventuais
ordensdecoberturadaoperação(ordensToCover). Areexecuçãodaestratégiaparaposicionamentodeordensde
coberturaacontecequandoordensforemexecutadas,ouseja,podemocorrernomeiodeumcandleparanãodeixar
ousuárioexpostoariscosdomercado. Nessereprocessamento,pormaisqueocódigofaçaachamadadeordens
quepoderiamaumentaraexposição,essasordensnãosãoenviadas. Maisdetalhessobreordensdecoberturapodem
servistosaseguir.
Ordens para aumento de posição (Buy e Sell)
É possível enviar ordens Buy e Sell tanto quando você estiver comprado ou vendido, porém quando uma ordem
Buy for enviada enquanto você estiver em uma posição vendida, ela será tratada como uma ordem de cobertura
automaticamente. Omesmo aconteceparauma ordemSell, quando vocêestiverumaposição comprada, elaserá
tratadacomoumaordemdecobertura. Casocontrário,elasapenasaumentaramasuaposiçãoatéolimitedefinido
naconfiguraçãodaestratégia.
Ordensconflitantessãoautomaticamentegerenciadaspeloautomatizador,ouseja,quandoforenviadaumaordem
BuyToCoverevocêestiveremumaposiçãocompradaouzerada,elaseráignorada,damesmamaneiraseforenviada
umaordemSellToCoverevocêestiveremumaposiçãovendidaouzerada,elatambémseráignorada.
Ordens de cobertura de posição (BuyToCover e SellToCover)
Ordensdecobertura,ouordensToCover. nuncairãoinverterasuaposição;elasgarantemqueaordemcontráriavai
respeitarsempreaposiçãodaoperação. Recomendamosqueoprogramadorutilizesempreordensdesaídadeposição
comoordensToCoverexplicitamentenocódigoparagarantirqueooperacionalqueousuárioestáprogramandoestá
correto. Paraisso,asordensToCoversãosempreenviadascomoordensOCO,logovocênãoprecisasepreocupar
emgerenciarecancelareventuaisordensdecoberturaquepoderiamficarabertasapósaexecuçãodeapenasuma
daspernasdesaída.
Ordensdecoberturasãoenviadasouatualizadasatodamudançadecandle,cabeaousuáriogerenciaraquantidade
decadaordemcasovocêestejaposicionadoemmaisdeumloteparacobrircorretamenteaexposiçãoaomercado. Na
finalizaçãodocandle,casoocódigoindiqueumenviodeummesmonúmerodeordensdecobertura,serárealizada
uma edição da OCO para os novos valores de preço correspondentes. Por outro lado, caso o envio aumente ou
diminuaonúmerodeordensparaaquelecandle,aOCOabertaserácancelada,eseráenviadaumanovaOCOcom
assaídasdefinidaspelocódigo.
Ordens OCO
Casoo usuário configureuma ordemOCO pela configuraçãoda automação, as ordensde coberturadefinidas pela
estratégiaserãodesconsideradas,jáquetodasordensjávãopossuiressacoberturanaturaldaordemOCO.
32

--- PÁGINA 43 ---
Indicadores que atualizam valores anteriores
Se forem utilizados indicadores que alterem seus valores em candles antigos (candles já finalizados), o valor do
indicadorqueseráconsideradoseráodomomentoemqueocandlefinalizar,dessemodocasonãohouveraentrada
da execuçãona virada do candle, não será feito envio de ordens paraaquele candle no futuro, mesmo que algum
indicador altere seu valor no passado e troque a decisão de envio de ordem. Alguns exemplos de indicadoresque
podemcausaressecomportamentosãoindicadoresquetemapenasumvalordurantetododia,porexemplo: Preço
Ask e Bidetambémindicadoresquedecidemapenasdepoisdealgunscandles,comoporexemploo Detector de
topos e fundos oualinhaChikouSpan(2)doindicador IchimokuCloud ,entreoutros.
Cálculo Automático do Preço Limite (a partir do Preço Stop)
ANTSLpossuisuporteparaocálculoautomáticodo preço limite emordensdotipo Stop,quandoessevalornãoé
explicitamentedefinidonocódigo. Essemecanismogarantequeasordenssejamenviadascomparâmetrosválidos
eaceitospelabolsaoucorretora,prevenindorejeiçõesporultrapassaremasbandasdepreçopermitidas.
Esseprocessodefineadiferençamáximaentreopreço stopeopreço limite,combasenascaracterísticasdoativo
enasregrasdoambientedenegociação. Asregrasaplicadassãoasseguintes:
•Ativos com valor mínimo de tick configurado (variaçãomínimapermitidaentreofertas):
–Criptomoedas : diferençaiguala 1 tick.
–Contratos ISDI1 (ex.: swaps,compromissadasdeíndice): diferençaiguala 7 ticks.
–Opções: diferençaiguala 20 ticks.
–Contratos futuros da BMF :
*Criptoativos : diferençaiguala 100 ticks.
*Demais contratos futuros da BMF :diferençaiguala 30 ticks.
•Ações negociadas na B3 (mercado Bovespa) : limitede 15% sobre o preço de referência ,respeitando
amargemoperacionaldentrodolimitede 20%estabelecidopelabolsa.
•Ativos operados por integração externa : limitede 1% sobre o preço .
•Demais ativos não contemplados pelas regras anteriores : limitede 5% sobre o preço .
Casooativo não possua tick mínimo configurado (ouseja,ovalorsejaigualazero),seráaplicadoautomatica-
menteum valor padrão de 1% sobre o preço de referência comofallbackdesegurança.
Essecomportamentoasseguraque,mesmonaausênciadeumvalordelimiteexplicitamentedefinidonaordem,o
sistemautilizaráparâmetroscompatíveiscomosrequisitosoperacionaisdomercado,garantindooenviobem-sucedido
daordem.
33

--- PÁGINA 44 ---
11Estratégias
11.1 Abrir Estratégias
Naopçãode”AbrirEstratégias”,ousuárioteráacessoatrêsabas,elassão:
•Todas:Ousuáriopoderávertodasasestratégiasdentrodosuaplataforma;
•Minhas Estratégias: Ousuárioiráfiltrarparasomenteexibirtodasasestratégiascriadasporeledentroda
plataforma;
•Exemplos: Ousuárioiráfiltrarparaexibirexemplosdeestratégiasquejávemcomopadrãonaplataforma.
Alémdasabas,ousuáriotambémpoderápré-visualizaroseucódigodeestratégiaparaconfirmarinformações.
11.2 Central de Estratégias
Na aba Minhas Estratégias, localizada na Central de Estratégias, o usuário pode visualizar e gerenciar todas as es-
tratégiascriadas.
Paraeditarumaestratégia,bastaclicarnobotão”Editar”localizadoaoladodireitodalinhacorrespondenteàestraté-
gia. Aoclicarnessebotão,aestratégiaseráabertaautomaticamentenoEditordeEstratégiasparaedição.
Alémdisso,épossívelacessaroutrasopçõesdegerenciamentoatravésdomenudecontexto. Paraabriressemenu,
ousuáriodeve: clicarcomobotãodireitodomousesobreaestratégiadesejada,ouclicarnoíconedetrêspontos
(...) localizadoaofinaldalinhadaestratégia.
Asopçõesdisponíveisnomenudecontextoincluem:
•Abrir no editor: carregaaestratégianoEditordeEstratégias.
•Compartilhar Estratégia: permitecompartilharcomoutrosusuários.
•Anunciar Estratégia: publicaaestratégianalojadaplataforma.
•Renomear Estratégia: alteraonomedaestratégia.
•Excluir Estratégia: removeaestratégiadeformapermanente.
Essasfuncionalidadestornamagestãodasestratégiasmaisacessíveleorganizada.
34

--- PÁGINA 45 ---
11.3 Exportar / Importar Estratégias
Nesta funcionalidade, permite ao usuário exportar as estratégias criadas por eles para que possam ser importadas
novamente.
Ousuáriotambémtemapossibilidadedequererexportarocódigofontedaestratégiaouapenasoarquivoexecutável.
Naimportação,ousuáriotemafuncionalidadedeescolherquaisestratégiasserãocarregadaseadicionadasjuntoà
suaplataformaNelogica.
35

--- PÁGINA 46 ---
11.4 Screening
AfuncionalidadedeScreeningmostra,deformavisual,osativosqueseencontramnabasededadosequesatisfazem
ascondiçõesdaestratégia.
Nofiltro,aoclicarnobotão”+”,serácriadaumacondiçãoparaque,seCondição1eCondição2sejamverdadeiras,
irámostraroativodentrodaabaselecionada.
Caso o usuário deseje utilizar outras informações, ele irá poder clicar no botão ”Mais” que se encontra ao lado da
variávelparaselecionaroutrascondições.
Aoclicarnobotão”Aplicar”aestratégiacriadaéaplicadaàlistaeirámostrarosativosquesatisfazemacondição.
36

--- PÁGINA 47 ---
11.5 Inserir Regra de Coloração
Afuncionalidadedeinserirregradecoloraçãopermiteaousuáriocolorirográficodeacordocomoeledeterminouos
parâmetrosnosgráficosdosativos.
Asregrasdecoloraçãoserãofeitasseguindoaideologiadeumindicadorouseja,respeitandoolayoutatualdajanela.
11.6 Editor de Estratégias
AjaneladeEditordeestratégiaséondeousuáriopoderácriarsuasprópriasestratégias,juntamentecomafuncional-
idadedevisualizardiretamentenográficoaestratégiacriada.
OEditordeEstratégiaspossuitrêsabas:
•Editor: OndeousuárioescreveaestratégiaseguindoasinstruçõesdalinguagemNTSL.
37

--- PÁGINA 48 ---
•Gráfico: Ondeousuáriovisualizaaestratégiaapósexecutadadiretamentenográfico;
•Misto: ÉondeousuáriovisualizaasinformaçõesdaabaEditoreaabaGráficoemumasó,ondeacadavez
queeleexecuteocódigo,jáiráaparecerdiretamentenográfico.
•Desempenho : Aoexecutarumaestratégiadeexecuçãopeloeditor,ousuáriopoderávisualizarodesempenho
dorelatóriodeperformance.
•Backtest: OndeousuáriopodeescolherentremododeexecuçãoOHLCouTickaTickevisualizaraestratégia
apósexecutadanográfico.
DentrodoEditordeestratégiasousuárioirápossuirasseguintesopções:
•Nova Estratégia: Ondeousuárioirápodercriarumanovaestratégia;
•Abrir Estratégia: Permiteaousuárioabrirestratégiasjácriadaseedita-las
•Fechar:Fechaaabadaestratégiaatual;
•Salvar:Salvaaestratégiaatual;
•Salvar Como: Salvaaestratégiaatual,podendoseradicionadoumadescriçãodamesma;
•Importar/Exportar : Abreajaneladeimportareexportarestratégia;
•Verificar Sintaxe: Realiza a leitura do código verificando se há erros e a transforma em uma estratégia
executável;
•Próximo:Mostrapasso-a-passooqueocódigodaestratégiaestárealizandoemostrandoosvaloresnaquele
momento;
•Entrar:SemelhanteaoTrace,mostrapassoapassooqueaestratégiaestárealizandonomomentodecriação,
porém,quandoháfunçõesnocódigoeleiráabriafunçãoparamostraraousuárioqueafunçãoestáexecutando;
•Executar:Apósapertarobotão”Compilar”, obotãoexecutariráexecutaraestratégiacriadaeamostrano
gráfico;
•Parar:Temcomofuncionalidadepararaestratégiaparaqueousuáriopareaexecuçãodaestratégiacriada;
•Formatação automática: Executaaformataçãoautomáticadocódigo;
38

--- PÁGINA 49 ---
•Aumentar base: Expandeabasedoativoparaaexecuçãodaestratégia;
•Automatizar estratégia: Criaumanovaautomaçãocomaestratégiaselecionadanoeditor;
•Otimizar estratégia: Abreaotimizaçãodeparâmetroscomaestratégiaselecionadonoeditor;
•Propriedades: Temcomofuncionalidademostraraspropriedadesqueirãoconstituiraestratégia,comode-
senhonográfico,linhasguiaseescala;
11.7 Propriedades do Editor de Estratégias
NaspropriedadesdoEditordeestratégias,ousuárioirápoderutilizarvaloreseinformaçõesadicionaisnomomento
decriaçãodaestratégia:
•Parâmetros: Permite ao usuário utilizar estratégias já criadas como parâmetros para uma nova estratégia
juntocomovalordesejadoparaamesma;
•Aparência: Permiteaousuáriodeterminarsedesejaqueaestratégiasejamostradaemlinhaouemhistograma;
•Linhas Guia: Permiteaousuáriocriarlinhasparasebasearcomoexemplosdelinhadesuporteeresistência;
•Preenchimento: Configuraçãoparavisualizarumpreenchimentoentreaslinhas.
11.8 Nova Estratégia
AoclicarnobotãodeNovaEstratégia,ousuáriopoderáescolherentreasopçõesabaixo:
•Em branco (Texto): Aoescolherdestamaneira,ousuárioiracriarumaestratégiaembranco;
•Indicador: Aoabriraestratégia,irácarregarumexemplodeestratégiadeindicadorparaousuário;
•Coloração: Aoabriraestratégia,irácarregarumexemploderegradecoloraçãoparaousuário;
•Execução: Serácriadoumexemplo,comumafunçãoparaestratégiadeexecução;
•Texto:Aoabriraestratégia,irácarregarumexemplodeestratégiadetexto;
•Screening: SeráinseridoumexemploparaacriaçãodeumfiltroparaoScreening;
39

--- PÁGINA 50 ---
•Alarme:Serácriadoumexemplo,comafunçãoAlert.
11.9 Termômetro de Estratégia
OTermômetro de Estratégia éumaferramentaquepermitemonitorar,deformaconsolidada,ocomportamentode
múltiplasestratégiasdeexecuçãoconfiguradasnográfico. Eleapresenta,emtemporeal,quantasdessasestratégias
estãocompradas, vendidasousemposição, proporcionandoumaleiturarápidaeclaradatendênciapredominante
entreelas.
Essavisãoconsolidadaéespecialmenteútilparaacompanharocomportamentocoletivodasestratégias,sejadurante
opregãoouemsimulações.
Observação: EstaferramentaestádisponívelapenasparausuáriosquepossuemomódulodeAutomaçãoPremium
ousuperior.
40

--- PÁGINA 51 ---
Principais Funcionalidades
•Configuração de múltiplas estratégias: Adicioneváriasestratégiasdeexecuçãoaotermômetro,cadauma
comseusprópriosparâmetrosemultiplicadores.
•Ajuste de parâmetros: Modifiqueparâmetrosdecadaestratégiadiretamentenajaneladeconfiguração.
•Criação e salvamento de perfis: Salvediferentesconfiguraçõesdetermômetrosparausoposterior.
•Leitura visual consolidada: Visualizerapidamenteobalançoentreestratégiascompradas,vendidaseneu-
tras.
Acessando o Termômetro
OTermômetropodeserabertodeduasformas:
1.Pelocabeçalhodográfico,clicandonoíconedotermômetro.
2.Pelomenudecontextodográfico,acessandooitemTermômetrodeEstratégias.
Adicionando Estratégias ao Termômetro
1.ComoTermômetrohabilitado,cliquesobrea barra lateral direita do gráfico ondeeleéexibido.
2.Najaneladeconfiguraçãoqueseráaberta:
•Escolhaasestratégiasdeexecuçãodesejadas.
•Ajusteseusparâmetrosemultiplicadores.
•Salveaconfiguraçãocasoqueirareutilizá-lanofuturo.
41

--- PÁGINA 52 ---
42

--- PÁGINA 53 ---
12Block Builder
OBlock Builder éumaferramentavisualquepermitecriarestratégiaspersonalizadasdeformaintuitiva,semane-
cessidadedeescrevercódigo. Utilizandoblocospré-configurados,ousuáriopodedesenvolverregrasparacoloração,
alarmes,execuçãoautomáticaeoutrasfuncionalidades,comreduçãodeerrosemaioragilidadenoprocesso.
12.1 Tipos de Estratégias Suportadas
OBlockBuilderpermiteacriaçãodosseguintestiposdeestratégias:
•Estratégias de Indicadores : paraanálisetécnicapersonalizada.
•Regras de Coloração : paradestacarcondiçõesespecíficasnográfico.
•Estratégias de Execução : paraautomatizaroperações(BacktesteAutomação).
•Estratégias de Alarmes : paraalertaspersonalizados.
•Estratégias de Seleção (Screening) : parafiltrarativoscombaseemcritériosdefinidos.
12.2 Criando uma Estratégia
AcriaçãodeumanovaestratégianoBlockBuilderenvolvebasicamentetrêsetapas: definircondições,configuraros
resultadosesperadosesalvaraestratégia.
1.Definir Condições : Na aba lateral esquerda, arraste os blocos desejados para o espaço de trabalho. Em
seguida, cliquenoíconedelápisparaconfigurarosparâmetrosdacondição. Ostiposdevaloresquepodem
serutilizadosincluem:
•Numérico: valoresinteirosoudecimaisdefinidospelousuário.
•Cotação: valoresdemercadocomoAbertura,Máxima,Mínima,FechamentoeQuantidade.
•Indicador: valoresderivadosdeindicadorescriadospeloprópriousuário,comparâmetroscustomizáveis.
43

--- PÁGINA 54 ---
•Cotações Anteriores : permiteusardadosdecandlesanteriorespormeiodaguiaVariáveisesériesde
dados.
2.Adicionar Condições : Utilize o botão ”+” para inserir novas condições. É possível combinar as condições
utilizandooperadoreslógicos EeOU,permitindomaiorflexibilidadenadefiniçãodasregras.
3.Definir Resultados : Acesseaaba Resultadoearrasteafunçãodesejadaparaocampocorrespondente. Por
exemplo,emumaregradecoloração,vocêpodedefinirumacoraseraplicadaaocandlequandoascondições
forematendidas.
4.Adicionar Novas Condições com Resultados Diferentes : Para criar novas regras com ações distintas,
cliqueem Adicione à estratégia erepitaoprocessoconformenecessário.
5.Salvar Estratégia : Após definir todas as condições e resultados, clique em Criar estratégia , atribua um
nomeàmesmaesalve.
12.3 Aplicando a Estratégia no Gráfico
Paraaplicarumaregradecoloraçãocriadanográfico:
1.Cliquecomobotãodireitodomousenofundodajanelagráfica.
2.Selecioneaopção Inserir Regra de Coloração .
3.Pesquisepelonomedaestratégiasalvaeselecione-a.
12.4 Exemplo Prático
Suponha que você deseje pintar o candle atual de marrom quando o seu fechamento for maior que a máxima do
candleanterior:
•Condição: Fechamentoatual >Máximadocandleanterior(comdeslocamento=1).
•Resultado: Aplicarcormarromaocandleatual.
Essaconfiguraçãopermitedestacarvisualmenteoscandlesqueatendemaocritérioespecificado,facilitandoaanálise
visualnográfico.
44

--- PÁGINA 55 ---
45

--- PÁGINA 56 ---
13Funções de Alarme
13.1 Função Alert
Disponível em todas versões.
Afunção Alert ()temcomofinalidadegerarumalarmeaousuário.
Sintaxe:
Função Alert (Color: Integer ):Void ;
Parâmetros:
Color: Integer ;Determinaacordesejadaparaopopupdenotificação,nomomentodeexecuçãodoalarme.
Exemplo de uso:
Noexemploabaixo,afunção Alert ()iráemitirumalarme(eumpopupcomcoloraçãovermelha)casoamédia
móvelaritméticade 9períodosformenorqueamédiade 21.
1
2
3
4begin
if(Media (9,Close) < Media (21,Close)) then
Alert (clRed);
end;
Exemplo Gráfico:
46

--- PÁGINA 57 ---
14Funções de Back-Testing
14.1 Função BuyAtMarket
Disponível em todas versões.
Afunção BuyAtMarket ()temcomofuncionalidaderealizarumaordemdecompraamercado.
Seoparâmetrodequantidadenãoforespecificado,aordemusaráovalordefinidonocampo”Quantidade”daaba
deExecuçãodoeditordeestratégias,comomínimosendo1lote.
Naautomação,seráconsideradaaquantidadeconfiguradanocampo”QuantidadeporOrdem”. Quandooparâmetro
é especificado, a estratégia ignora essas configurações e utiliza a quantidade informada no código, que deve ser
múltipladolotedoativo.
Sintaxe:
Função BuyAtMarket (Quantity: Float ):Void ;
Parâmetros:
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso
Noexemplo,casoamínimadocandleatualforigualadocandleanterior,serárealizadaumasimulaçãodeordem
amercado.
1
2
3
4begin
if(Low = Low[ 1])then
BuyAtMarket ;
end;
Exemplo Gráfico:
47

--- PÁGINA 58 ---
14.2 Função BuyLimit
Disponível em todas versões.
Afunção BuyLimit ()possuicomofinalidadeenviarumaordemdecompradotipolimite. Seaquantidadenãofor
especificada,seráusadaadefinidanaabadeExecuçãodoeditordeestratégias,commínimode1lote.
Emautomações,utiliza-seaquantidadedocampo“QuantidadeporOrdem”. Quandoaquantidadeéespecificadano
código,elaignoraasconfiguraçõespadrãoedevesermúltipladolotedoativo.
Sintaxe:
Função BuyLimit (Limit: Float ; Quantity: Float ):Void ;
Parâmetros:
Limit: Float ;Determinaopreçolimiteparainserçãodeordem.
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
Noexemplo,casocasonãotenhanenhumaposiçãoaberta,seráenviadaumaordemdecompradotipolimite.
1
2
3
4begin
ifnot HasPosition then
BuyLimit (close,lote);
end;
Exemplo Gráfico:
48

--- PÁGINA 59 ---
14.3 Função BuyPosition
Disponível em todas versões.
Afunção BuyPosition ()retornaotamanhodaposiçãoemlotedacompra.
Sintaxe:
Função BuyPosition (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,serárealizadaasimulaçãodeumaordemdecompracasoamínimadocandleatualforigualado
candleanterior,entãoavariável buyPosiráreceberototaldaposiçãodecompra.
1
2
3
4
5
6
7
8var
buyPos : Integer ;
begin
buyPos := BuyPosition ;
if(Low = Low[ 1])then
BuyAtMarket ;
Plot (buyPos);
end;
Exemplo Gráfico:
49

--- PÁGINA 60 ---
14.4 Função BuyPositionQty
Disponível em todas versões.
Afunção BuyPositionQty ()retornaotamanhodaposiçãoemquantidadedacompra.
Sintaxe:
Função BuyPositionQty (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,serárealizadaasimulaçãodeumaordemdecompracasoofechamentodocandleatualformenor
aodocandleanterior,entãoavariável buyPosiráreceberotamanhodaposiçãoemquantidadedecompra.
1
2
3
4
5
6
7
8var
buyPos : Float ;
begin
buyPos := BuyPositionQty ;
if(Close > Close[ 1])then
BuyAtMarket ;
Plot (BuyPositionQty );
end;
Exemplo Gráfico:
50

--- PÁGINA 61 ---
14.5 Função BuyPrice
Disponível em todas versões.
Afunção BuyPrice ()retornaopreçodecompradaposição.
Sintaxe:
Função BuyPrice (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,serárealizadaasimulaçãodeumaordemdecompracasoamínimadocandleatualforigualado
candleanterior,entãoseráatribuídoàvariável pCompraovalordecompradaposição.
1
2
3
4
5
6
7
8var
pCompra : Float ;
begin
pCompra := BuyPrice ;
if(Low = Low[ 1])then
BuyAtMarket ();
Plot (BuyPrice );
end;
Exemplo Gráfico:
51

--- PÁGINA 62 ---
14.6 Função BuyStop
Disponível em todas versões.
Apartirdafunção BuyStop ()permitecriarumaordemdotipoStop,ondeopreçostopdefineogatilhoeolimite
determinaatéquepreçoaordempodeserexecutada. Seaquantidadenãoforespecificada,seráusadaadocampo
QuantidadenaabadeExecução(mínimode1lote).
Em automações, é usada a quantidade do campo ”Quantidade por Ordem”. Quando a quantidade é informada no
código,elaignoraasconfiguraçõespadrãoedevesermúltipladolotedoativo.
Sintaxe:
Função BuyStop (Stop : Float ; Limit: Float ; Quantity: Float ):Void ;
Parâmetros:
Stop: Float ;ValordotipoFloatqueseráogatilhodaordem.
Limit: Float [Opcional] ;ValordotipoFloatqueseráolimitedepreçoaceitoparaexecução.
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
No exemplo, caso a mínima do candle atual seja diferente a do candle anterior, será inserida uma ordem de
compratipostop,nonívelespecificadonavariável pStop.
1
2
3
4
5
6
7input
pStop( 133000 );
lote( 1);
begin
if(Low <> Low[ 1])then
BuyStop (pStop,pStop,lote);
end;
52

--- PÁGINA 63 ---
Exemplo Gráfico:
53

--- PÁGINA 64 ---
14.7 Função BuyToCoverAtMarket
Disponível em todas versões.
Afunção BuyToCoverAtMarket ()enviaumaordemdecompracasoexistaumaposiçãovendidaemaberto. Sea
quantidadenãoforespecificada,seráusadaadefinidanaabadeExecução,commínimode1lote. Naautomação,
utiliza-seaquantidadedocampo”QuantidadeporOrdem”.
Seaquantidadeforespecificadanocódigo,elaprevalecesobreasconfiguraçõesedevesermúltipladolotedoativo.
Sintaxe:
Função BuyToCoverAtMarket (Quantity: Float ):Void ;
Parâmetros:
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
Noexemploabaixo,casoamínimaatualsejamaiorqueamínimaanterioreexistaumaposiçãodevenda,será
executadaumaordemamercado,utilizandoafunção BuyToCoverAtMarket ()parafecharaoperação.
1
2
3
4
5begin
SellShortAtMarket ;
if((Low > Low[ 1])and (IsSold ))then
BuyToCoverAtMarket ;
end;
Exemplo Gráfico:
54

--- PÁGINA 65 ---
14.8 Função BuyToCoverLimit
Disponível em todas versões.
Afunção BuyToCoverLimit ()enviaumaordemdecompralimiteparafinalizaraoperação. Seaquantidadenão
forespecificada, seráusadaaconfiguradanaabadeExecução, commínimode1lote. Naautomação, utiliza-sea
quantidadedocampo”QuantidadeporOrdem”.
Seespecificadanocódigo,aquantidadedevesermúltipladolotedoativoeprevalecesobreasconfigurações.
Sintaxe:
Função BuyToCoverLimit (Limit: Float ; Quantity: Float ):Void ;
Parâmetros:
Limit: Float ;ValordotipoFloatqueseráolimitedepreçoaceitoparaexecução.
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
No exemplo, caso exista uma posição de venda, será inserida a ordem no preço de fechamento para zerar a
posição.
1
2
3
4
5
6begin
SellShortAtMarket ;
if(IsSold )then
BuyToCoverLimit (Close,lote);
end;
Exemplo Gráfico:
55

--- PÁGINA 66 ---
14.9 Função BuyToCoverStop
Disponível em todas versões.
Afunção BuyToCoverStop ()enviaumaordemdecompradotipoStopsehouverumaposiçãodevendanoativo.
Se a quantidade não for especificada, será usada a configurada na aba de Execução, com mínimo de 1 lote. Na
automação,utiliza-seaquantidadedocampo”QuantidadeporOrdem”.
Seespecificadanocódigo,aquantidadedevesermúltipladolotedoativoeprevalecesobreasconfigurações.
Sintaxe:
Função BuyToCoverStop (Stop : Float ; Limit: Float ; Quantity: Float ):Void ;
Parâmetros:
Stop: Float ;ValordotipoFloatqueseráogatilhodaordem.
Limit: Float [Optional] ;ValordotipoFloatqueseráolimitedepreçoaceitoparaexecução.
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
Noexemplo,casoamínimadocandleatualforigualadocandleanterioreexistaumaposiçãodevenda,será
inseridaumaordemdecompratipostop,nopreçoarmazenadonavariável pStop.
1
2
3
4
5
6
7input
pstop( 132000 );
begin
SellShortAtMarket ;
if(Low = Low[ 1])and (IsSold )then
BuyToCoverStop (pStop, pStop);
end;
56

--- PÁGINA 67 ---
Exemplo Gráfico:
57

--- PÁGINA 68 ---
14.10 Função CancelPendingOrders
Disponível em todas versões.
A função CancelPendingOrders ()possui como recurso efetuar o cancelamento de todas ordens enviadas até o
momentodesuachamada,nofluxoatualdeexecução,easordensabertas.
Sintaxe:
Função CancelPendingOrders (): Void ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso a mínima do candle atual for igual a do candle anterior e exista uma posição de venda,
será inserida uma ordem de compra tipo stop, no preço armazenado na variável pStop, caso existam ordens
pendentes,ocorreráocancelamentoenãoseráplotadonadanográfico.
1
2
3
4
5
6
7
8
9input
pstop( 132000 );
begin
SellShortAtMarket ;
if(Low = Low[ 1])and (IsSold )then
BuyToCoverStop (pStop, pstop);
if(HasPendingOrders )then
CancelPendingOrders ;
end;
Exemplo Gráfico:
58

--- PÁGINA 69 ---
14.11 Função ClosePosition
Disponível em todas versões.
Afunção ClosePosition ()enviaordensparaencerraraposição. Estafunçãocancelatodasordensenviadasatéo
momentodesuachamada,nofluxoatualdeexecução,easordensabertas. Apósconfirmaçãodocancelamentodas
ordens,seráenviadaumaordemparafecharaposição.
Sintaxe:
Função ClosePosition (): Void ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,casoamínimadocandleatualsejaigualadocandleanteriorserárealizadaasimulaçãode
umaordemdecompraeentãoaposiçãoseráfinalizada.
1
2
3
4
5
6begin
if(Low = Low[ 1])then
BuyAtMarket ;
ifHasPosition then
closeposition ;
end;
Exemplo Gráfico:
59

--- PÁGINA 70 ---
14.12 Função DailyResult
Disponível em todas versões.
A partir da função DailyResult ()pode-se verificar o resultado diário das operações. O parâmetro OpenResult é
opcional,ovalordefaultéverdadeiro.
Sintaxe:
Função DailyResult (OpenResult: Boolean ):Float ;
Parâmetros:
OpenResult: Boolean [Opcional] ;Sedeveretornaroresultadoaberto:
–Verdadeiro: Retornaoresultadofechado+aberto;
–Falso:Retornaapenasoresultadofechado;
Exemplo de uso:
Noexemplo,seráoretornadoresultadofechado+abertodasoperaçõesdodia.
1
2
3
4
5
6
7
8var
dResult : Float ;
begin
ifnot HasPosition then
BuyAtMarket ;
dResult := DailyResult (True );
Plot (dResult);
end;
Exemplo Gráfico:
60

--- PÁGINA 71 ---
14.13 Função HasPendingOrders
Disponível em todas versões.
Afunção HasPendingOrders ()retornaseháordenspendentes.
Sintaxe:
Função HasPendingOrders (): Boolean ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso a mínima do candle atual for igual a do candle anterior e exista uma posição de venda,
seráinseridaumaordemdecompratipostop,nopreçoarmazenadonavariável pStop,ecasoexistamordens
pendentes,seráplotadoa MedianPrice ()nográfico.
1
2
3
4
5
6
7
8
9input
pstop( 132000 );
begin
SellShortAtMarket ;
if(Low = Low[ 1])and (IsSold )then
BuyToCoverStop (pStop,pstop);
if(HasPendingOrders )then
Plot (MedianPrice );
end;
Exemplo Gráfico:
61

--- PÁGINA 72 ---
14.14 Função HasPosition
Disponível em todas versões.
Afunção HasPosition ()retornaverdadeiroseaposiçãonãoézero.
Sintaxe:
Função HasPosition (): Boolean ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,ocorreráasimulaçaodeumaordemamercadousandoafunção HasPosition ()paravalidarse
háposiçãoounãoe,casoexistaposição,ocorreráoplotde BuyPrice ()nográfico.
1
2
3
4
5begin
BuyAtMarket ;
ifHasPosition then
Plot (BuyPrice );
end;
Exemplo Gráfico:
62

--- PÁGINA 73 ---
14.15 Função IsBought
Disponível em todas versões.
Afunção IsBought ()temcomofuncionalidadedeterminarseháumaposiçãodecompraemaberto.
Sintaxe:
Função IsBought (): Boolean ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,casoexistaumaposiçãodecompra,haveráaaplicaçãodeumacoloração(verde).
1
2
3
4
5begin
BuyAtMarket ;
if(IsBought )then
PaintBar (clGreen );
end;
Exemplo Gráfico:
63

--- PÁGINA 74 ---
14.16 Função IsSold
Disponível em todas versões.
Afunção IsSold ()temcomofuncionalidadedeterminarseháumaposiçãodevendaemaberto.
Sintaxe:
Função IsSold (): Boolean ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,casoexistaumaposiçãodevenda,haveráaaplicaçãodeumacoloração(vermelho).
1
2
3
4
5begin
SellShortAtMarket ;
if(IsSold )then
PaintBar (clRed );
end;
Exemplo Gráfico:
64

--- PÁGINA 75 ---
14.17 Função MyPrice
Disponível em todas versões.
Afunção MyPrice ()retornaamédiaentreamáxima,mínimaefechamento.
Sintaxe:
Função MyPrice (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável mPrice,ovalordafunção MyPrice (),serásimuladaumaordemdecompra
amercadoeentãooplotdafunçãonográfico.
1
2
3
4
5
6
7
8var
mPrice : Float ;
begin
mPrice := MyPrice ;
BuyAtMarket ;
if(IsBought )then
Plot (mPrice);
end;
Exemplo Gráfico:
65

--- PÁGINA 76 ---
14.18 Função Position
Disponível em todas versões.
Afunção Position ()retornaotamanhodaposiçãoemlote,positivoparacompraenegativoparavenda.
Sintaxe:
Função Position (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável vPosition,aposição,eserásimuladaumaordemdecompraamercado
eentãooplotdafunçãonográfico.
1
2
3
4
5
6
7
8var
vPosition : Integer ;
begin
vPosition := Position ;
BuyAtMarket ;
if(IsBought )then
Plot (vPosition);
end;
Exemplo Gráfico:
66

--- PÁGINA 77 ---
14.19 Função PositionQty
Disponível em todas versões.
Afunção PositionQty ()retornaotamanhodaposiçãoemquantidade,positivoparacompraenegativoparavenda.
Sintaxe:
Função PositionQty (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável vPosition,aposição,eserásimuladaumaordemdecompraamercado
eentãooplotdafunçãonográfico.
1
2
3
4
5
6
7
8var
vPosition : Float ;
begin
vPosition := PositionQty ;
BuyAtMarket ;
if(IsBought )then
Plot (vPosition);
end;
Exemplo Gráfico:
67

--- PÁGINA 78 ---
14.20 Função Price
Disponível em todas versões.
Afunção Price ()retornaopreçodecompraouvendadaposição,dependendoseestivercompradoouvendido.
Sintaxe:
Função Price (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável vPrice,ovalordafunção Price (),serásimuladaumaordemdecompra
amercadoeentãooplotdafunçãonográfico.
1
2
3
4
5
6
7
8var
vPrice : Float ;
begin
vPrice := Price ;
BuyAtMarket ;
if(IsBought )then
Plot (vPrice);
end;
Exemplo Gráfico:
68

--- PÁGINA 79 ---
14.21 Função ReversePosition
Disponível em todas versões.
A função ReversePosition ()tem como funcionalidade realizar o envio de ordens, a fim de inversão da posição.
Estafunçãocancelatodasordensenviadasatéomomentodesuachamada,nofluxoatualdeexecução,easordens
abertas. Apósconfirmaçãodocancelamentodasordens,seráenviadaumaordemparareverteraposição.
Sintaxe:
Função ReversePosition (): Void ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,casoamínimadocandleatualformenoradocandleanterior,eexistaumaposiçãodecompra,será
realizadaareversão.
1
2
3
4
5begin
BuyAtMarket ;
if(Low < Low[ 1])and (IsBought =True )then
ReversePosition ;
end
Exemplo Gráfico:
69

--- PÁGINA 80 ---
14.22 Função SellPosition
Disponível em todas versões.
Afunção SellPosition ()retornaotamanhodaposiçãoemlotedevenda.
Sintaxe:
Função SellPosition (): Void ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,avariável sellPos,iráreceberaposiçãodevenda.
1
2
3
4
5
6
7var
sellPos : Integer ;
begin
SellShortAtMarket ;
sellPos := SellPosition ;
Plot (sellPos);
end;
Exemplo Gráfico:
70

--- PÁGINA 81 ---
14.23 Função SellPositionQty
Disponível em todas versões.
Afunção SellPositionQty ()retornaotamanhodaposiçãoemquantidadedevenda.
Sintaxe:
Função SellPositionQty (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,avariável sellPos,iráreceberototaldaposiçãodevenda.
1
2
3
4
5
6
7var
sellPos : Float ;
begin
SellShortAtMarket ;
sellPos := SellPositionQty ;
Plot (sellPos);
end;
Exemplo Gráfico:
71

--- PÁGINA 82 ---
14.24 Função SellPrice
Disponível em todas versões.
Afunção SellPrice ()retornaopreçodevendadaposição.
Sintaxe:
Função SellPrice (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável pVenda,ovalordevendadaposição,ocorreráumasimulaçãodevendae
oplotdafunçãonográfico.
1
2
3
4
5
6
7var
pVenda : Float ;
begin
SellShortAtMarket ;
pVenda := SellPrice ;
Plot (pVenda);
end;
Exemplo Gráfico:
72

--- PÁGINA 83 ---
14.25 Função SellShortAtMarket
Disponível em todas versões.
A função SellShortAtMarket ()envia uma ordem de venda a mercado. Se a quantidade não for especificada,
seráusadaadefinidanaabadeExecução,commínimode1lote. Naautomação,utiliza-seaquantidadedocampo
”QuantidadeporOrdem”.
Seespecificadanocódigo,essaquantidadedevesermúltipladolotedoativoeprevalecesobreasconfigurações.
Sintaxe:
Função SellShortAtMarket (Quantity: Float ):Void ;
Parâmetros:
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
Noexemploabaixo,seráexecutadaumaordemdevendaamercado,casoamínimadocandleatualsejaiguala
docandleanterior.
1
2
3
4begin
if(Low = Low[ 1])then
SellShortAtMarket ;
end;
Exemplo Gráfico:
73

--- PÁGINA 84 ---
14.26 Função SellShortLimit
Disponível em todas versões.
Descrição:
Afunção SellShortLimit ()enviaumaordemdevendalimite. Seaquantidadenãoforespecificada,seráusadaa
definidanaabadeExecução,commínimode1lote. Naautomação,utiliza-seaquantidadedocampo”Quantidade
porOrdem”
Seespecificadanocódigo,aquantidadedevesermúltipladolotedoativoeprevalecesobreasconfigurações.
Sintaxe:
Função SellShortLimit (Limit: Float ; Quantity: Float ):Void ;
Parâmetros:
Limit: Float ;Preçoparaainserçãodaordem.
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
Noexemploabaixo,seráexecutadaumaordemdevendaamercado,casoamínimadocandleatualsejaiguala
docandleanterior.
1
2
3
4begin
if(Low = Low[ 1])then
SellShortLimit (Close, lote);
end;
Exemplo Gráfico:
74

--- PÁGINA 85 ---
14.27 Função SellShortStop
Disponível em todas versões.
A função SellShortStop ()envia uma ordem de venda do tipo stop. Se a quantidade não for especificada, será
usada a definida na aba de Execução, com mínimo de 1 lote. Na automação, utiliza-se a quantidade do campo
”QuantidadeporOrdem”.
Seespecificadanocódigo,aquantidadedevesermúltipladolotedoativoeprevalecesobreasconfigurações.
Sintaxe:
Função SellShortStop (Stop: Float ; Limit: Float ; Quantity: Float ):Void ;
Parâmetros:
Stop: Float ;ValordotipoFloatqueseráogatilhodaordem;
Limit: Float [Opcional] ;ValordotipoFloatqueseráolimitedepreçoaceitoparaexecução.
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
Noexemplo,casoamáximaatualformaiordoqueaanterior,seráinseridaumaordemdevendastop,nopreço
armazenadonavariável pAux.
1
2
3
4
5
6input
pAux( 136000 );
begin
if(High > High[ 1])then
SellShortStop (pAux,pAux);
end
Exemplo Gráfico:
75

--- PÁGINA 86 ---
14.28 Função SellToCoverAtMarket
Disponível em todas versões.
Afunção SellToCoverAtMarket ()enviaumaordemdevendaamercadosehouverumaposiçãodecompra. Sea
quantidadenãoforespecificada,seráusadaadefinidanaabadeExecução,commínimode1lote. Naautomação,
utiliza-seaquantidadedocampo”QuantidadeporOrdem”.
Seespecificadanocódigo,aquantidadedevesermúltipladolotedoativoeprevalecesobreasconfigurações.
Sintaxe:
Função SellToCoverAtMarket (Quantity: Float ):Void ;
Parâmetros:
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
No exemplo abaixo, caso a máxima atual seja maior que a máxima anterior e exista uma posição de compra,
seráexecutadaumaordemamercado,parafecharaoperação.
1
2
3
4
5
6begin
ifnot HasPosition then
BuyAtMarket ;
if(High > High[ 1])and (Isbought )then
SellToCoverAtMarket ;
end;
Exemplo Gráfico:
76

--- PÁGINA 87 ---
14.29 Função SellToCoverLimit
Disponível em todas versões.
Afunção SellToCoverLimit ()enviaumaordemdevendalimiteparafinalizaraoperação. Seaquantidadenãofor
especificada,seráusadaadefinidanaabadeExecução,commínimode1lote. Naautomação,utiliza-seaquantidade
docampo”QuantidadeporOrdem”.
Seespecificadanocódigo,aquantidadedevesermúltipladolotedoativoeprevalecesobreasconfigurações.
Sintaxe:
Função SellToCoverAtLimit (Limit: Float ; Quantity: Float ):Void ;
Parâmetros:
Limit: Float ;Preçoparaainserçãodaordem.
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordemdecompra.
Exemplo de uso:
No exemplo, caso exista uma posição de compra, será inserida a ordem no preço de fechamento para zerar a
posição.
1
2
3
4
5
6begin
ifnot HasPosition then
BuyAtMarket ;
if(High > High[ 1])and (Isbought )then
SellToCoverLimit (Close);
end;
Exemplo Gráfico:
77

--- PÁGINA 88 ---
14.30 Função SellToCoverStop
Disponível em todas versões.
Afunção SellToCoverStop ()enviaumaordemstopdevendacasoexistaumaposiçãodecompra. Seaquantidade
nãoforespecificada,seráusadaadefinidanaabadeExecução,commínimode1lote. Naautomação,utiliza-sea
quantidadedocampo”QuantidadeporOrdem”.
Seespecificadanocódigo,aquantidadedevesermúltipladolotedoativoeprevalecesobreasconfigurações.
Sintaxe:
Função SellToCoverStop (Stop: Float ; Limit: Float ; Quantity: Float ):Void ;
Parâmetros:
Stop: Float ;ValordotipoFloatqueseráogatilhodaordem;
Limit: Float [Optional] ;Valorqueseráolimitedopreçoaceitoparaexecução.
Quantity: Float [Opcional] ;Determinaaquantidadeaserexecutadanaordem.
Exemplo de uso:
Noexemplo,casoamáximadocandleatualformaiorqueadocandleanterioreexistaumaposiçãodecompra,
seráinseridaumaordemdevendadotipostop,nopreçode pAux.
1
2
3
4
5
6
7
8input
pAux( 136000 );
begin
ifnot HasPosition then
BuyAtMarket ;
if(High > High[ 1])then
SellToCoverStop (pAux,pAux,lote);
end
78

--- PÁGINA 89 ---
Exemplo Gráfico:
79

--- PÁGINA 90 ---
14.31 Função SendOrder
Disponível em todas versões.
Apartirdafunção SendOrder ()pode-seenviarordenscustomizadas,determinandoolado,tipoequantidade.
Sintaxe:
Função SendOrder (Side: Integer ; Tipe: Integer ; Quantity: Float ; Limit: Float ; Stop
:Float ):Void ;
Parâmetros:
Side: Integer ;Determinaoladodaordem;
Type: Integer ;Tipodaordem;
Quantity: Float ;Determinaaquantidadeaserexecutadanaordem.
Limit: Float ;Quantidadedecontratos/lotes.
Stop: Float ;ValordotipoFloatqueseráogatilhodaordem;
Exemplo de uso:
No exemplo, será efetuada a inserção de uma ordem de compra, tipo Stop, no preço 30.45, com limite de
execuçãoatéonível 30.55.
1
2
3
4begin
ifnot HasPosition then
SendOrder (osBuy ,otStopLimit ,100,30.55 ,30.45 );
end;
Exemplo Gráfico:
80

--- PÁGINA 91 ---
14.32 Função OpenResult
Disponível em todas versões.
Apartirdafunção OpenResult ()pode-severificaroresultadodiáriodasoperaçõesemaberto.
Sintaxe:
Função OpenResult (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,seráoretornadoresultadoabertodasoperaçõesdodia.
1
2
3
4
5
6
7
8var
oResult : Float ;
begin
ifnot HasPosition then
BuyAtMarket ;
oResult := OpenResult ;
Plot (oResult);
end;
Exemplo Gráfico:
81

--- PÁGINA 92 ---
14.33 Função XRay
Disponível com o módulo Automações Premium ou superior.
Afunção XRay ()permiteomonitoramentoemtemporealdevariáveisecondiçõesdentrodeumaestratégiaautom-
atizada,exibindoessasinformaçõesnobotão Raio-XdoGerenciador de Automações .
Sintaxe:
Função XRay (strValue: String ; bValue: Boolean ; strGroup: String ; dValue: Float ;
ColorON: Integer ; ColorOF: Integer ):Void ;
Parâmetros:
strValue: String ;NomeidentificadordacondiçãoouvariávelqueseráexibidonopainelRaio-X;
bValue: Boolean ;Valorlógicoquerepresentaoestadoatualdacondição(verdadeirooufalso);
strGroup: String ;Defineonomeparaogrupoqueseráexibidonoraio-xduranteaexecução;
dValue: Float [Opcional] ;Defineovalordavariável;
colorON: Integer [Opcional] ;Corquandoacondiçãoforverdadeira;
colorOF: Integer [Opcional] ;Corquandoacondiçãoforfalsa;
Exemplo de uso:
Noexemplo,seráexibidoovaloremtemporealdaautomaçãoaoutilizarafunção XRay ().
1
2
3
4
5
6
7
8
9var
pBuy : Float ;
begin
pBuy := BuyPrice ;
if(Low <= Low[ 1])then
BuyAtMarket ();
Plot (BuyPrice );
XRay ("pBuy",(pBuy > 0),"Buy",pBuy);
end;
Exemplo Gráfico:
82

--- PÁGINA 93 ---
15Funções de Calendário
15.1 Função BarAnnualization
Disponível em todas versões.
Afunção BarAnnualization ()retornaofatordeanualização(raizquadrada)baseadonointervalodocandle(diário
=365,semanal=52,mensal=12).
Sintaxe:
Função BarAnnualization (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploabaixo,avariável tempiráreceberodadoderetornodafunção BarAnnualization ()dePETR4
diário.
1
2
3
4
5
6var
temp : Float ;
begin
temp := BarAnnualization ();
Plot (temp);
end;
Exemplo Gráfico:
83

--- PÁGINA 94 ---
15.2 Função BarDuration
Disponível em todas versões.
Afunção BarDuration ()retorna,emminutos,aduraçãodabarraatual.
Sintaxe:
Função BarDuration (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploabaixo,avariável tempiráreceberodadodafunção BarDuration ().
1
2
3
4
5
6var
temp : Integer ;
begin
temp := BarDuration ();
Plot (temp);
end;
Exemplo Gráfico:
84

--- PÁGINA 95 ---
15.3 Função BarDurationF
Disponível em todas versões.
Afunção BarDurationF ()retorna,emminutos,aduraçãodabarraatualcomvaloresnãointeiros.
Sintaxe:
Função BarDurationF (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploabaixo,avariável tempiráreceberodadodafunção BarDurationF ().
1
2
3
4
5
6var
temp : Float ;
begin
temp := BarDurationF ();
Plot (temp);
end;
Exemplo Gráfico:
85

--- PÁGINA 96 ---
15.4 Função Bartype
Disponível em todas versões.
Afunção Bartype ()retornaumcódigonuméricoreferenteaoperíodoutilizado.
Sintaxe:
Função Bartype (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,avariável numCodeiráreceberuminteiroreferenteaotempodeterminado.
1
2
3
4
5
6var
numCode : Integer ;
begin
numCode := Bartype ();
Plot (numCode);
end;
Exemplo Gráfico:
86

--- PÁGINA 97 ---
15.5 Função CalcDate
Disponível em todas versões.
Afunção CalcDate ()retornaumvaloroqualrepresentaumadatadeslocada,obtidaaoadicionarousubtrairdias
deumadatadereferência. Datassãorepresentadaspelotipodedado Integer,noformato: AnoMêsDia.
Sintaxe:
Função CalcDate (RefDate: Integer ; DaysChange: Integer ):Integer ;
Parâmetros:
RefDate: Integer ;Determinaadataqueseráutilizadacomobaseparaodeslocamento.
DaysChange: Integer ;Determinaquantosdiasserãoadicionadosousubtraídosdadatadereferência.
Exemplo de uso:
Noexemploabaixo,serávisualizada,graficamente,adataresultanteaosubtrair 14diasdadatade16/04/2025
(1250416).
1
2
3begin
Plot (CalcDate (1250416 ,‐14));
end;
Exemplo Gráfico:
87

--- PÁGINA 98 ---
15.6 Funcao CalcTime
Disponível em todas versões.
A função CalcTime ()retorna um valor o qual representa uma hora deslocada, obtida ao adicionar ou subtrair
minutos de uma hora de referência. Horas são representadas pelo tipo de dado Integer, no formato (24 horas):
HorasMinutos .
Sintaxe:
Função CalcTime (RefTime: Integer ; MinuteChange: Integer ):Integer ;
Parâmetros:
RefTime: Integer ;Determinaahoraqueseráutilizadacomobaseparaodeslocamento.
MinuteChange: Integer ;Determinaquantosminutosserãoadicionadosousubtraídosdahoradereferência.
Exemplo de uso:
Noexemploabaixo,serávisualizada,graficamente,ahoraresultanteaodeslocar 65minutosapartirdas 9h.
1
2
3begin
Plot (CalcTime (900,65));
end;
Exemplo Gráfico:
88

--- PÁGINA 99 ---
15.7 Função CloseD
Disponível em todas versões.
Afunção CloseD ()temcomofinalidaderetornarovalordefechamentodeumnúmerodeterminadodediasatrás.
Sintaxe:
Função CloseD (DaysAgo: Integer ):Float ;
Parâmetros:
DaysAgo: Integer ;Determinaaquantidadedesejadadediasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordefechamentodedoisdiasanterioresaodiaatual.
1
2
3begin
Plot (CloseD (2));
end;
Exemplo Gráfico:
89

--- PÁGINA 100 ---
15.8 Função CloseM
Disponível em todas versões.
Afunção CloseM ()temcomofinalidaderetornarovalordefechamentodeumnúmerodeterminadodemesesatrás.
Sintaxe:
Função CloseM (MonthsAgo: Integer ):Float ;
Parâmetros:
MonthsAgo: Integer ;Determinaaquantidadedesejadademesesanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordefechamentode 3mesesanterioresaomêsatual.
1
2
3begin
Plot (CloseM (3));
end;
Exemplo Gráfico:
90

--- PÁGINA 101 ---
15.9 Função CloseW
Disponível em todas versões.
A função CloseW ()tem como finalidade retornar o valor de fechamento de um número determinado de semanas
atrás.
Sintaxe:
Função CloseW (PeriodsAgo: Integer ):Float ;
Parâmetros:
PeriodsAgo: Integer ;Determinaaquantidadedesejadadesemanasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordefechamento 2semanasanterioresàsemanaatual.
1
2
3begin
Plot (CloseW (2));
end;
Exemplo Gráfico:
91

--- PÁGINA 102 ---
15.10 Função CloseY
Disponível em todas versões.
Afunção CloseY ()temcomofinalidaderetornarovalordefechamentodeumnúmerodeterminadodeanosatrás.
Sintaxe:
Função CloseY (YearsAgo: Integer ):Float ;
Parâmetros:
YearsAgo: Integer ;Determinaaquantidadedesejadadeanosanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordevalordefechamentodoanoanterior.
1
2
3begin
Plot (CloseY (1));
end;
Exemplo Gráfico:
92

--- PÁGINA 103 ---
15.11 Função CurrentAssetDate
Disponível em todas versões.
Afunção CurrentAssetDate ()retornaadataatualdoativonográfico. Datassãorepresentadaspelotipodedado
Integer,noformato: 1AnoMêsDia .
Sintaxe:
Função CurrentAssetDate (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoadatadoativo.
1
2
3begin
Plot (CurrentAssetDate );
end;
Exemplo Gráfico:
93

--- PÁGINA 104 ---
15.12 Função CurrentDate
Disponível em todas versões.
A função CurrentDate ()possui como finalidade retornar a data atual do sistema. Datas são representadas pelo
tipodedado Integer,noformato: 1AnoMêsDia .
Sintaxe:
Função CurrentDate (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoadatadodiaatual.
1
2
3begin
Plot (CurrentDate );
end;
Exemplo Gráfico:
94

--- PÁGINA 105 ---
15.13 Função CurrentTime
Disponível em todas versões.
A função CurrentTime ()possui como finalidade retornar a hora atual do sistema. Datas são representadas pelo
tipodedado Integer,noformato: HHMM.
Sintaxe:
Função CurrentTime (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoahoraatual.
1
2
3begin
Plot (CurrentTime );
end;
Exemplo Gráfico:
95

--- PÁGINA 106 ---
15.14 Função Date
Disponível em todas versões.
Afunção Date ()possuicomofinalidaderetornaradatadocandlequeestásendoanalisado. Datassãorepresentadas
pelotipodedado Integer,noformato: 1AnoMêsDia .
Sintaxe:
Função Date (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoadatadocandleatual.
1
2
3begin
Plot (Date );
end;
Exemplo Gráfico:
96

--- PÁGINA 107 ---
15.15 Função DayOfMonth
Disponível em todas versões.
Afunção DayOfMonth ()retornaodiadomêsdeumadataespecífica. Datassãorepresentadaspelotipodedado
Integer,noformato: 1AnoMêsDia .
Sintaxe:
Função DayOfMonth (Date: Integer ):Integer ;
Parâmetros:
Date: Integer ;Dataparaobterodia.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoodiadomêsdia01/04/25( 1250401).
1
2
3begin
Plot (DayOfMonth (1250401 ));
end;
Exemplo Gráfico:
97

--- PÁGINA 108 ---
15.16 Função DayOfWeek
Disponível em todas versões.
Afunção DayOfWeek ()retornaodiadasemanadeumadataespecífica. Datassãorepresentadaspelotipodedado
Integer,noformato: 1AnoMêsDia .
Sintaxe:
Função DayOfWeek (Date: Integer ):Integer ;
Parâmetros:
Date: Integer ;Dataparaobterodiadasemana.
Exemplo de uso:
No exemplo a seguir, será plotado no gráfico o dia da semana relativo ao dia 01/04/25 ( 1250401), que é 2
(terça-feira).
1
2
3begin
Plot (DayOfWeek (1250401 ));
end;
Exemplo Gráfico:
98

--- PÁGINA 109 ---
15.17 Função DaysToExpiration
Disponível em todas versões.
Afunção DaysToExpiration ()retornaaquantidadedediasúteisrestantesatéaterceirasexta-feiradeumdeter-
minadomêseano.
Sintaxe:
Função DaysToExpiration (ExpMonth: Integer ; ExpYear: Integer ):Integer ;
Parâmetros:
ExpMonth: Integer ;Determinaomêsquesedesejaainformação.
ExpYear: Integer ;Determinaoanodesejadoparaanálise,ondedeveráestarnoformato: 1AnoDesejado.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoquantidadedediasúteisatéaterceirasexta-feiradedezembro/2025.
1
2
3begin
Plot (DaysToExpiration (12,125));
end;
Exemplo Gráfico:
99

--- PÁGINA 110 ---
15.18 Função ELDate
Disponível em todas versões.
A função ELDate ()possui como finalidade retornar uma data em EasyLanguage format (YYYMMDD). Datas são
representadaspelotipodedado Integer,noformato: 1AnoMêsDia .
Sintaxe:
Função ELDate (Year: Integer ; Month: Integer ; Day: Integer ):Integer ;
Parâmetros:
Year: Integer ;DeterminaoanonoformatoYYYY.
Month: Integer ;DeterminamêsnoformatoMM.
Day: Integer ;DeterminaodianoformatoDD.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoadatade25/12/2024noformato: 1241225.
1
2
3begin
Plot (ELDate (2024 ,12,25));
end;
Exemplo Gráfico:
100

--- PÁGINA 111 ---
15.19 Função ELDate_Consol
Disponível em todas versões.
Afunção ELDate_Consol ()possuicomofinalidadeconverterumadata YYYYMMDDemEasyLanguageformat(YYYYM-
MDD).
Sintaxe:
Função ELDate_Consol (Date: Integer ):Integer ;
Parâmetros:
Date: Integer ;DatanoformatoYYYYMMDD.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoadatade25/12/2024noformato: 20241225.
1
2
3begin
Plot (ELDate_Consol (20241225 ));
end;
Exemplo Gráfico:
101

--- PÁGINA 112 ---
15.20 Função FindBar
Disponível em todas versões.
Afunção FindBar ()retornaoíndicedeumabarraatravésdeumadataehora,ondeacontageméiniciadaapartirdo
candleatual(índice0). Datasehorassãorepresentadas,respectivamente,pelotipodedado Integer,noformato:
1AnoMêsDia eHHMM.
Sintaxe:
Função FindBar (TargetDate: Integer ; TargetTime: Integer ):Integer ;
Parâmetros:
TargetDate: Integer ;Datadocandle.
TargetTime: Integer ;Horadocandleespecífico.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooíndicedocandlerelacionadocomohorário 11h00dodiaatual.
1
2
3begin
Plot (FindBar (CurrentDate ,1100 ));
end;
Exemplo Gráfico:
102

--- PÁGINA 113 ---
15.21 Função Friday
Disponível em todas versões.
Afunção Friday ()retornaonúmero 5,representandoodiadasemana: sexta-feira.
Sintaxe:
Função Friday (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoonúmero 5,referenteaodiaespecíficodasemana.
1
2
3begin
Plot (Friday );
end;
Exemplo Gráfico:
103

--- PÁGINA 114 ---
15.22 Função HighD
Disponível em todas versões.
Afunção HighD ()temcomofinalidaderetornarovalordemáximadeumnúmerodeterminadodediasatrás.
Sintaxe:
Função HighD (DaysAgo: Integer ):Float ;
Parâmetros:
DaysAgo: Integer ;Determinaaquantidadedesejadadediasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordemáximadedoisdiasanterioresaodiaatual.
1
2
3begin
Plot (HighD (2));
end;
Exemplo Gráfico:
104

--- PÁGINA 115 ---
15.23 Função HighM
Disponível em todas versões.
Afunção HighM ()temcomofinalidaderetornarovalordemáximadeumnúmerodeterminadodemesesatrás.
Sintaxe:
Função HighM (MonthsAgo: Integer ):Float ;
Parâmetros:
MonthsAgo: Integer ;Determinaaquantidadedesejadademesesanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordemáximadecincomesesanterioresaomêsatual.
1
2
3begin
Plot (HighM (5));
end;
Exemplo Gráfico:
105

--- PÁGINA 116 ---
15.24 Função HighW
Disponível em todas versões.
Afunção HighW ()temcomofinalidaderetornarovalordemáximadeumnúmerodeterminadodesemanasatrás.
Sintaxe:
Função HighW (PeriodsAgo: Integer ):Float ;
Parâmetros:
PeriodsAgo: Integer ;Determinaaquantidadedesejadadesemanasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordemáximadesetesemanasanterioresàsemanaatual.
1
2
3begin
Plot (HighW (7));
end;
Exemplo Gráfico:
106

--- PÁGINA 117 ---
15.25 Função HighY
Disponível em todas versões.
Afunção HighY ()temcomofinalidaderetornarovalordemáximadeumnúmerodeterminadodeanosatrás.
Sintaxe:
Função HighY (YearsAgo: Integer ):Float ;
Parâmetros:
YearsAgo: Integer ;Determinaaquantidadedesejadadeanosanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordemáximadedoisanosanterioresaoatual.
1
2
3begin
Plot (HighY (2));
end;
Exemplo Gráfico:
107

--- PÁGINA 118 ---
15.26 Função LastCalcDate
Disponível em todas versões.
Afunção LastCalcDate ()retornaadatadoúltimocandlecompletoformadodentrodográfico. Datassãorepre-
sentadaspelotipodedado Integer,noformato: 1AnoMêsDia .
Sintaxe:
Função LastCalcDate (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoadatadoscandlesdeacordocomoandamentodomercado.
1
2
3begin
Plot (LastCalcDate );
end;
Exemplo Gráfico:
108

--- PÁGINA 119 ---
15.27 Função LastCalcTime
Disponível em todas versões.
A função LastCalcTime ()retorna a hora do último candle completo formado dentro do gráfico, no formato 24h
(HHMM).
Sintaxe:
Função LastCalcTime (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoahoradefechamentodoscandles,deacordocomoandamentodo
mercado.
1
2
3begin
Plot (LastCalcTime );
end;
Exemplo Gráfico:
109

--- PÁGINA 120 ---
15.28 Função LastDayOfMonth
Disponível em todas versões.
Afunção LastDayOfMonth ()retornaoúltimodiadomêsdereferência.
Sintaxe:
Função LastDayOfMonth (Month: Integer ):Integer ;
Parâmetros:
Month: Integer ;Determinaomêsdereferência,deJaneiro(1)aDezembro(12).
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooúltimodia( 30)domêsdeabril.
1
2
3begin
Plot (LastDayOfMonth (4));
end;
Exemplo Gráfico:
110

--- PÁGINA 121 ---
15.29 Função LowD
Disponível em todas versões.
Afunção LowD ()temcomofinalidaderetornarovalordemínimadeumnúmerodeterminadodediasatrás.
Sintaxe:
Função LowD (DaysAgo: Integer ):Float ;
Parâmetros:
DaysAgo: Integer ;Determinaaquantidadedesejadadediasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordemínimadetrêsdiasanterioresaodiaatual.
1
2
3begin
Plot (LowD (3));
end;
Exemplo Gráfico:
111

--- PÁGINA 122 ---
15.30 Função LowM
Disponível em todas versões.
Afunção LowM ()temcomofinalidaderetornarovalordemínimadeumnúmerodeterminadodemesesatrás.
Sintaxe:
Função LowM (MonthsAgo: Integer ):Float ;
Parâmetros:
MonthsAgo: Integer ;Determinaaquantidadedesejadademesesanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordemínimadetrêsmeses( 3)atrás.
1
2
3begin
Plot (LowM (3));
end;
Exemplo Gráfico:
112

--- PÁGINA 123 ---
15.31 Função LowW
Disponível em todas versões.
Afunção LowW ()temcomofinalidaderetornarovalordemínimadeumnúmerodeterminadodesemanasatrás.
Sintaxe:
Função LowW (PeriodsAgo: Integer ):Float ;
Parâmetros:
PeriodsAgo: Integer ;Determinaaquantidadedesejadadesemanasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordemínimadesetesemanasanterioresàsemanaatual.
1
2
3begin
Plot (LowW (7));
end;
Exemplo Gráfico:
113

--- PÁGINA 124 ---
15.32 Função LowY
Disponível em todas versões.
Afunção LowY ()temcomofinalidaderetornarovalordemínimadeumnúmerodeterminadodeanosatrás.
Sintaxe:
Função LowY (YearsAgo: Integer ):Float ;
Parâmetros:
YearsAgo: Integer ;Determinaaquantidadedesejadadeanosanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordemínimadedoisanosanterioresaoatual.
1
2
3begin
Plot (LowY (2));
end;
Exemplo Gráfico:
114

--- PÁGINA 125 ---
15.33 Função MinutesIntoWeek
Afunção MinutesIntoWeek ()retornaonúmerodeminutosentredomingo(Dia: 0–Hora: 0h00)atéodiaehora
determinadosporparâmetro.
Sintaxe:
Função MinutesIntoWeek (XDay: Integer ; XTime: Integer ):Integer ;
Parâmetros:
XDay: Integer ;Diadelimiteparaaconversãoemminutos.
–0:Domingo;
–1:Segunda;
–2:Terça;
–3:Quarta;
–4:Quinta;
–5:Sexta;
–6:Sábado.
XTime: Integer ;Horadelimiteparaaconversão.
Exemplos:
Noexemploaseguir, seráatribuídoàvariável tMinototalde 8640minutosentredomingo( Dia 0,00h00)e
sábado( Dia 6,00h00).
1
2
3
4
5
6var
tMin : Integer ;
begin
tMin := MinutesIntoWeek (6,0000 );
Plot (tMin);
end;
115

--- PÁGINA 126 ---
Exemplo Gráfico:
116

--- PÁGINA 127 ---
15.34 Função Monday
Afunção Monday ()retornaonúmero 1,representandoodiadasemana: segunda-feira.
Sintaxe:
Função Monday (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalor 1,referenteaodiaespecíficodasemana.
1
2
3begin
Plot (Monday );
end;
Exemplo Gráfico:
117

--- PÁGINA 128 ---
15.35 Função Month
Disponível em todas versões.
Afunção Month ()retornaomêsdeumadataespecífica. Datassãorepresentadaspelotipodedado Integer,no
formato: 1AnoMêsDia .
Sintaxe:
Função Month (Date: Integer ):Integer ;
Parâmetros:
Date: Integer ;Dataparaobteromês.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoomêsatual.
1
2
3begin
Plot (Month (CurrentDate ));
end;
Exemplo Gráfico:
118

--- PÁGINA 129 ---
15.36 Função Next3rdFriday
Disponível em todas versões.
Afunção Next3rdFriday ()retornaaquantidadedediasúteisrestantesatéaterceirasexta-feiradedeterminado
mêssubsequente.
Sintaxe:
Função Next3rdFriday (Series: Integer ):Integer ;
Parâmetros:
Series: Integer ;Determina o mês que se deseja a informação, onde a contagem inicia-se a partir do mês
atual(0).
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoaquantidadedediasúteisatéaterceirasexta-feiradomêsseguinte.
1
2
3begin
Plot (Next3rdFriday (1));
end;
Exemplo Gráfico:
119

--- PÁGINA 130 ---
15.37 Função OpenD
Disponível em todas versões.
Afunção OpenD ()temcomofinalidaderetornarovalordeaberturadeumnúmerodeterminadodediasatrás.
Sintaxe:
Função OpenD (DaysAgo: Integer ):Float ;
Parâmetros:
DaysAgo: Integer ;Determinaaquantidadedesejadadediasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordeaberturadeseisdiasanterioresaodiaatual.
1
2
3begin
Plot (OpenD (6));
end;
Exemplo Gráfico:
120

--- PÁGINA 131 ---
15.38 Função OpenM
Disponível em todas versões.
Afunção OpenM ()temcomofinalidaderetornarovalordeaberturadeumnúmerodeterminadodemesesatrás.
Sintaxe:
Função OpenM (MonthsAgo: Integer ):Float ;
Parâmetros:
MonthsAgo: Integer ;Determinaaquantidadedesejadademesesanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordeaberturadomêsanterioraoatual.
1
2
3begin
Plot (OpenM (1));
end;
Exemplo Gráfico:
121

--- PÁGINA 132 ---
15.39 Função OpenW
Disponível em todas versões.
Afunção OpenW ()temcomofinalidaderetornarovalordeaberturadeumnúmerodeterminadodesemanasatrás.
Sintaxe:
Função OpenW (PeriodsAgo: Integer ):Float ;
Parâmetros:
PeriodsAgo: Integer ;Determinaaquantidadedesejadadesemanasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordeaberturadecincosemanasanterioresàsemanaatual.
1
2
3begin
Plot (OpenW (5));
end;
Exemplo Gráfico:
122

--- PÁGINA 133 ---
15.40 Função OpenY
Disponível em todas versões.
Afunção OpenY ()temcomofinalidaderetornarovalordeaberturadeumnúmerodeterminadodeanosatrás.
Sintaxe:
Função OpenY (YearsAgo: Integer ):Float ;
Parâmetros:
YearsAgo: Integer ;Determinaaquantidadedesejadadeanosanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordeaberturadoanoanterioraoatual.
1
2
3begin
Plot (OpenY (1));
end;
Exemplo Gráfico:
123

--- PÁGINA 134 ---
15.41 Função RS_BarsPerDay
Disponível em todas versões.
A função RS_BarsPerDay ()retorna o número estimado de candles de determinada periodicidade (em minutos).
Casooperiodosejadiário,seráobtido1comoretorno,e,paraperíodosemminutos,ocorreráadivisãodonúmero
totaldeminutosemumdia(1440)pelaperiodicidadeselecionada.
Sintaxe:
Função RS_BarsPerDay (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooretornodachamadadefunção.
1
2
3begin
Plot (RS_BarsPerDay );
end;
Exemplo Gráfico:
124

--- PÁGINA 135 ---
15.42 Função Saturday
Disponível em todas versões.
Afunção Saturday ()retornaonúmero 6,representandoodiadasemana: sábado.
Sintaxe:
Função Saturday (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoonúmero 6,referenteaodiaespecíficodasemana.
1
2
3begin
Plot (Saturday );
end;
Exemplo Gráfico:
125

--- PÁGINA 136 ---
15.43 Função Sunday
Disponível em todas versões.
Afunção Sunday ()retornaonúmero 0,representandoodiadasemana: domingo.
Sintaxe:
Função Sunday (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoonúmero 0,referenteaodiaespecíficodasemana.
1
2
3begin
Plot (Sunday );
end;
Exemplo Gráfico:
126

--- PÁGINA 137 ---
15.44 Função Thursday
Disponível em todas versões.
Afunção Thursday ()retornaonúmero 4,representandoodiadasemana: quinta-feira.
Sintaxe:
Função Thursday (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoonúmero 4,referenteaodiaespecíficodasemana.
1
2
3begin
Plot (Thursday );
end;
Exemplo Gráfico:
127

--- PÁGINA 138 ---
15.45 Função Time
Disponível em todas versões.
Afunção Time ()possuicomofinalidaderetornarahoradeaberturadocandleatual.
Sintaxe:
Função Time (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoahoradeaberturadocandle.
1
2
3begin
Plot (Time );
end;
Exemplo Gráfico:
128

--- PÁGINA 139 ---
15.46 Função TimeExchange
Disponível em todas versões.
Afunção TimeExchange ()retornaotempodocandledeacordocomotimezonedabolsa.
Sintaxe:
Função TimeExchange (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoadatadeacordocomotimezonedabolsa.
1
2
3begin
Plot (TimeExchange );
end;
Exemplo Gráfico:
129

--- PÁGINA 140 ---
15.47 Função TimeToMinutes
Disponível em todas versões.
Afunção TimeToMinutes ()temcomopropósitoconverterumvalordehoranoformatointeiro(HHMM)paraasua
representaçãocorrespondenteemminutosdecorridosdesde00h00.
Sintaxe:
Função TimeToMinutes (XTime: Integer ):Integer ;
Parâmetros:
XTime: Integer ;Horaparaaconversão.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoaconversãoemminutosdahora: 12h30(750minutos).
1
2
3begin
Plot (TimeToMinutes (1230 ));
end;
Exemplo Gráfico:
130

--- PÁGINA 141 ---
15.48 Função Today
Disponível em todas versões.
A função Today ()possui como finalidade retornar a data atual do sistema. Datas são representadas pelo tipo de
dado Integer,noformato: 1AnoMêsDia .
Sintaxe:
Função Today (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoadatadodiaatual.
1
2
3begin
Plot (Today );
end;
Exemplo Gráfico:
131

--- PÁGINA 142 ---
15.49 Função Tuesday
Disponível em todas versões.
Afunção Tuesday ()retornaonúmero 2,representandoodiadasemana: terça-feira.
Sintaxe:
Função Tuesday (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoonúmero 2,referenteaodiaespecíficodasemana.
1
2
3begin
Plot (Tuesday );
end;
Exemplo Gráfico:
132

--- PÁGINA 143 ---
15.50 Função VolumeD
Disponível em todas versões.
Afunção VolumeD ()temcomofinalidaderetornarovolumefinanceirodeumnúmerodeterminadodediasatrás.
Sintaxe:
Função VolumeD (DaysAgo: Integer ):Float ;
Parâmetros:
DaysAgo: Integer ;Determinaaquantidadedesejadadediasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovolumede 6diasanterioresaodiaatual.
1
2
3begin
Plot (VolumeD (6));
end;
Exemplo Gráfico:
133

--- PÁGINA 144 ---
15.51 Função VolumeM
Disponível em todas versões.
Afunção VolumeM ()temcomofinalidaderetornarovolumefinanceirodeumnúmerodeterminadodemesesatrás.
Sintaxe:
Função VolumeM (MonthsAgo: Integer ):Float ;
Parâmetros:
MonthsAgo: Integer ;Determinaaquantidadedesejadademesesanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovolumedomêsanterioraoatual.
1
2
3begin
Plot (VolumeM (1));
end;
Exemplo Gráfico:
134

--- PÁGINA 145 ---
15.52 Função VolumeW
Disponível em todas versões.
Afunção VolumeW ()temcomofinalidaderetornarovolumefinanceirodeumnúmerodeterminadodesemanasatrás.
Sintaxe:
Função VolumeW (WeeksAgo: Integer ):Float ;
Parâmetros:
WeeksAgo: Integer ;Determinaaquantidadedesejadadesemanasanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalorvolumedecincosemanasanterioresàsemanaatual.
1
2
3begin
Plot (VolumeW (5));
end;
Exemplo Gráfico:
135

--- PÁGINA 146 ---
15.53 Função VolumeY
Disponível em todas versões.
Afunção VolumeY ()temcomofinalidaderetornarovolumefinanceirodeumnúmerodeterminadodeanosatrás.
Sintaxe:
Função VolumeY (YearsAgo: Integer ):Float ;
Parâmetros:
YearsAgo: Integer ;Determinaaquantidadedesejadadeanosanteriores.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovolumedoanoanterioraoatual.
1
2
3begin
Plot (VolumeY (1));
end;
Exemplo Gráfico:
136

--- PÁGINA 147 ---
15.54 Função Wednesday
Disponível em todas versões.
Afunção Wednesday ()retornaonúmero 3,representandoodiadasemana: quarta-feira.
Sintaxe:
Função Wednesday (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoonúmero 3,referenteaodiaespecíficodasemana.
1
2
3begin
Plot (Wednesday );
end;
Exemplo Gráfico:
137

--- PÁGINA 148 ---
15.55 Função Year
Disponível em todas versões.
A função Year ()retorna o ano de uma data específica. Datas são representadas pelo tipo de dado Integer, no
formato: 1AnoMêsDia .
Sintaxe:
Função Year (Date: Integer ):Integer ;
Parâmetros:
Date: Integer ;Dataparaobteroano.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooanoatual.
1
2
3begin
Plot (Year (CurrentDate ));
end;
Exemplo Gráfico:
138

--- PÁGINA 149 ---
15.56 Função Yesterday
Disponível em todas versões.
A função Yesterday ()retorna a data do dia de ontem. Datas são representadas pelo tipo de dado Integer, no
formato: 1AnoMêsDia .
Sintaxe:
Função Yesterday (): Integer ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoadatadeontem.
1
2
3begin
Plot (Yesterday );
end;
Exemplo Gráfico:
139

--- PÁGINA 150 ---
16Funções de Candlestick
16.1 Função C_3WhSolds_3BlkCrows
Disponível em todas versões.
Afunção C_3WhSolds_3BlkCrows ()identificaaocorrênciadedoistiposdecandles: 3 White Soldiers e3 Black
Crows.
Sintaxe:
Função C_3WhSolds_3BlkCrows (Length : Integer ; Factor : Integer ; o3WhiteSoldiers :
Integer ; o3BlackCrows : Integer ):Integer ;
Parâmetros:
Length: Integer ;Tamanhoutilizadoparacalcularamédiadocorpodocandle.
Factor: Integer ;Determinaquantasvezesasombradocandledevesermaiorqueoseucorpo.
o3WhiteSoldiers: Integer [var] ;Variávelparaidentificaçãodepadrão( 3 White Soldiers ).
o3BlackCrows: Integer [var] ;Variávelparaidentificaçãodepadrão( 3 Black Crows ).
Exemplo de uso:
Noexemploaseguir,casosejaidentificadoalgumdospadrõesentre 3 White Soldiers ou3 Black Crows ,
considerando 20(Length)e 20(Factor),seráaplicadaumacoloração(vermelho).
1
2
3
4
5
6var
o3WhiteSoldiers, o3BlackCrows: Integer ;
begin
if(C_3WhSolds_3BlkCrows (20,20, o3WhiteSoldiers, o3BlackCrows) = 1)then
PaintBar (clRed );
end
140

--- PÁGINA 151 ---
Exemplo Gráfico:
141

--- PÁGINA 152 ---
16.2 Função C_BullEng_BearEng
Disponível em todas versões.
Afunção C_BullEng_BearEng ()identificaaocorrênciadedoistiposdecandles: Bullish Engulfing eBearish
Engulfing.
Sintaxe:
Função C_BullEng_BearEng (Length : Integer ; oBullishEngulfing : Integer ;
oBullishEngulfing : Integer ):Integer ;
Parâmetros:
Length: Integer ;Tamanhoutilizadoparacalcularamédiadocorpodocandle.
oBullishEngulfing: Integer [var] ;Variávelparaidentificaçãodepadrão( Bullish Engulfing ).
oBearishEngulfing: Integer [var] ;Variávelparaidentificaçãodepadrão( Bearish Engulfing ).
Exemplo de uso:
No exemplo a seguir, caso seja identificado algum dos padrões entre Bullish Engulfing ouBearish
Engulfing,considerando 20(Length),seráaplicadaumacoloração(amarelo).
1
2
3
4
5
6var
oBullishEngulfing, oBearishEngulfing: Integer ;
begin
if(C_BullEng_BearEng (20, oBullishEngulfing, oBearishEngulfing) = 1)then
PaintBar (clYellow );
end
Exemplo Gráfico:
142

--- PÁGINA 153 ---
16.3 Função C_Doji
Disponível em todas versões.
Afunção C_Doji ()identificaaocorrênciadeumcandletipo Doji.
Sintaxe:
Função C_Doji (Percentual : Integer ):Integer ;
Parâmetros:
Percentual: Integer ;Limiarpara(Abertura-Fechamento)queseriaumapercentagemdointervalodocandle.
Exemplo de uso:
Noexemploaseguir,casoopadrãosejaidentificado,considerandopercentualde 5%,seráaplicadaumacoloração
(vermelho).
1
2
3
4begin
if(C_Doji (5) = 1)then
PaintBar (clRed );
end
Exemplo Gráfico:
143

--- PÁGINA 154 ---
16.4 Função C_Hammer_HangingMan
Disponível em todas versões.
Afunção C_Hammer_HangingMan ()identificaaocorrênciadedoistiposdecandles: HammereHanging Man .
Sintaxe:
Função C_Hammer_HangingMan (Length : Integer ; Factor : Integer ; oHammer : Integer ;
oHangingMan : Integer ):Integer ;
Parâmetros:
Length: Integer ;Tamanhoutilizadoparacalcularamédiadocorpodocandle.
Factor: Integer ;Determinaquantasvezesasombradocandledevesermaiorqueoseucorpo.
oHammer: Integer [var] ;Variávelparaidentificaçãodepadrão( Hammer).
oHangingMan: Integer [var] ;Variávelparaidentificaçãodepadrão( Hanging Man ).
Exemplo de uso:
Noexemploaseguir,casosejaidentificadoalgumdospadrõesentre HammerouHanging Man ,considerando 30
(Length)e 30(Factor),seráaplicadaumacoloração(vermelho).
1
2
3
4
5
6var
oHammer, oHangingMan: Integer ;
begin
if(C_Hammer_HangingMan (30,30, oHammer, oHangingMan) = 1)then
PaintBar (clRed );
end
Exemplo Gráfico:
144

--- PÁGINA 155 ---
16.5 Função C_MornDoji_EveDoji
Disponível em todas versões.
Afunção C_MornDoji_EveDoji ()identificaaocorrênciadedoistiposdecandles: Morning Doji Star eEvening
Doji Star.
Sintaxe:
Função C_MornDoji_EveDoji (Length : Integer ; Percentual : Float ; oMorningDojiStar :
Integer ; oEveningDojiStar : Integer ):Integer ;
Parâmetros:
Length: Integer ;Tamanhoutilizadoparacalcularamédiadocorpodocandle.
Percentual: Float ;Dojilimiarparao(abrir-fechar)comoumapercentagemdointervalodabarra.
oMorningDojiStar: Integer [var] ;Variávelparaidentificaçãodepadrão( Morning Doji Star ).
oEveningDojiStar: Integer [var] ;Variávelparaidentificaçãodepadrão( Evening Doji Star ).
Exemplo de uso:
No exemplo a seguir, caso seja identificado algum dos padrões entre Morning Doji Star ouEvening Doji
Star,considerando 30(Length)e 30(Percentual),seráaplicadaumacoloração(vermelho).
1
2
3
4
5
6var
oMorningDojiStar, oEveningDojiStar : Integer ;
begin
if(C_MornDoji_EveDoji (30,30, oMorningDojiStar, oEveningDojiStar) = 1)then
PaintBar (clRed );
end
145

--- PÁGINA 156 ---
Exemplo Gráfico:
146

--- PÁGINA 157 ---
16.6 Função C_MornStar_EveStar
Disponível em todas versões.
Afunção C_MornStar_EveStar ()identificaaocorrênciadedoistiposdecandles: Morning Star eEvening Star .
Sintaxe:
Função C_MornStar_EveStar (Length : Integer ; oMorningStar : Integer ; oEveningStar :
Integer ):Integer ;
Parâmetros:
Length: Integer ;Tamanhoutilizadoparacalcularamédiadocorpodocandle.
oMorningStar: Integer [var] ;Variávelparaidentificaçãodepadrão( Morning Star ).
oEveningStar: Integer [var] ;Variávelparaidentificaçãodepadrão( Evening Star ).
Exemplo de uso:
No exemplo a seguir, caso seja identificado algum dos padrões entre Evening Star eMorning Star , con-
siderando 30(Length),seráaplicadaumacoloração(verde).
1
2
3
4
5
6
7var
oMorningStar, oEveningStar : Integer ;
begin
if(C_MornStar_EveStar (30, oMorningStar, oEveningStar) = 1)then
PaintBar (clGreen );
end
Exemplo Gráfico:
147

--- PÁGINA 158 ---
16.7 Função C_PierceLine_DkCloud
Disponível em todas versões.
A função C_PierceLine_DkCloud ()identifica a ocorrência de dois tipos de candles: Piercing Line eDark
Cloud.
Sintaxe:
Função C_PierceLine_DkCloud (Length : Integer ; oPiercingLine : Integer ; oDarkCloud :
Integer ):Integer ;
Parâmetros:
Length: Integer ;Tamanhoutilizadoparacalcularamédiadocorpodocandle.
oPiercingLine: Integer [var] ;Variávelparaidentificaçãodepadrão( Piercing Line ).
oDarkCloud: Integer [var] ;Variávelparaidentificaçãodepadrão( Dark Cloud ).
Exemplo de uso:
No exemplo a seguir, caso seja identificado algum dos padrões entre Dark Cloud ePiercing Line , con-
siderando 30(Length),seráaplicadaumacoloração(verde).
1
2
3
4
5
6
7var
oPiercingLine, oDarkCloud : Integer ;
begin
if(C_PierceLine_DkCloud (30, oPiercingLine, oDarkCloud) = 1)then
PaintBar (clGreen );
end
Exemplo Gráfico:
148

--- PÁGINA 159 ---
16.8 Função C_ShootingStar
Disponível em todas versões.
Afunção C_ShootingStar ()identificaaocorrênciadecandlestipo Shooting Star .
Sintaxe:
Função C_ShootingStar (Length : Integer ; Factor : Integer ; oDarkCloud : Integer ):
Integer ;
Parâmetros:
Length: Integer ;Tamanhoutilizadoparacalcularamédiadocorpodocandle.
Factor: Integer ;Determinaquantasvezesasombradocandledevesermaiorqueoseucorpo.
Exemplo de uso:
Noexemploaseguir,casoopadrãosejaidentificado,considerando 30(Length)e 30(Factor),seráaplicadauma
coloração(verde).
1
2
3
4begin
if(C_ShootingStar (30,1) = 1)then
PaintBar (clGreen );
end
Exemplo Gráfico:
149

--- PÁGINA 160 ---
17Exemplos
17.1 Função DiMaisDiMenos
Disponível em todas versões.
O indicador ”Diferencial(DI+/DI-)” é chamado pela função DiMaisDiMenos (), sendo um indicador de momento,
tenta qualificar a tendência ou comportamento direcional de um mercado. O exemplo com o código fonte está
disponívelnoeditordeestratégias,paravisualizá-lo,acesseomenu: ”abrir>exemplos”.
Sintaxe:
Função DiMaisDiMenos (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooindicadorcriado.
1
2
3begin
Plot (DiMaisDiMenos (14));
end;
Exemplo Gráfico:
150

--- PÁGINA 161 ---
17.2 Função IFR
Disponível em todas versões.
O”ÍndicedeForçaRelativo” IFR()medeaevoluçãodarelaçãodeforçasentrecompradoresevendedoresaolongo
dotempo. oexemplocomocódigofonteestádisponívelnoeditordeestratégias,paravisualizá-lo,acesseomenu:
”abrir>exemplos”.
Sintaxe:
Função IFR(Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”IFR”,considerando 2períodosparaocálculo.
1
2
3begin
Plot (IFR(2));
end;
Exemplo Gráfico:
151

--- PÁGINA 162 ---
17.3 Função PaintVar
Disponível em todas versões.
Afunção PaintVar ()possuiaimplementaçãodeumaestratégiadecoloração,aqualcomparaseofechamentodo
últimocandleépositivoounegativoemrelaçãoaofechamentodo(candle)anterior,e,comoindicador,apenasretorna
o último preço do ativo. o exemplo com o código fonte está disponível no editor de estratégias, para visualizá-lo,
acesseomenu: ”abrir>exemplos”.
Sintaxe:
Função PaintVar (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadooúltimopreço,ondearegradecoloraçãocorrespondentepoderáseraplicada
sobreoindicador.
1
2
3begin
Plot (PaintVar );
end;
Exemplo Gráfico:
152

--- PÁGINA 163 ---
18Funções Gráficas
18.1 Função AvgPrice
Disponível em todas versões.
A função AvgPrice ()retorna o valor da média entre Abertura, Fechamento, Máxima e Mínima, de determinado
candle.
Sintaxe:
Função AvgPrice (): Float ;
Parâmetros:
Semparâmetros.
Exemplos:
Noexemplo,avariável AvgPricePlot recebeopreçomédiodabarraatualcomafunção AvgPrice ()eplotaesse
valornográfico.
1
2
3
4
5
6var
AvgPricePlot : Float ;
begin
AvgPricePlot := AvgPrice ();
Plot (AvgPricePlot);
end;
Exemplo:
153

--- PÁGINA 164 ---
18.2 Função BarCount
Disponível em todas versões.
Afunção BarCount ()retornaaquantidadetotaldebarras.
Sintaxe:
Função BarCount (): Integer ;
Parâmetros:
Semparâmetros.
Exemplos:
Noexemplo,serápintadodeazul( clBlue)abarraqueestá 10posiçõesantesdaúltimanográfico.
1
2
3
4begin
ifCurrentBar () = BarCount () ‐ 10then
PaintBar (clBlue );
end;
Exemplo:
154

--- PÁGINA 165 ---
18.3 Função ConsoleLog
Disponível em todas versões.
Afunção ConsoleLog ()imprimeumtextonoterminaldeconsoleparaajudarnadepuraçãodocódigo.
Sintaxe:
Função ConsoleLog (Content: String ; Color: Integer ):Void ;
Parâmetros:
Content: String ;Textoqueiráserimpressonoconsolededepuração.
Color: Integer [Opcional] ;Cordotextoimpresso.
Exemplo de uso:
Noexemploabaixo,afunção ConsoleLog ()iráimprimirosdiaseasvariaçõesdoWDOFUTemquetevevariação
maiorde4%.
1
2
3
4begin
ifClose[1] > Close * 1.04 then
ConsoleLog("Day: " + Date + " Variation: " +
(Close[ 1] / Close ‐ 1) * 100 + "%", clRed );
end;
Exemplo:
155

--- PÁGINA 166 ---
18.4 Função CurrentBar
Disponível em todas versões.
Afunção CurrentBar ()temcomofinalidaderetornaraousuáriooíndicedocandleatual.
Sintaxe:
Função CurrentBar (): Integer ;
Parâmetros:
Semparâmetros.
Exemplos:
Noexemplo,serápintadodeazul( clBlue)abarraqueestá 10posiçõesantesdaúltimanográfico.
1
2
3
4begin
ifCurrentBar () = BarCount () ‐ 10then
PaintBar (clBlue );
end;
Exemplo:
156

--- PÁGINA 167 ---
18.5 Função GetPlotColor
Disponível em todas versões.
Afunção GetPlotColor possuicomofuncionalidaderetornarovalornuméricodacordedeterminadoplot.
Sintaxe:
Função GetPlotColor (PlotNum: Integer ):Integer ;
Parâmetros:
PlotNum: Integer ;NúmerodoPlotparaobteracor.
Exemplos:
Noexemplo,seráaplicadaacoloraçãodoPlot1aoPlot2.
1
2
3
4
5
6begin
SetPlotColor (1,RGB(100,100,255));
SetPlotColor (2,GetPlotColor (1));
PlotN (1,close);
PlotN (2,Open);
end;
Exemplo:
157

--- PÁGINA 168 ---
18.6 Função GetPlotWidth
Disponível em todas versões.
Afunção GetPlotWidth possuicomofinalidaderetornarovalordaespessuradedeterminadoplot.
Sintaxe:
Função GetPlotWidth (PlotNum: Integer ):Integer ;
Parâmetros:
PlotNum: Integer ;NúmerodoPlotparaobteraespessura
Exemplos:
Noexemplo,seráaplicadaaespessuradoPlot1aoPlot2.
1
2
3
4
5
6begin
SetPlotWidth (1,5);
SetPlotWidth (2,GetPlotWidth (1));
PlotN (1,close);
PlotN (2,Open);
end;
Exemplo:
158

--- PÁGINA 169 ---
18.7 Função GraphicInterval
Disponível em todas versões.
Afunção” GraphicInterval ()”possuicomofinalidaderetornarointervalodográfico.
Sintaxe:
Função GraphicInterval (): Integer ;
Parâmetros:
Nãopossuiparâmetros.
Exemplos:
Noexemplo,seráatribuídoàvariável gIntervaloretornodafunção.
1
2
3
4
5
6var
gInterval : Integer ;
begin
gInterval := GraphicInterval ();
Plot (gInterval);
end;
Exemplo:
159

--- PÁGINA 170 ---
18.8 Função GraphicOffset
Disponível em todas versões.
Afunção GraphicOffset ()possuicomofinalidaderetornarooffsetdográfico.
Sintaxe:
Função GraphicOffset (): Integer ;
Parâmetros:
Nãopossuiparâmetros.
Exemplos:
Noexemplo,seráatribuídoàvariável gOffsetoretornodafunção.
1
2
3
4
5
6var
gOffset : Integer ;
begin
gOffset := GraphicOffset ();
Plot (gOffset);
end;
Exemplo:
160

--- PÁGINA 171 ---
18.9 Função HorizontalLine
Disponível em todas versões.
Afunção HorizontalLine temcomofinalidadeadicionarumestudohorizontalemumindicador.
Sintaxe:
Função HorizontalLine (Y: Float ; Color: Integer ):Void ;
Parâmetros:
Y:Float ;Valordoestudo.
Color: Integer [Optional] ;Cordalinha.
Exemplo de uso:
Noexemploabaixo,seráadicionadaumalinhavermelha,nonível 5288.
1
2
3begin
HorizontalLine (5288 ,RGB(200,0,0));
end;
Exemplo:
161

--- PÁGINA 172 ---
18.10 Função HorizontalLineCustom
Disponível em todas versões.
Afunção HorizontalLineCustom temcomofinalidadeadicionarumestudohorizontalcustomizávelemumindicador.
Sintaxe:
Função HorizontalLineCustom (Price: Float ; Color: Integer ; LineWidth: Integer ;
Style: Integer ; Text: String ; FontSize: Integer ; TextPosition: Integer ;
EndDate: Integer ; PriceVariation: Float ; StartTime: Integer ; EndTime: Integer ):
Void ;
Parâmetros:
Price: Float ;Valordoestudo.
Color: Integer ;Cordalinha.
LineWidth: Integer ;Espessuradalinha.
Style: Integer ;Estilodalinha. Ver SetPlotStyle ()paramaisdetalhes.
Text: String ;Textodalinha.
FontSize: Integer [Opcional] ;Tamanhodafonte.
TextPosition: Integer [Opcional] ;Posiçãodotextonalinha.
–tpTopLeft;
–tpTopRight ;
–tpBottomLeft ;
–tpBottomRight .
StartDate: Integer [Opcional] ;Datainicialdalinha.
EndDate: Integer [Opcional] ;Datafinaldalinha.
PriceVariation: Float [Opcional] ;Variaçãodepreçoparapreencheracimaeabaixodalinhaprincipal.
StartTime: Integer [Opcional] ;Horainicialdalinha.
EndTime: Integer [Opcional] ;Horafinaldalinha.
Exemplos:
No exemplo abaixo, será adicionada uma linha amarela, com espessura 3, estilo linha, com fonte de tamanho
10,textonotopodireito,doinícioaofimdográficoecomumavariaçãode 1000nopreço.
1
2
3begin
HorizontalLineCustom (Close + 1000 ,clYellow ,3,0, "Teste",
10,tpTopRight ,0,0,1000 );
end;
162

--- PÁGINA 173 ---
Exemplo:
163

--- PÁGINA 174 ---
18.11 Função LastBarOnChart
Disponível em todas versões.
A função LastBarOnChart tem como função retornar um valor Booleano mostrando se o candle atual é o último
candledográfico.
Sintaxe:
Função LastBarOnChart (): Boolean ;
Parâmetros:
Nãopossuiparâmetros.
Exemplos:
Noexemploaseguir,ocandleatualseráidentificadocomacoloraçãoamarela.
1
2
3
4begin
if(LastBarOnChart )then
PaintBar (clYellow );
end;
Exemplo:
164

--- PÁGINA 175 ---
18.12 Função Leader
Disponível em todas versões.
Afunção Leader ()retornaovalor 0quandoopontomédioformenorqueamínimaanteriorou 1quandooponto
médioformaiorqueamáximaanterior.
Sintaxe:
Função Leader (): Integer ;
Parâmetros:
Nãopossuiparâmetros.
Exemplos:
Noexemploabaixo,casoafunção Leader ()sejaiguala 1,ocandleanalisadoseráidentificadopelacorverde.
1
2
3
4begin
if(Leader () = 1)then
PaintBar (clGreen );
end;
Exemplo:
165

--- PÁGINA 176 ---
18.13 Função LineSegment
Disponível em todas versões.
A função LineSegment ()desenha um segmento de reta no gráfico com base nos parâmetros fornecidos. A linha
começa no ponto definido por PriceStart eDateStart e termina em PriceEndeDateEnd. Se o parâmetro
Extrapolate estiverdefinidocomoverdadeiro,alinhaseráestendidaalémdoslimitesespecificados,mantendosua
angulaçãooriginal.
Sintaxe:
Função LineSegment (PriceStart: Float ; PriceEnd: Float ; StartDate: Integer ; EndDate
:Integer ; Extrapolate: Boolean ; Text: String ; Color: Integer ; LineWidth:
Integer ; Style: Integer ; FontSize: Integer ; TextPosition: Integer ; StartTime:
Integer ; EndTime: Integer ):Void ;
Parâmetros:
PriceStart: Float ;Valorinicialdalinhanoeixodepreço.
PriceEnd: Float ;Valorfinaldalinhanoeixodepreço.
StartDate: Integer ;Datainicialdalinha.
EndDate: Integer ;Datafinaldalinha.
Extrapolate: Boolean ;Definesealinhadeveserextrapoladaalémdoslimitesdefinidos.
Text: String ;Textoaserexibidopróximoàlinha.
Color: Integer [Opcional]; Cordalinha.
LineWidth: Integer [Opcional]; Espessuradalinha.
Style: Integer [Opcional]; Estilodalinha.
FontSize: Integer [Opcional]; Tamanhodafontedotexto.
TextPosition: Integer [Opcional]; Posiçãodotexto.
StartTime: Integer [Opcional]; Horadeinício(casoaplicável).
EndTime: Integer [Opcional]; Horadetérmino(casoaplicável).
Exemplos:
Noexemploabaixo,serádesenhadoumsegmentoderetadovalor 137.000para 138.000,entreasdatas 01/05
e09/05,comextrapolaçãoativadaetexto“Segmento”.
1
2
3begin
LineSegment (137000 ,138000 ,1250501 ,1250509 ,true , "Segmento");
end;
166

--- PÁGINA 177 ---
Exemplo:
167

--- PÁGINA 178 ---
18.14 Função MaxBarsBack
Disponível em todas versões.
Afunção MaxBarsBack ()temcomofinalidadepercorreralistadasérie,iniciandodoprimeirocandlecriado(índice
0).
Sintaxe:
Função MaxBarsBack (): Integer ;
Parâmetros:
Nãopossuiparâmetros.
Exemplos:
Noexemplo,seráaplicadaumacoloraçãonosegundocandlecriado.
1
2
3
4begin
if(MaxBarsBack () = 1)then
PaintBar (clGreen );
end;
Exemplo:
168

--- PÁGINA 179 ---
18.15 Função MaxBarsForward
Disponível em todas versões.
Afunção MaxBarsForward ()temcomofinalidadepercorreralistadasérie,iniciandodoúltimocandlecriado(índice
0,candleatual).
Sintaxe:
Função MaxBarsForward (): Integer ;
Parâmetros:
Nãopossuiparâmetros.
Exemplos:
Noexemplo,seráaplicadaumacoloraçãonocandleanterioraoatual.
1
2
3
4begin
if(MaxBarsForward () = 1)then
PaintBar (clGreen );
end;
Exemplo:
169

--- PÁGINA 180 ---
18.16 Função MedianPrice
Disponível em todas versões.
Afunção MedianPrice ()retornaamédiaentreamáximaeamínimadecadacandle.
Sintaxe:
Função MedianPrice (): Float ;
Parâmetros:
Nãopossuiparâmetros.
Exemplos:
Noexemploaseguir,casoovalordafunção MedianPrice ()docandleatualsejamaiorqueodocandleanterior,
oscandlesserãodestacadoscomacor clGreen.
1
2
3
4
5begin
if((MedianPrice () > MedianPrice (1))) then
PaintBar (clGreen );
Plot (MedianPrice );
end;
Exemplo:
170

--- PÁGINA 181 ---
18.17 Função NoPlot
Disponível em todas versões.
Afunção NoPlot ()temcomofinalidadeefetuararemoçãodedeterminadoPlot.
Sintaxe:
Função NoPlot (PlotNum: Integer ):Void ;
Parâmetros:
PlotNum: Integer ;NúmerodoPlot( 1,2,3ou4)aserremovido.
Exemplos:
Conformeoexemploaseguir,seráremovidaalinhareferenteaoPlot 1,eseráexibidaapenasalinhavinculada
aoPlot 2.
1
2
3begin
Plot (Close);
Plot2 (Open);
NoPlot (1);
end;
Exemplo:
171

--- PÁGINA 182 ---
18.18 Função PaintBar
Disponível em todas versões.
Afunção PaintBar ()permiteaaplicaçãodecoloraçõesemindicadoresoucandles.
Sintaxe:
Função PaintBar (Cor: Integer ):Void ;
Parâmetros:
Cor: Integer ;Determinaacoloração.
Exemplos:
Noexemplo,seráaplicadaacoloraçãoverdequandoohistogramade MACD ()formaiorquezero.
1
2
3
4begin
if(MACD (23,12,9)|1| > 0)then
PaintBar (clGreen );
end;
Exemplo:
172

--- PÁGINA 183 ---
18.19 Funções Plot
Disponível em todas versões.
Afunção Plot ()realizaaligaçãodosvalorespassadosporparâmetroecriagráficosdelinhas.
Épossívelinseriraté99linhas,utilizandoaversãonumeradadafunção: Plot1 (),Plot2 (),Plot3 (). . .Plot99 ().
Sintaxe:
Função Plot (Valor: Float ):Void ;
Função Plot2 (Valor: Float ):Void ;
Função Plot3 (Valor: Float ):Void ;
...
Função Plot99 (Valor: Float ):Void ;
Parâmetros:
Valor: Float ;Pode-seutilizarvariáveis,funçõesouconstantespararealizarodesenhodoindicador.
Exemplos:
Conformeoexemploaseguir,sãoplotadososdadosdefechamentododiaanterioreaaberturadodiaatual.
1
2
3
4begin
Plot (CloseD (1));
Plot99 (OpenD (0));
end;
Exemplo:
173

--- PÁGINA 184 ---
18.20 Função PlotN
Disponível em todas versões.
Afunção PlotN ()assimcomoa Plot (),desenhaoindicadorconformeasériededadosinformada,porémonúmero
doplotdeveserdeterminadoporparâmetro(entre 0e99).
Sintaxe:
Função PlotN (Plot: Integer ; Valor: Float ):Void ;
Parâmetros:
Plot: Integer ;Númerodoplot,entre 0e99.
Valor: Float ;Pode-seutilizarvariáveis,funçõesouconstantespararealizarodesenhodoindicador.
Exemplos:
Noexemplo,sãoplotadososdadosdefechamentododiaanterioreaaberturadodiaatual.
1
2
3
4begin
PlotN (0,CloseD (1));
PlotN (99,OpenD (0));
end;
Exemplo:
174

--- PÁGINA 185 ---
18.21 Função PlotText
Disponível em todas versões.
Afunção PlotText ()possuicomofinalidadeadicionarumtextoaumindicador.
Sintaxe:
Função PlotText (Content: String Color: Integer Position: Integer FontSize: Integer
Price: Float ;): Void ;
Parâmetros:
Content: String ;Conteúdodotexto.
Color: Integer ;Cordafonte.
Position: Integer [Opcional] ;Posiçãodotexto:
–0:Abaixodocandle.
–1:Centralizado.
–2:Acimadocandle.
–3:Posicionanopreçodefinidoem dPrice.
FontSize: Integer [Opcional] ;Tamanhodafontedotexto.
Price: Float [Opcional] ;Quandoutilizada Position = 3 ,seráutilizadoovalorde dPriceparaposicionar
otexto.
Exemplos:
No exemplo, será adicionado o texto "Close > M20" quando o fechamento anterior estiver acima da média
exponencialde 20períodos. Casocontrário,seráexibidootexto "Close < M20" .
1
2
3
4
5
6
7
8begin
if(Close[ 1] < mediaExp (20, Close)[ 1])and
(Close > mediaExp (20, Close)) then
PlotText ("Close > M20!", clLime ,2,6)
else if(Close[ 1] > mediaExp (20, Close)) and
(Close < mediaExp (20, Close)) then
PlotText ("Close < M20!", clRed ,0,6);
end;
175

--- PÁGINA 186 ---
Exemplo:
176

--- PÁGINA 187 ---
18.22 Função Range
Disponível em todas versões.
Afunção Range ()retornaadiferençaentreamáximaeamínimadocandle.
Sintaxe:
Função Range (): Float ;
Parâmetros:
Nenhumparâmetro.
Exemplos:
Noexemplo,avariável nRangeiráreceberovalorretornadopelafunção Range ().
1
2
3
4
5
6var
nRange : Float ;
begin
nRange := Range ();
Plot (nRange);
end;
Exemplo:
177

--- PÁGINA 188 ---
18.23 Função RangeLeader
Disponível em todas versões.
Afunção RangeLeader ()comparaocandleatualeanterior,analisandoduascondições: seopontomédiodocandle
atualémaiorqueamáximaanterioroumenorqueamínimaanterior;seointervalodocandleatualémaiorqueo
intervalodabarraanterior. Afunçãofunçãoretornará1casoambasascondiçõesforematendidas,masretornará0
casonenhumaouapenasumadascondiçõesforatendida.
Sintaxe:
Função RangeLeader (): Float ;
Parâmetros:
Nenhumparâmetro.
Exemplos:
Noexemplo,avariável nRLiráreceberovalorretornadopelafunção RangeLeader ().
1
2
3
4
5
6var
nRL : Float ;
begin
nRL := RangeLeader ();
Plot (nRL);
end;
Exemplo:
178

--- PÁGINA 189 ---
18.24 Função RGB
Disponível em todas versões.
Afunção RGB()permiteaousuáriocustomizarcores,apartirdaaplicaçãodeintensidadedosparâmetrosvermelho,
verdeeazul.
Sintaxe:
Função RGB(Red: Integer ; Green: Integer ; Blue: Integer ):Integer ;
Parâmetros:
Red: Integer ;Intensidadedacorvermelha,variandode0a255.
Green: Integer ;Intensidadedacorverde,variandode0a255.
Blue: Integer ;Intensidadedacorazul,variandode0a255.
Exemplos:
Noexemploaseguir,seráaplicadaacoloraçãoazul,conformeosparâmetrospassadosàfunção RGB().
1
2
3begin
PaintBar (RGB(0,0,230));
end;
Exemplo:
179

--- PÁGINA 190 ---
18.25 Função SetPlotColor
Disponível em todas versões.
Afunção SetPlotColor ()possuicomofinalidadealteraracoloraçãodedeterminado Plotde1a4.
Sintaxe:
Função SetPlotColor (NumeroPlot: Integer ; Cor: Integer ):Void ;
Parâmetros:
NumeroPlot: Integer ;Númerodoplotqueteráacoralterada:
–1: Plot;
–2: Plot2;
–3: Plot3;
–4: Plot4.
Cor: Integer ;Determinaacoloração. Podeserumaconstantedecorouumachamadaàfunção RGB().
Exemplos:
Noexemploabaixo,seráalteradaacoloraçãoparavermelhareferenteàlinhado Plot ().
1
2
3
4begin
Plot (Close);
SetPlotColor (1,clRed );
end;
Exemplo:
180

--- PÁGINA 191 ---
18.26 Função SetPlotStyle
Disponível em todas versões.
Apartirdafunção SetPlotStyle (),épossívelalteraroestilodalinhadeumplotespecífico.
Sintaxe:
Função SetPlotStyle (Number: Integer ; Style: Integer ):Void ;
Parâmetros:
Number: Integer ;Númerodoplotasermodificado.
Style: Integer ;Estilodalinha:
–0: Contínua;
–1: Tracejada(Traçolongo);
–2: Tracejada(Traçocurto);
–3: Tracejada(Traçolongoecurto);
–4: Tracejada(Traçolongoedoiscurtos).
Exemplos:
Noexemploabaixo,serãocustomizadososestilosdosplots: oprimeiroterálinhatracejadacomtraçoslongos,
eosegundo,comtraçoscurtos.
1
2
3
4
5
6
7
8
9begin
Plot (OpenD (0));
Plot2 (PriorCote (4));
SetPlotStyle (1,1);
SetPlotStyle (2,2);
SetPlotWidth (2,2);
end;
181

--- PÁGINA 192 ---
Exemplo:
182

--- PÁGINA 193 ---
18.27 Função SetPlotType
Disponível em todas versões.
Afunção SetPlotType ()possuicomofinalidadealterarotipodegráficodedeterminadoplot.
Sintaxe:
Função SetPlotType (Number: Integer ; Type: Integer ):Void ;
Parâmetros:
Number: Integer ;Númerodoplotespecífico.
Type: Integer ;Tipodevisualização:
–0:Linha;
–1:Histograma.
Exemplos:
Noexemploabaixo,seráalteradootipodo Plot 1parahistograma.
1
2
3
4begin
PlotN (1,closeD (1));
SetPlotType (1,1);
end;
Exemplo:
183

--- PÁGINA 194 ---
18.28 Função SetPlotWidth
Disponível em todas versões.
Afunção SetPlotWidth ()possuicomofinalidadealteraraespessuradedeterminadoPlot(1a4).
Sintaxe:
Função SetPlotWidth (NumeroPlot: Integer ; Espessura: Integer ):Void ;
Parâmetros:
NumeroPlot: Integer ;Númerodoplotasermodificado:
–1:Plot;
–2:Plot2;
–3:Plot3;
–4:Plot4.
Espessura: Integer ;Valordanovaespessuradalinha.
Exemplos:
Noexemploabaixo,seráalteradaaespessuradalinhado Plot 1para3.
1
2
3
4begin
Plot (Close );
SetPlotWidth (1,3);
end;
Exemplo:
184

--- PÁGINA 195 ---
18.29 Função TrueHigh
Disponível em todas versões.
Afunção TrueHigh ()retornaomaiorvalorentreomáximodabarraatualeofechamentodabarraanterior.
Sintaxe:
Função TrueHigh (): Float ;
Parâmetros:
Nenhumparâmetro.
Exemplos:
Noexemploabaixo,avariável THreceberáovalorretornadopela TrueHigh ().
1
2
3
4
5
6var
TH : Float ;
begin
TH := TrueHigh ();
Plot (TH);
end;
Exemplo:
185

--- PÁGINA 196 ---
18.30 Função TrueLow
Disponível em todas versões.
Afunção TrueLow ()retornaomenorvalorentreamínimadabarraatualeofechamentodabarraanterior.
Sintaxe:
Função TrueLow (): Float ;
Parâmetros:
Nenhumparâmetro.
Exemplos:
Noexemploabaixo,avariável TLreceberáovalorretornadopelafunção TrueLow ().
1
2
3
4
5
6var
TL : Float ;
begin
TL := TrueLow ();
Plot (TL);
end;
Exemplo:
186

--- PÁGINA 197 ---
18.31 Função TrueRange
Disponível em todas versões.
Afunção TrueRange ()retornaadiferençaentreosvaloresde TrueHigh ()eTrueLow ().
Sintaxe:
Função TrueRange (): Float ;
Parâmetros:
Nenhumparâmetro.
Exemplos:
Noexemploabaixo,avariável TRreceberáovalorretornadopelafunção TrueRange ().
1
2
3
4
5
6var
TR : Float ;
begin
TR := TrueRange ();
Plot (TR);
end;
Exemplo:
187

--- PÁGINA 198 ---
18.32 Função TrueRangeCustom
Disponível em todas versões.
Afunção TrueRangeCustom ()retornaovalordeTrueRangecombasenosdadosfornecidospelousuário.
Sintaxe:
Função TrueRangeCustom (Maxima: Float ; Minima: Float ; Fechamento: Float ):Float ;
Parâmetros:
Maxima: Float ;Valordemáximaparaocálculodoindicador.
Minima: Float ;Valordemínimaparaocálculodoindicador.
Fechamento: Float ;Valordefechamentodereferência.
Exemplos:
Noexemploabaixo,avariável TRCreceberáovalorretornadopelafunção TrueRangeCustom ().
1
2
3
4
5
6var
TRC : Float ;
begin
TRC := TrueRangeCustom (3763.5 ,3761 ,3761 );
Plot (TRC);
end;
Exemplo:
188

--- PÁGINA 199 ---
18.33 Função TypicalPrice
Disponível em todas versões.
Afunção TypicalPrice ()retornaamédiaaritméticaentreosvaloresdemáxima,mínimaefechamentodocandle.
Sintaxe:
Função TypicalPrice (): Float ;
Parâmetros:
Nenhumparâmetro.
Exemplos:
Noexemploabaixo,avariável auxreceberáovalorretornadopelafunção TypicalPrice ().
1
2
3
4
5
6var
aux : Float ;
begin
aux := TypicalPrice ();
Plot (aux);
end
Exemplo:
189

--- PÁGINA 200 ---
18.34 Função VerticalLine
Disponível em todas versões.
Afunção VerticalLine ()adicionaumalinhaverticalnográfico,destacandoumpontoespecíficonoeixodotempo.
Sintaxe:
Função VerticalLine (Date: Integer Color: Integer ;): Void ;
Parâmetros:
Date: Integer ;Datanoformato 1AAMMDD.
Color: Integer ;Cordalinha.
Exemplos:
Noexemploabaixo,seráinseridaumalinhaverticalamarelanadatadodiaanterior.
1
2
3begin
VerticalLine (CurrentDate ‐1,clYellow );
end;
Exemplo:
190

--- PÁGINA 201 ---
18.35 Função VerticalLineCustom
Disponível em todas versões.
A função VerticalLineCustom ()permite desenhar múltiplas linhas verticais com configurações personalizadas,
comotexto,estilo,espessuraeregiãopintada.
Sintaxe:
Função VerticalLineCustom (Color: Color ; LineWidth: Integer ; Style: Integer ; Text:
String ; FontSize: Integer ; TextPosition: Integer ; PriceTop: Float ; PriceBottom:
Float ; PaintRegion: Boolean ): Void ;
Parâmetros:
Color: Color ;Cordalinha.
LineWidth: Integer ;Espessuradalinha.
Style: Integer ;Estilodalinha. Ver SetPlotStyle ()paramaisdetalhes.
Text: String ;Textoexibidonalinha.
FontSize: [Opcional] Integer ;Tamanhodafontedotexto.
TextPosition: [Opcional] Integer ;Posiçãodotexto.
PriceTop: [Opcional] Float ;Preçoinicialdalinha(se0,começadotopodográfico).
PriceBottom: [Opcional] Float ;Preçofinaldalinha(se0,vaiatéofundodográfico).
PaintRegion: [Opcional] Boolean ;Defineseserápintadaumaregiãoatéapróximalinhaouatéofim.
Exemplos:
Noexemploabaixo,afunção VerticalLineCustom (),seráplotadoumalinhaverticalpersonalizadanográfico.
1
2
3begin
VerticalLineCustom (CLRED ,1,1,"1234");
end;
191

--- PÁGINA 202 ---
Exemplo:
192

--- PÁGINA 203 ---
18.36 Função WeightedClose
Disponível em todas versões.
Afunção WeightedClose ()retornaamédiaentreopontomédiodabarraedoisfechamentos.
Sintaxe:
Função WeightedClose (): Float ;
Parâmetros:
Nenhumparâmetro.
Exemplos:
Noexemploabaixo,avariável auxiráreceberovalorretornadopelafunção WeightedClose ().
1
2
3
4
5
6var
aux : Float ;
begin
aux := WeightedClose ();
Plot (aux);
end;
Exemplo:
193

--- PÁGINA 204 ---
19Indicadores
As funções de indicadores não poderão conter variáveis em seus parâmetros, apenas constantes. O único tipo de
parâmetroquefogeàestaregrasãoosparâmetrosdotipoSeriequecontémumvalorparacaracandle,essesvalores
podemserconsiderados”variáveis”dadoqueasériemudaaolongodotempo.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoaquantidadedediasúteisatéaterceirasexta-feiradomêsseguinte.
1
2
3begin
Plot (Media (21,Close ));
end
VejaabaixoasdescriçõesdasfunçõesdeindicadoresdisponíveisnasplataformasdaNelogica:
19.1 Função TWOMVVOLATILITY
Disponível em todas versões.
Afunção TWOMVVOLATILITY ()foicriadaparaauxíliarnavisualizaçãonofuncionamentodomodovolatilidadedorobô
2MV.
Sintaxe:
Função TWOMVVOLATILITY (factorpos : Float ; factorneg : Float ):Float ;
Parâmetros:
factorpos: Float ;Fatorpositivousadoparaocálculodavolatilidadeemmovimentosdealta.
factorneg: Float ;Fatornegativousadoparaocálculodavolatilidadeemmovimentosdebaixa.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordafunção TWOMVVOLATILITY ().
1
2
3begin
Plot (TWOMVVOLATILITY (5.5,5.5));
end
194

--- PÁGINA 205 ---
Exemplo Gráfico:
195

--- PÁGINA 206 ---
19.2 Função ADX
Disponível em todas versões.
A função ADX()retorna o valor do indicador de acordo com os períodos desejados. O ADX()mede a força do
movimentonãoimportandoadireçãodatendência.
Sintaxe:
Função ADX(Periodo : Integer ; Media : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador:
Media: Integer ;Períodoutilizadonomomentodocálculodamédiautilizadanoindicador:
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”ADX”,considerandoPeriodode 9eMediade
9paraocálculo.
1
2
3begin
Plot (ADX(9,9));
end
Exemplo Gráfico:
196

--- PÁGINA 207 ---
19.3 Função AccAgressSaldo
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
AccAgressSaldo ()éumindicadorde”TR-AcúmulodeAgressão-Saldo”desenvolvidopelaScalperTrader.
Sintaxe:
Função AccAgressSaldo (Tipo : Integer ):Float ;
Parâmetros:
Tipo: Integer ;Tipodevolumeparaocálculo:
–0:Financeiro.
–1:Quantidade.
–2:Negócios.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovolumedequantidadedoindicador”TR-AcúmulodeAgressão-
Saldo”.
1
2
3begin
Plot (AccAgressSaldo (1));
end
Exemplo Gráfico:
197

--- PÁGINA 208 ---
19.4 Função AccuDistr
Disponível em todas versões.
O indicador AccuDistr ()relaciona preço e volume, tendo por base a idéia de que moviemntos significativos são
acompanhadospelovolume,sendomuitoutilizadoatravésdedivergências.
Sintaxe:
Função AccuDistr (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador.
1
2
3begin
Plot (AccuDistr );
end
Exemplo Gráfico:
198

--- PÁGINA 209 ---
19.5 Função AccuDistrW
Disponível para produtos da BlackArrow ou Scalper Global.
Afunção AccuDistrW ()éumindicadordemomentumcriadoporLarryWilliamsqueavaliaarelaçãoentrepreçoe
volume. Suafunçãoéindicaradireçãodapressãodomercado,sejadeacumulação(alta)oudistribuição(baixa).
Sintaxe:
Função AccuDistrW (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador.
1
2
3begin
Plot (AccuDistrW );
end
Exemplo Gráfico:
199

--- PÁGINA 210 ---
19.6 Função AdaptiveMovingAverage
Disponível em todas versões.
DescobertoedesenvolvidoporPerryKaufman,Afunção AdaptiveMovingAverage ()éutilizadaparaconstruiruma
média móvel com pouca sensibilidade ao ruído das series de preços e é caracterizado por levar pouco tempo para
detectarumatendência.
Sintaxe:
Função AdaptiveMovingAverage (Periodo : Integer ; FastSC : Integer ; SlowSC : Integer )
:Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
FastSC: Integer ;Determinaoperíodoparaoindicador FastStochastic .
SlowSC: Integer ;Determinaoperíodoparaoindicador SlowStochastic .
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador,considerando 10períodosparaocálculo,com
2períodospara FastStochastic ,e30para SlowStochastic .
1
2
3begin
Plot (AdaptiveMovingAverage (10,2,30));
end
Exemplo Gráfico:
200

--- PÁGINA 211 ---
19.7 Função AgressionVolBalance
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
AgressionVolBalance ()éumindicadorde”TR-AcúmulodeAgressão-Saldo”desenvolvidopelaScalperTrader.
Sintaxe:
Função AgressionVolBalance (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”TR-AcúmulodeAgressão-Saldo”.
1
2
3begin
Plot (AgressionVolBalance );
end
Exemplo Gráfico:
201

--- PÁGINA 212 ---
19.8 Função AgressionVolBuy
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
AgressionVolBuy ()éumindicadorde”TR-VolumedeAgressão-Compra”desenvolvidopelaScalperTrader.
Sintaxe:
Função AgressionVolBuy (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”TR-VolumedeAgressão-Compra”.
1
2
3begin
Plot (AgressionVolBuy );
end
Exemplo Gráfico:
202

--- PÁGINA 213 ---
19.9 Função AgressionVolSell
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
AgressionVolSell ()éumindicadorde”TR-VolumedeAgressão-Venda”desenvolvidopelaScalperTrader.
Sintaxe:
Função AgressionVolSell (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”TR-VolumedeAgressão-Venda”.
1
2
3begin
Plot (AgressionVolSell );
end
Exemplo Gráfico:
203

--- PÁGINA 214 ---
19.10 Função AllTimeHigh
Disponível em todas versões.
Afunção AllTimeHigh ()retornaovalormáximohistóricoalcançadopeloativo.
Sintaxe:
Função AllTimeHigh (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador.
1
2
3begin
Plot (AllTimeHigh );
end
Exemplo Gráfico:
204

--- PÁGINA 215 ---
19.11 Função AllTimeLow
Disponível em todas versões.
Afunção AllTimeLow ()retornaovalormínimohistóricoalcançadopeloativo.
Sintaxe:
Função AllTimeLow (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador.
1
2
3begin
Plot (AllTimeLow );
end
Exemplo Gráfico:
205

--- PÁGINA 216 ---
19.12 Função ArmsEaseOfMov
Disponível em todas versões.
Afunção ArmsEaseOfMov ()retornaovalordoindicador”ArmsEaseofMovement”deacordocomoperíodoetipo
de média desejados. O indicador combina preço e volume para indicar o nível de facilidade com o qual os preços
estãosemovimentando.
Sintaxe:
Função ArmsEaseOfMov (Media : Integer ; Tipo: Integer ):Float ;
Parâmetros:
Media: Integer ;Períododamédiautilizadanomomentodocálculodoindicador:
Tipo: Integer ;Determinaotipodamédiautilizada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Exemplo de uso:
No exemplo a seguir, será plotado no gráfico o valor do indicador ”Arms Ease of Movement”, considerando 9
períodosparaotipodemédiaexponencial( 1).
1
2
3begin
Plot (ArmsEaseOfMov (9,1));
end
Exemplo Gráfico:
206

--- PÁGINA 217 ---
19.13 Função AroonLin
Disponível em todas versões.
Afunção AroonLin ()retornaovalordoindicadordeacordocomoperíododesejado. Oindicadoréformadopor
doiscomponentesqueajudamaidentificaraexistênciadeumatendênciaetambémamedirasuaforça.
Sintaxe:
Função AroonLin (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador:
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador,considerando 9períodosparaocálculo.
1
2
3begin
Plot (AroonLin (9));
end
Exemplo Gráfico:
207

--- PÁGINA 218 ---
19.14 Função AroonOsc
Disponível em todas versões.
Afunção AroonOsc ()retornaovalordoindicadordeacordocomoperíododesejado. O AroonOsc ()sinalizauma
tendênciadealtaquandoestáacimadezeroeumatendênciadebaixaquandoestáabaixodovalorzero. Adistância
dalinhazeroindicaaforçadatendência.
Sintaxe:
Função AroonOsc (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador:
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador,considerando 9períodosparaocálculo.
1
2
3begin
Plot (AroonOsc (9));
end
Exemplo Gráfico:
208

--- PÁGINA 219 ---
19.15 Função AutoFibonacci
Disponível em todas versões.
A função AutoFibonacci ()retorna o valor do indicador de acordo com o período desejado. O indicador é uma
ferramentaclássicanasplataformasmundialmenteconhecidasusandoporpadrão144períodosclássicosepodeser
personalizado. Aferramentaoferececonfortoepraticidadeaoanalisarmuitosativosnomesmolayout.
Sintaxe:
Função AutoFibonacci (Periodo : Integer ; Níveis: Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador:
Níveis: Integer ;Determinaquantosníveisserãogeradosparaoindicador,limitadoem8,eseguindoaordem:
–0%.
–23.6%.
–38.2%.
–50%.
–61.8%.
–78.6%.
–100%.
–161.8%.
Exemplos de uso:
Noexemploaseguir, seráplotadonográficoovalordoindicador, considerandoumperíodode 144candles, e
gerandooitoníveis. Aonãoespecificaroníveldesejado,opadrãoserásempreretornaronível 0(0%).
1
2
3begin
Plot (AutoFibonacci (144,8));
end
209

--- PÁGINA 220 ---
Exemplo Gráfico:
Tambémépossívelescolherqualoníveldesejadopassandocomoparâmetronofinaldachamada. Noexemploa
seguir,seráplotadonográficoovalordoindicador,considerandoumperíodode 144candles,gerandooitoníveis
eretornandoovalordonível 4(50%).
1
2
3begin
Plot (AutoFibonacci (144,8)|3|);
end
Exemplo Gráfico:
210

--- PÁGINA 221 ---
19.16 Função AutoFibonacciCustom
Disponível em todas versões.
Afunção AutoFibonacciCustom ()retornaovalordoindicador”AutoFibonacci”deacordocomoperíododesejado.
O indicadoré uma ferramenta clássica nas plataformas mundialmente conhecidas usando por padrão 144 períodos
clássicosepodeserpersonalizado. Aferramentaoferececonfortoepraticidadeaoanalisarmuitosativosnomesmo
layout.
Sintaxe:
Função AutoFibonacciCustom (Periodo : Integer ; Valor do Nível: Float ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador:
Valor do Nível: Integer ;Determinaqualovalordonívelutilizadoparaocálculodoindicador.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador,considerandoumperiodode 144candleseo
valordonívelem 75.5%.
1
2
3begin
Plot (AutoFibonacciCustom (144,75.5 ));
end
Exemplo Gráfico:
211

--- PÁGINA 222 ---
19.17 Função Averan
Disponível em todas versões.
CriadoporEduardoGarufi,doSST,afunção Averan ()permitemediraamplitudeevolatilidadedoativo.
Sintaxe:
Função Averan (Period : Integer ; nStdDevs: Integer ):Float ;
Parâmetros:
Period: Integer ;Períodoutilizadonomomentodocálculodoindicador
nStdDevs: Integer ;Númerodedesviospadrãoutilizadosparadefinirafaixadevariação.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador.
1
2
3begin
Plot (Averan (200,2));
end
Exemplo Gráfico:
212

--- PÁGINA 223 ---
19.18 Função AvgAgent
Disponível nas versões Ultra ou com a Automação de Estratégias 2.
Afunção AvgAgent ()retornaopreçomédiofiltradopeloAgente.
Sintaxe:
Função AvgAgent (AgentID : Integer ; Período : Integer ):Float ;
Parâmetros:
AgentID: Integer ;IDdoAgenteescolhido.
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção AvgAgent ().
1
2
3begin
Plot (AvgAgent (baItau ,9));
end
Exemplo Gráfico:
213

--- PÁGINA 224 ---
19.19 Função AvgAgrBuySell
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
DesenvolvidopelaScalperTrader,afunção AvgAgrBuySell ()retornaovalordoindicador”TR-AgressãoMédia-
CompraeVenda”deacordocomosparâmetrosdesejados.
Sintaxe:
Função AvgAgrBuySell (AlertaVariacoes : Integer ; TipoDeVolume: Integer ;
TipoDeDesenho: Integer ):Float ;
Parâmetros:
AlertaVariacoes: Integer ;Períodoutilizadonomomentodocálculodoindicador:
TipoDeVolume: Integer ;Determinaqualtipodevolumeseráobtido:
–0:Financeiro.
–1:Quantidade.
TipoDeDesenho: Integer ;Relaçãoentrecompraevenda:
–0:CompraeVenda.
–1:Compra/Venda.
–2:Compra-Venda.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador,considerando 3variações,aquantidadeetipo
dedesenho.
1
2
3begin
Plot (AvgAgrBuySell (3,1,0));
end
214

--- PÁGINA 225 ---
Exemplo Gráfico:
215

--- PÁGINA 226 ---
19.20 Função AvgAgrTotal
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
Desenvolvido pela Scalper Trader, a função AvgAgrTotal ()retorna o valor do indicador ”TR - Agressão Média -
Total”deacordocomosparâmetrosdesejados.
Sintaxe:
Função AvgAgrTotal (AlertaVariacoes : Integer ; TipoDeVolume: Integer ; TipoDeDesenho:
Integer ):Float ;
Parâmetros:
AlertaVariacoes: Integer ;Númerodevariações.
TipoDeVolume: Integer ;Determinaqualtipodevolumeseráobtido:
–0:Financeiro.
–1:Quantidade.
TipoDeDesenho: Integer ;Relaçãoentrecompraevenda:
–0:CompraeVenda.
–1:Compra/Venda.
–2:Compra-Venda.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador,considerando 3variações,aquantidadeetipo
dedesenho.
1
2
3begin
Plot (AvgAgrTotal (3,1,0));
end
216

--- PÁGINA 227 ---
Exemplo Gráfico:
217

--- PÁGINA 228 ---
19.21 Função AvgSeparation
Disponível em todas versões.
Afunção AvgSeparation ()retornaovalordoindicador”AfastamentoMédio”deacordocomosparâmetrosdeseja-
dos. Esteindicador,mensuraosafastamentosproporcionaisdospreçosemrelaçãoàumamédiamóvelpreviamente
selecionada.
Sintaxe:
Função AvgSeparation (Media : Integer ; Tipo: Integer ):Float ;
Parâmetros:
Media: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualtipodemédiaseráconsiderada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”AfastamentoMédio”,considerando 21períodos
etipoexponencialparaocálculo.
1
2
3begin
Plot (AvgSeparation (21,1));
end
Exemplo Gráfico:
218

--- PÁGINA 229 ---
19.22 Função AvgTrueRange
Disponível em todas versões.
Afunção AvgTrueRange ()retornaovalordoindicador”TrueRange”deacordocomosparâmetrosdesejados. Este
indicadorajudaamediravolatilidadedeumativo.
Sintaxe:
Função AvgTrueRange (Periodo : Integer ; Tipo: Integer ):Float ;
Parâmetros:
Período: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualtipodemédiaseráconsiderada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”TrueRange”,considerando 5períodos,etipo
demédiaponderadaparaocálculo.
1
2
3begin
Plot (AvgTrueRange (5,3));
end
Exemplo Gráfico:
219

--- PÁGINA 230 ---
19.23 Função BTCPrice
Disponível com o pacote opcional NeloCripto.
Afunção BTCPrice ()retornaovalordoindicadorquemostraacomparaçãoentreBITFUT(BitcoinnaB3)eoBitcoin
em exchanges de criptomoedas. Indicador é formado por duas linhas: uma delas é o preço do ativo BITFUT (B3)
eaoutraéopreçodoBTCdasexchangesdecriptomoedas. Quandoocorreumalargamentodistanciandoesses2
preços,normalmenteindicamomentosdeoportunidade.
Sintaxe:
Função BTCPrice (SignalType : Integer ):Float ;
Parâmetros:
SignalType: Integer ;Determinaosignaldoindicador.
–0:BTC/BRL.
–1:BTC/USD.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicadoremBTC/USD.
1
2
3begin
Plot (BTCPrice (1));
end
Exemplo Gráfico:
220

--- PÁGINA 231 ---
19.24 Função BTCSpread
Disponível com o pacote opcional NeloCripto.
Afunção BTCSpread ()retornaovalordoindicadorquecalculaospreadentreopreçodoBITFUT(BitcoinnaB3)
eopreçodeBitcoinemexchangesdecriptomoedas. Foidesenvolvidoparaidentificarmomentosdedistorçãonos
preços,queaumentaospreadepodeindicarsobrecompraousobrevenda.
Sintaxe:
Função BTCPrice (SignalType : Integer ):Float ;
Parâmetros:
SignalType: Integer ;Determinaosignaldoindicador.
–0:BTC/BRL.
–1:BTC/USD.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicadoremBTC/USD.
1
2
3begin
Plot (BTCSpread (1));
end
Exemplo Gráfico:
221

--- PÁGINA 232 ---
19.25 Função BalanceAgent
Disponível nas versões Ultra ou com a Automação de Estratégias 2.
Afunção BalanceAgent ()retornaosaldofiltradopeloagente.
Sintaxe:
Função BalanceAgent (AgentID : Integer ; Período : Integer ):Float ;
Parâmetros:
AgentID: Integer ;IDdoAgenteescolhido.
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção AvgAgent ().
1
2
3begin
Plot (BalanceAgent (baItau ,9));
end
Exemplo Gráfico:
222

--- PÁGINA 233 ---
19.26 Função BalanceOfPower
Disponível em todas versões.
Afunção BalanceOfPower ()retornaovalordoindicador”BalançadoPoder”deacordocomosparâmetrosdeseja-
dos. Esteindicadormedeaforçadecompradoresvsvendedores,avaliandoacapacidadedecadaumdosladosde
levarospreçosaseuextremo.
Sintaxe:
Função BalanceOfPower (Media : Integer ; Tipo: Integer ):Float ;
Parâmetros:
Media: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualtipodemédiaseráconsiderada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”BalançadoPoder”,considerando 14períodos,
eotipodemédiaexponencialparaocálculo.
1
2
3begin
Plot (BalanceOfPower (14,1));
end
Exemplo Gráfico:
223

--- PÁGINA 234 ---
19.27 Função BearPower
Disponível em todas versões.
A função BearPower ()retorna o valor do indicador ”Bear Power” de acordo com os parâmetros desejados. Este
indicador procura mostrar a força dos vendedores. Quanto mais negativo for, maior é a pressão de venda sendo
exercidasobreoativo.
Sintaxe:
Função BearPower (Periodo : Integer ; Tipo Média: Integer ; Periodo Média: Integer ):
Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo Média: Integer ;Determinaqualtipodemédiaseráconsiderada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Periodo Média: Integer ;Períododamédiautilizadanomomentodocálculodoindicador.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”BalançadoPoder”,considerando 13períodos,
eotipodemédiaaritméticaparaocálculo.
1
2
3begin
Plot (BearPower (13,0,0));
end
224

--- PÁGINA 235 ---
Exemplo Gráfico:
225

--- PÁGINA 236 ---
19.28 Função BollingerBPerc
Disponível em todas versões.
Afunção BollingerBPerc ()retornaovalordoindicador”Bollingerb%”deacordocomoperíodoetipodemédia
desejados. Nesteindicadordas”BandasdeBollinger,quandoovalormaiorque100,elesinalizaqueospreçosestão
sobreabandasuperiore,quandomenorque0,mostraqueospreçosestãosobabandainferior.
Sintaxe:
Função BollingerBPerc (Desvio : Float ; PeriodoMédia: Integer ; Tipo: Integer ):Float ;
Parâmetros:
Desvio: Float ;Desvioutilizadonomomentodocálculodoindicador.
PeriodoMédia: Integer ;Períododamédiautilizadanomomentodocálculodoindicador:
Tipo: Integer ;Determinaotipodamédiautilizada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”BollingerBandWidth”,considerando 2como
desvio, 20períodosetipodemédiaPonderada( 3).
1
2
3begin
Plot (BollingerBPerc (2,20,3));
end
226

--- PÁGINA 237 ---
Exemplo Gráfico:
227

--- PÁGINA 238 ---
19.29 Função BollingerBandW
Disponível em todas versões.
Afunção BollingerBandW ()retornaovalordoindicador”BollingerBandWidth”deacordocomoperíodoetipode
médiadesejados. Esteindicadorderivadodas”BandasdeBollinger”medealarguradasbandascomoumpercentual
desuamédiamóvel. Aocorrênciadeestritamentos,normalmente,antecedegrandesmovimentos.
Sintaxe:
Função BollingerBandW (Desvio : Float ; PeriodoMédia: Integer ; Tipo: Integer ):Float ;
Parâmetros:
Desvio: Float ;Desvioutilizadonomomentodocálculodoindicador.
PeriodoMédia: Integer ;Períododamédiautilizadanomomentodocálculodoindicador:
Tipo: Integer ;Determinaotipodamédiautilizada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”BollingerBandWidth”,considerando 2como
desvio, 20períodosetipodemédiaexponencial( 1).
1
2
3begin
Plot (BollingerBandW (2,20,1));
end
228

--- PÁGINA 239 ---
Exemplo Gráfico:
229

--- PÁGINA 240 ---
19.30 Função BollingerBands
Disponível em todas versões.
Afunção BollingerBands ()retornaovalordoindicador”BandasdeBollinger”deacordocomoperíodoetipode
médiadesejados. Esteindicadoréformadoporduaslinhas,umasuperioreoutrainferior. Sãotraçadasaumdesvio
padrãodedistânciaapartirdeumamédiamóvel.
Sintaxe:
Função BollingerBands (Desvio : Float ; PeriodoMédia: Integer ; Tipo: Integer ):Float ;
Parâmetros:
Desvio: Float ;Desvioutilizadonomomentodocálculodoindicador.
PeriodoMédia: Integer ;Períododamédiautilizadanomomentodocálculodoindicador:
Tipo: Integer ;Determinaotipodamédiautilizada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–0:Superior;
–1:Inferior.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordalinhasuperiordoindicador”BandasdeBollinger”,con-
siderando 2comodesvio, 20períodosetipodemédiaaritmética( 0).
1
2
3begin
Plot (BollingerBands (2,20,0)|0|);
end
230

--- PÁGINA 241 ---
Exemplo Gráfico:
231

--- PÁGINA 242 ---
19.31 Função BullPower
Disponível em todas versões.
Afunção BullPower ()retornaovalordoindicador”BullPower”deacordocomoperíodoetipodemédiadesejados.
Neste indicador das bandas de Bollinger, quando o valor maior que 100, ele sinaliza que os preços estão sobre a
bandasuperiore,quandomenorque0,mostraqueospreçosestãosobabandainferior.
Sintaxe:
Função BullPower (Periodo : Integer ; Tipo Média: Integer ; Periodo Média: Integer ):
Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo Média: Integer ;Determinaotipodamédiautilizada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Periodo Média: Integer ;Períodoutilizadonomomentodocálculodamédiautilizadanoindicador.
Exemplo de uso:
No exemplo a seguir, será plotado no gráfico o valor do indicador ”Bull Power”, considerando 21períodos, e 9
períodosparaamédiaaritmética( 0).
1
2
3begin
Plot (BullPower (21,9,0));
end
232

--- PÁGINA 243 ---
Exemplo Gráfico:
233

--- PÁGINA 244 ---
19.32 Função CCI
Disponível em todas versões.
A função CCI()retorna o valor do indicador ”CCI” de acordo com o período desejado. Este indicador mede a
variaçãodopreçodeumativoemrelaçãoasuamédia. Bastanteutilizadocomdivergênciaseníveisdesobrecom-
pra/sobrevenda.
Sintaxe:
Função CCI(Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”CCI”,considerando 14períodosparaocálculo.
1
2
3begin
Plot (CCI(14));
end
Exemplo Gráfico:
234

--- PÁGINA 245 ---
19.33 Função ChaikinMoneyFlow
Disponível em todas versões.
Afunção ChaikinMoneyFlow ()retornaovalordoindicador”ChaikinMoneyFlow”deacordocomoperíododesejado.
Esteindicadorutilizarelaçõesdepreçoevolune. Quandomenorquezero,indicamaiorpressãovendedora. Quando
maior,indicaforçacompradora.
Sintaxe:
Função CCI(Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”ChaikinMoneyFlow”,considerando 21período
paraocálculo.
1
2
3begin
Plot (ChaikinMoneyFlow (21));
end
Exemplo Gráfico:
235

--- PÁGINA 246 ---
19.34 Função ChaikinOsc
Disponível em todas versões.
Afunção ChaikinOsc ()retornaovalordoindicador”OsciladorChaikin”deacordocomasmédiasdesejadas. Este
indicadorrelacionapreçoevolume. Suaprincipalutilizaçãoéatravésdaidentificaçãodedivergências.
Sintaxe:
Função ChaikinOsc (MediaLonga : Integer ; MediaCurta : Integer ):Float ;
Parâmetros:
MediaLonga: Integer ;DeterminaoperíododaMédiaLongaparaformaçãodocálculo.
MediaCurta: Integer ;DeterminaoperíododaMédiaCurta.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”OsciladorChaikin”,considerando 10períodos
paraamédialonga,e 3paraacurta.
1
2
3begin
Plot (ChaikinOsc (10,3));
end
Exemplo Gráfico:
236

--- PÁGINA 247 ---
19.35 Função ChainSetup
Disponível em todas versões.
Afunção ChainSetup ()retornaovalordoindicador”ChainSetup”deacordocomasmédiasdesejadas. Esteindicador
do ”Café com Trade” consolida os indicadores Trix, Macd, Tilson + volume e agressão financeira, como forma de
ampliaraanálisedoTapeReading,indicandoatendênciadoativoeverificandoomelhor’+’momentodeentrar,
poisindicabaixaealtaliquidez+explosãodevolatilidades.
Sintaxe:
Função ChainSetup (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoodadodoindicador”ChainSetup”.
1
2
3begin
Plot (ChainSetup );
end
Exemplo Gráfico:
237

--- PÁGINA 248 ---
19.36 Função COHENPRICEWAVE
Disponível em todas versões.
Afunção COHENPRICEWAVE ()retornaovalordoindicador”Cohen-PriceWave”. Esteindicadorindicaadiferença
absolutadepreçosdecadaswingnoatico. Juntocomo”WeisWave”,servecomoumindicadordeexaustão.
Sintaxe:
Função COHENPRICEWAVE (Ticks : Integer ):Float ;
Parâmetros:
Ticks: Integer ;Níveisdepreço.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooretornodoindicador,considerando 15ticksparaocálculo.
1
2
3begin
Plot (COHENPRICEWAVE (15));
end
Exemplo Gráfico:
238

--- PÁGINA 249 ---
19.37 Função COHENWEISWAVE
Disponível em todas versões.
A função COHENWEISWAVE ()retorna o valor do indicador ”Cohen - Price Wave”. Este indicador indica a soma do
volumedecadaswingnoativo. Servecomoumindicadordeexaustão.
Sintaxe:
Função COHENWEISWAVE (Ticks : Integer ):Float ;
Parâmetros:
Ticks: Integer ;Relacionadoaovalordeentradadoindicador.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooretornodoindicador,considerando 15ticksparaocálculo.
1
2
3begin
Plot (COHENWEISWAVE (15));
end
Exemplo Gráfico:
239

--- PÁGINA 250 ---
19.38 Função ContadorDeCandle
Disponível em todas versões.
Afunção ContadorDeCandle ()contabilizaesinalizadeformanuméricaeorganizadanográficoonúmerodecada
candle.
Sintaxe:
Função ContadorDeCandle (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoonúmerodocandleatual.
1
2
3begin
Plot (ContadorDeCandle ());
end
Exemplo Gráfico:
240

--- PÁGINA 251 ---
19.39 Função DTOscillator
Disponível em todas versões.
A função DTOscillator ()retorna o valor do indicador ”DT Oscillator”, de acordo com o período desejado. Este
indicadoréformadotraçando-seumcanalcomosvaloresdemáximaaltaedamínimabaixadoperíodoescolhido. É
umaversãosuavizadadoIFREstocástico. Consisteemduaslinhasqueproduzemsinaisdecompraevendabaseados
nosseuscruzamentos.
Sintaxe:
Função DTOscillator (PeriodoEstocastico : Integer ; PeriodoSK : Integer ; TipoSK :
Integer ; PeriodoSD : Integer ; TipoSD : Integer ):Float ;
Parâmetros:
PeriodoEstocastico: Integer ;Períodoutilizadonomomentodocálculodoindicador.
PeriodoSK: Integer ;Períodoreferenteaoparâmetro”PeríodoSK”.
TipoSK: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
PeriodoSD: Integer ;Períodoreferenteaoparâmetro”PeríodoSD”.
TipoSD: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–[0:]Linha1.
–[1:]Linha2.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”DTOscillator”,considerando 12(PeriodoEsto-
castico), 8(PeriodoSK), 5(PeriodoSD)períodos,etipoaritmétia( 0)paraocálculo.
1
2
3begin
Plot (DTOscillator (12,8,0,5,0)|1|);
end
241

--- PÁGINA 252 ---
Exemplo Gráfico:
242

--- PÁGINA 253 ---
19.40 Função DarvasBox
Disponível em todas versões.
Afunção DarvasBox ()retornaovalordoindicador”DarvasBox”.
Sintaxe:
Função DarvasBox (): Float ;
Parâmetros:
Linha: Integer [Opcional] ;Determinaqualdado(CompraouVenda)seráobtido:
–0:Compra.
–1:Venda.
Exemplo de uso:
No exemplo a seguir, será plotado no gráfico os valores do indicador ”Darvas Box” com parâmetro de linha 1
(Venda).
1
2
3begin
Plot (DarvasBox |1|);
end
Exemplo Gráfico:
243

--- PÁGINA 254 ---
19.41 Função DecisionPoints
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
Afunção DecisionPoints ()retornaovalordoindicador”PontosdeDecisão”.
Sintaxe:
Função DecisionPoints (Tipo : Integer ; Linha : Integer ):Float ;
Parâmetros:
Tipo: Integer ;Determinaotipo:
–0:Preço;
–1:Volume;
–2:FaixasdeVolume;
–3:Variação.
Linha: Integer ;Retornaodadodeumtipoespecífico:
Para Tipo=0:
–0:Abertura;
–1:Máxima;
–2:Mínima;
–3:Fechamento;
–4:Ajuste.
Para Tipo=1:
–0:Dadovolume;
–1:Dadovolume;
–2:Dadovolume.
Para Tipo=2:
–0:Dadovolume.
Para Tipo=3:
–0:Dadovariaçãolinhainferior(-2%);
–1:Dadovariaçãolinhainferior(-1%);
–2:Dadovariaçãolinhasuperior(1%);
–3:Dadovariaçãolinhasuperior(2%).
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoodadoreferenteàmáxima( 1).
1
2
3begin
Plot (DecisionPoints (0,1));
end
244

--- PÁGINA 255 ---
Exemplo Gráfico:
245

--- PÁGINA 256 ---
19.42 Função DiPDiM
Disponível em todas versões.
Afunção DiPDiM ()retornaovalordoindicador”DI+/DI-”,deacordocomoperíododesejado. Esteindicadorutiliza
oconceitodemovimentodirecional,ondesinaisdecomprassãogeradosquandoDI+cruzaparacimaDI-,sinaisde
vendasãogeradosquandoDI-cruzaparabaixoDI+. Deve-seesperarporconfirmaçõesnospreços.
Sintaxe:
Função DiPDiM (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–0:DI+;
–1:DI-.
Exemplo de uso:
No exemplo a seguir, será plotado no gráfico o valor DI- ( 1) do indicador ”DI+/DI-”, considerando 14período
paraocálculo.
1
2
3begin
Plot (DiPDiM (14)|1|);
end
Exemplo Gráfico:
246

--- PÁGINA 257 ---
19.43 Função DiDiIndex
Disponível em todas versões.
Afunção DiDiIndex ()retornaovalordoindicador”DidiIndex”,deacordocomoperíodoetiposdemédiasdesejados.
Sintaxe:
Função DiDiIndex (PeriodoMediaR : Integer ; TipoR : Integer ; PeriodoMedia1 : Integer ;
Tipo1 : Integer ; PeriodoMedia2 : Integer ; Tipo2 : Integer ;): Float ;
Parâmetros:
PeriodoMediaR: Integer ;Parâmetroparaoperíodoutilizadonocálculodamédiadereferênciadoindicador.
TipoR: Integer ;Determinaqualmédiaseráconsiderada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
PeriodoMedia1: Integer ;Períodoutilizadonocálculodamédia1doindicador.
Tipo1: Integer ;Determinaqualmédiaseráconsiderada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
PeriodoMedia2: Integer ;Períodoutilizadonocálculodamédia2doindicador.
Tipo2: Integer ;Determinaqualmédiaseráconsiderada:
–0:Aritmética;
–1:Exponencial;
–2:WellesWilder;
–3:Ponderada.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–0:Linha;
–1:Linha2.
Exemplo de uso:
No exemplo a seguir, será plotado no gráfico o valor da linha 2, considerando 8(Média de Referência), 3
(Média1)e 20(Média2)períodos,aplicandootipodemédiaaritmética( 0)paraocálculo.
1
2
3begin
Plot (DidiIndex (8,0,3,0,20,0 )|1|);
end
247

--- PÁGINA 258 ---
Exemplo Gráfico:
248

--- PÁGINA 259 ---
19.44 Função DivergenceDetector
Disponível em todas versões.
Afunção DivergenceDetector ()retornaospontosdealtaoubaixa(PHouPL)doativodeacordocomonúmero
depivôsàesquerdaedireitadefinidosnosparâmetrosouretornaaquantidadedeindicadoresconsideradosnaquele
candlerelacionadosaosindicadoresconsideradosnadivergência. Esseindicadorretornaospontosidentificadospelo
indicador”DetectordeDivergências”.
Sintaxe:
Função DivergenceDetector (NumLeftCandles : Integer ; NumRigthCandles : Integer ; MACD
:Boolean ; MACDHistogram : Boolean ; RSI : Boolean ; Stochastic : Boolean ; CCI :
Boolean ; Momentum : Boolean ; OBV : Boolean ; Diosc : Boolean ; VWmacd : Boolean ;
ChaikinMoneyFlow : Boolean ; MoneyFlowIndex : Boolean ):Float ;
Parâmetros:
NumLeftCandles: Integer ;Númerodecandlesàconsiderarcomopivôàesquerda(apenasinfluenciacálculo
dePHePL).
NumRigthCandles: Integer ;Númerodecandlesàconsiderarcomopivôàdireita(apenasinfluenciacálculo
dePHePL).
MACD: Boolean [Opcional] ;ParâmetroopcionalqueindicasedeveconsideraroindicadorMACDparacálculo
dedivergênciadosindicadores.
MACDHistogram: Boolean [Opcional] ;ParâmetroopcionalqueindicasedeveconsideraroindicadorMACD
Histogramaparacálculodedivergênciadosindicadores.
RSI: Boolean [Opcional] ;ParâmetroopcionalqueindicasedeveconsideraroindicadorRSIparacálculode
divergênciadosindicadores.
Stochastic: Boolean [Opcional] ;ParâmetroopcionalqueindicasedeveconsideraroindicadorEstocástico
paracálculodedivergênciadosindicadores.
CCI: Boolean [Opcional] ;ParâmetroopcionalqueindicasedeveconsideraroindicadorCCIparacálculode
divergênciadosindicadores.
Momentum: Boolean [Opcional] ;Parâmetro opcional que indica se deve considerar o indicador Momentum
paracálculodedivergênciadosindicadores.
OBV: Boolean [Opcional] ;ParâmetroopcionalqueindicasedeveconsideraroindicadorOBVparacálculode
divergênciadosindicadores.
Diosc: Boolean [Opcional] ;ParâmetroopcionalqueindicasedeveconsideraroindicadorDioscparacálculo
dedivergênciadosindicadores.
VWmacd: Boolean [Opcional] ;Parâmetro opcional que indica se deve considerar o indicador VWmacd para
cálculodedivergênciadosindicadores.
ChaikinMoneyFlow: Boolean [Opcional] ;Parâmetro opcional que indica se deve considerar o indicador
ChaikinMoneyFlowparacálculodedivergênciadosindicadores.
MoneyFlowIndex: Boolean [Opcional] ;ParâmetroopcionalqueindicasedeveconsideraroindicadorMon-
eyFlowIndexparacálculodedivergênciadosindicadores.
Index: Integer [Opcional] ;Determinaqualtipodecálculoseráobtido:
–0:RetornaosvaloresdePHePLparaoativo,ondeosresultadossãodaseguinteforma:
–[‐1:]casoocandleanalisadosejaPL.
249

--- PÁGINA 260 ---
–[0:]casonãosejanemPLnemPH.
–[1:]casoocandleanalisadosejaPH.
–1:Retornaosvaloresrelacionadosàdivergênciadosindicadoresdefinidosdaseguinteforma:
–Somaaquantidadedeindicadoresqueindicamdivergêncianaquelecandleeretornaovalorpositivocaso
sejaumcandlepositivoounegativocasosejaumcandlenegativo.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalorrelacionadoaPH/PLdocandleaseranalisadoconsiderando
os valores passados para o NumLeftCandles eNumRigthCandles (note que esse valor é independente dos
indicadorespassadosopcionalmenteporparâmetro).
1
2
3begin
Plot (DivergenceDetector (5,5)|0|);
end
Exemplo Gráfico:
No exemplo a seguir, será plotado no gráfico o valor relacionado à soma dos indicadores que detectaram al-
gumadivergência,ounenhuma,nocandleanalisado. Nesseexemploabaixo,estamosconsiderandoapenasos
indicadores MACD,MACD Histograma eRSIparaocálculo.
1
2
3begin
Plot (DivergenceDetector (5,5,True ,True ,True )|1|);
end
250

--- PÁGINA 261 ---
Exemplo Gráfico:
251

--- PÁGINA 262 ---
19.45 Função DonchianCH
Disponível em todas versões.
A função DonchianCH ()retorna o valor do indicador ”Canal Donchian”, de acordo com o período desejado. Este
indicadoréformadotraçando-seumcanalcomosvaloresdemáximaaltaedamínimabaixadoperíodoescolhido.
Sintaxe:
Função DonchianCh (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–[0:]Média;
–[1:]Superior;
–[2:]Inferior.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordalinhainferiordoindicador”CanalDonchian”,considerando
20períodosparaocálculo.
1
2
3begin
Plot (DonchianCh (20)|2|);
end
Exemplo Gráfico:
252

--- PÁGINA 263 ---
19.46 Função Envelope
Disponível em todas versões.
A função Envelope ()retorna o valor do indicador ”Envelope”, de acordo com o período e média desejados. São
linhas traçadas a uma distância percentual fixa de uma média móvel. Variando-se os parâmetrso do envelope é
possívelidentificarníveisdepreçosnosquaiscorreções/revisõessãoprováveis.
Sintaxe:
Função Envelope (Desvio : Float ; PeriodoMedia : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Desvio: Float ;Percentualutilizadonomomentodocálculodoindicador.
PeriodoMedia: Integer ;Períodoutilizadoparaocálculodamédia.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–[0:]Pontomédio;
–[1:]Superior;
–[2:]Inferior.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoodadodalinhasuperiordoindicador”Envelope”,considerando 5.0
comopercentual, 20períodosetipodemédiaaritmética( 0)paraocálculo.
1
2
3begin
Plot (Envelope (5.0,20,0)|1|);
end
253

--- PÁGINA 264 ---
Exemplo Gráfico:
254

--- PÁGINA 265 ---
19.47 Função Euroinvest
Disponível em todas versões.
A função Euroinvest ()retorna o valor do indicador ”Euroinvest”, conforme os parâmetros determinados. Este
indicadordetendênciabaseadoemTrendFollowingéutilizadoparaverificalçaodeestadodorobôEuroinvestTrend.
Sintaxe:
Função Euroinvest (Risco : Integer ; Modo de Cálculo : Integer ; Periodo : Integer ;
Desvio : Float ; Usar VWAP : Boolean ; Usar Atr : Boolean ):Float ;
Parâmetros:
Risco: Integer ;Determinaotipodeperfil:
–[0:]Zero;
–[1:]Um;
–[2:]Dois;
–[3:]Três.
Modo de Cálculo: Integer ;Determinaotipodemédia.
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Periodo: Integer ;Períodoconsideradoparaocálculodamédia.
Desvio: Float ;Desviodamédia.
Usar VWAP: Boolean ;DeterminaseoVWAPseráutiizado.
Usar Atr: Boolean ;DeterminaahabilitaçãodoStopATR.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção,considerandooperfilZero( 0),tipodemédia
aritmética( 0),21períodos,com 2dedesvio,ondeoVWAPeStopAtrestãohabilitados.
1
2
3begin
Plot (Euroinvest (0,0,21,2.0,True ,True ));
end
255

--- PÁGINA 266 ---
Exemplo Gráfico:
256

--- PÁGINA 267 ---
19.48 Função FastStochastic
Disponível em todas versões.
Afunção FastStochastic ()retornaovalordoindicador”EstocásticoRápido”,deacordocomoperíododesejado.
Afamíliadeindicadoresestocástico(lento,plenoerápido)ajudaaidentificarsituaçõesdecompraevendaexcessiva.
Normalmente,acimade80eabaixode20omercadotorna-sevulnerávelacorreções.
Sintaxe:
Função FastStochastic (Periodo : Integer , PeriodoMedia : Integer , TipoMedia :
Integer ):Float ;
Parâmetros:
Periodo: Integer ;Determinaotipodeperfil:
PeriodoMedia: Integer [var] [Opcional] ;Determinaotipodemédia. Emcasodenãoutilização,ovalor
padrãoserá”14”.
TipoMedia: Integer [var] [Opcional] ;Período considerado para o cálculo da média. Em caso de não
utilização,ovalorpadrãoserá”1”:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”EstocásticoRápido”,considerando 14períodos
paraocálculo.
1
2
3begin
Plot (FastStochastic (14));
end
257

--- PÁGINA 268 ---
Exemplo Gráfico:
258

--- PÁGINA 269 ---
19.49 Função FastWMA
Disponível em todas versões.
Afunção FastWMA ()retornaovalordoindicador”WeightedMovingAverage(WMA)-MédiaMóvelPonderadaRápida”,
aplicandoumamédiamóvelcompesomaiorparaperíodosmaisrecentesepesosmenoresparaperíodosmaisantigos
dentrodajanelaamostragem.
Sintaxe:
Função FastWMA (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoconsideradoparaocálculodamédia.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicadorperíodoiguala 15.
1
2
3begin
Plot (FastWMA (15));
end
Exemplo Gráfico:
259

--- PÁGINA 270 ---
19.50 Função FgzRobot
Disponível em todas versões.
Afunção FgzRobot ()retornaovalordo”RobôFgz”.
Sintaxe:
Função FgzRobot (): Float ;
Parâmetros:
Semparâmetros.
260

--- PÁGINA 271 ---
19.51 Função FinancialVol
Disponível em todas versões.
A função FinancialVol ()retorna o valor do indicador ”Volume Financeiro”, podendo-se incluir ou desconsiderar
os dados: ”volume projetado” e ”leilão e trades diretos”. Este indicador mostra o volume financeiro gerado pelas
negociações. Éumimportanteelementonaconfirmaçãodemovimentos. Nestafunçãooparâmetro SoAgressores
só será considerado para o cálculo do indicador caso o seja assinado o Opcional ”Plugin Tape Reading”, caso não
possuaoopcionaloindicadorserásemprecalculadocomoFalse,independentedoqueforinseridonocampo.
Sintaxe:
Função FinancialVol (VolumeProjetado : Boolean ; SoAgressores : Boolean ):Float ;
Parâmetros:
VolumeProjetado: Boolean ;Determinaseovolumeiráconsiderarodadoprojetado.
SoAgressores: Boolean [Opcional] ;Determinaseovolumeirádesconsideraroleilãoetradesdiretos.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”VolumeFinanceiro”,desconsiderandoosdados
de”volumeprojetado”e”leilãoetradesdiretos”.
1
2
3begin
Plot (FinancialVol (False ,False ));
end
Exemplo Gráfico:
261

--- PÁGINA 272 ---
19.52 Função ForceIndex
Disponível em todas versões.
A função ForceIndex ()retorna o valor do indicador ”Force Index”, de acordo com o período e tipo de média
desejados. Este indicador relaciona preço e volume. É utilizado para identificar pontos de reversão através de
movimentosexcessivosedivergências.
Sintaxe:
Função ForceIndex (Periodo : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”ForceIndex”,considerando 13períodosetipo
demédiaexponencial( 1).
1
2
3begin
Plot (ForceIndex (13,1));
end
Exemplo Gráfico:
262

--- PÁGINA 273 ---
19.53 Função FrassonATR
Disponível em todas versões.
Afunção FrassonATR ()retornaovalordoindicador”FrassonATR”,deacordocomofatoreperíodosdesejados. O
FrassonATR ()éumavariaçãodoindicador”ATR”,funcionandocomoumstoptantoparaposiçõescompradascomo
paraposiçõesvendidas.
Sintaxe:
Função FrassonATR (Fator : Float ; PeriodoMaxMin : Integer ; PeriodoATR : Integer ):
Float ;
Parâmetros:
Fator: Float ;FatordemultiplicaçãodoATRutilizadonomomentodocálculodoindicador.
PeriodoMaxMin: Integer ;DeterminaoperíododeMáximadeMiníma.
PeriodoATR: Integer ;DeterminaoperíododocálculodoATR.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–[0:]Superior;
–[1:]Inferior.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordalinhainferiordoindicador”FrassonATR”,considerando
0,03(Fator), 15(PeríodoMáxima/Mínima)e 50(PeríodoATR)paraocálculo.
1
2
3begin
Plot (FrassonATR (0.03 ,15,50)|1|);
end
263

--- PÁGINA 274 ---
Exemplo Gráfico:
264

--- PÁGINA 275 ---
19.54 Função FrassonVH
Disponível em todas versões.
Afunção FrassonVH ()retornaovalordoindicador”FrassonVH”, deacordocomofatoreperíodosdesejados. O
FrassonVH ()éumavariaçãodoindicador”ATR”,funcionandocomoumstoptantoparaposiçõescompradascomo
paraposiçõesvendidas.
Sintaxe:
Função FrassonVH (Fator : Float ; PeriodoMaxMin : Integer ; PeriodoVH : Integer ):
Float ;
Parâmetros:
Fator: Float ;FatordemultiplicaçãodoATRutilizadonomomentodocálculodoindicador.
PeriodoMaxMin: Integer ;DeterminaoperíododeMáximadeMiníma.
PeriodoVH: Integer ;DeterminaoperíododocálculodoVH.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–[0:]Superior;
–[1:]Inferior.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordalinhasuperiordoindicador”FrassonVH”,considerando
0,03(Fator), 15(PeríodoMáxima/Mínima)e 50(PeríodoVH)paraocálculo.
1
2
3begin
Plot (FrassonVH (0.03 ,15,50));
end
265

--- PÁGINA 276 ---
Exemplo Gráfico:
266

--- PÁGINA 277 ---
19.55 Função FullStochastic
Disponível em todas versões.
Afunção FullStochastic ()retornaovalordoindicador”EstocásticoPleno”,deacordocomoperíododesejado. A
famíliadeindicadoresestocástico(lento,plenoerápido)ajudaaidentificarsituaçõesdecompraevendaexcessiva.
Normalmente,acimade80eabaixode20omercadotorna-sevulnerávelacorreções.
Sintaxe:
Função FullStochastic (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”EstocásticoPleno”,considerando 14períodos
paraocálculo.
1
2
3begin
Plot (FullStochastic (14));
end
Exemplo Gráfico:
267

--- PÁGINA 278 ---
19.56 Função FuraChao
Disponível em todas versões.
Afunção FuraChao ()retornaovalordoindicador”Fura-Chão”,deacordocomocoeficienteedeslocamentodese-
jados. Sendo uma técnica de confirmação de rompimento de um suporte do semanal, a função procura refinar o
melhorpontodeentradaparavendanoprazodeposition.
Sintaxe:
Função FuraChao (Coeficiente : Float ; Deslocamento : Integer ):Float ;
Parâmetros:
Coeficiente: Float ;Coeficienteutilizadonomomentodocálculodoindicador.
Deslocamento: Integer ;Determinaquantosperíodosanterioresserãoutilizadoscomobasenoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”Fura-Chão”,considerando 0,14(Coeficiente)
e1período(Deslocamento)paraocálculo.
1
2
3begin
Plot (FuraChao (0.14 ,1));
end
Exemplo Gráfico:
268

--- PÁGINA 279 ---
19.57 Função FuraTeto
Disponível em todas versões.
Afunção FuraTeto ()retornaovalordoindicador”Fura-Teto”,deacordocomocoeficienteedeslocamentodesejados.
Sendoumatécnicadeconfirmaçãoderompimentoderesistênciadosemanal,afunçãoprocurarefinaromelhorponto
deentradanacompranoprazodepostiondeformaatorná-lomaisefetivo.
Sintaxe:
Função FuraTeto (Coeficiente : Float ; Deslocamento : Integer ):Float ;
Parâmetros:
Coeficiente: Float ;Coeficienteutilizadonomomentodocálculodoindicador.
Deslocamento: Integer ;Determinaquantosperíodosanterioresserãoutilizadoscomobasenoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”Fura-Teto”,considerando 0,14(Coeficiente)e
1período(Deslocamento)paraocálculo.
1
2
3begin
Plot (FuraTeto (0.14 ,1));
end
Exemplo Gráfico:
269

--- PÁGINA 280 ---
19.58 Função HeikinAshi
Disponível em todas versões.
Afunção HeikinAshi ()retornaovalordoindicador”HeikinAshi”,deacordocomoperíodoetipodemédiadesejados.
Éumtipodegráficodecandlesquecompartilhamuitassemelhançascomográficodecandlespadrão, masdifere
noscálculosusadosparacriarcadacandle.
Sintaxe:
Função HeikinAshi (Periodo : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Linha: Integer [Opcional] ;Determinaqualdadoseráobtido:
–[0:]Abertura;
–[1:]Fechamento;
–[2:]Máxima;
–[3:]Mínima.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordefechamentodoindicador”HeikinAshi”,considerando 1
(Período)e 0(Aritmética)paraocálculo.
1
2
3begin
Plot (HeikinAshi (1,0)|1|);
end
270

--- PÁGINA 281 ---
Exemplo Gráfico:
271

--- PÁGINA 282 ---
19.59 Função HighestVolume
Disponível nas versões Ultra ou com a Automação de Estratégias 2.
Afunção HighestVolume ()retornaomaiorvolumeidentificadodeacordocomotipoespecificado.
Os dados do Volume Profile não fornecem um histórico extenso, o que limita o backtest de estratégias que utilizam essa
função.
O parâmetro Intervaldefine o período de análise e pode assumir os valores itDaily(intervalo diário — com
Offsetlimitado a 1 nesse caso) ou itMinute(intervalo em minutos). O Offsetindica quantos períodos atrás o
cálculodeveconsiderar,sendo 0operíodoatualeaté 720paraperíodosanteriores.
O parâmetro Typedetermina o tipo de volume a ser analisado: vtFinancial (volume financeiro), vtQuantity
(quantidadedepapéis)ou vtTrade(númerodenegócios). Osparâmetros Standard,AuctioneCrosscontrolam
ainclusão,respectivamente,denegóciospadrão,leilõeseoperaçõescruzadas. Todosassumem Trueporpadrão.
Afunçãodeveserfinalizadacomoparâmetro |Rank|,onde 0correspondeaomaiorvolumeidentificadonaanálise.
Sintaxe:
Função HighestVolume (Interval: Integer ; Offset: Integer ; Type: Integer ; Standard:
Boolean ; Auction: Boolean ; Cross: Boolean ):Float ;
Parâmetros:
Interval: Integer ;Intervalodaanálise.
Offset: [Opcional] Integer ;Deslocamentodabarra. [Padrão = 1]
Type: [Opcional] Integer ;Tipodevolumeaconsiderar. [Padrão = 1]
Standard: [Opcional] Boolean ;Consideravolumepadrão. [Padrão = True]
Auction: [Opcional] Boolean ;Consideravolumedeleilão. [Padrão = True]
Cross: [Opcional] Boolean ;Consideravolumecruzado. [Padrão = True]
Exemplos de uso:
Noexemploaseguir,seráretornadoomaiorvolumefinanceirodosúltimos 60minutos.
1
2
3begin
HighestVolume (itMinute ,60,vtFinancial )|0|;
end;
272

--- PÁGINA 283 ---
Exemplo Gráfico:
273

--- PÁGINA 284 ---
19.60 Função HighestVolumePrice
Disponível nas versões Ultra ou com a Automação de Estratégias 2.
Afunção HighestVolumePrice ()retornaopreçoassociadoaomaiorvolume,deacordocomotipoespecificado.
Os dados do Volume Profile não fornecem um histórico extenso, o que limita o backtest de estratégias que utilizam essa
função.
O parâmetro Intervaldefine o período de análise e pode assumir os valores itDaily(intervalo diário — com
Offsetlimitado a 1 nesse caso) ou itMinute(intervalo em minutos). O Offsetindica quantos períodos atrás o
cálculodeveconsiderar,sendo 0operíodoatualeaté 720paraperíodosanteriores.
O parâmetro Typedetermina o tipo de volume a ser analisado: vtFinancial (volume financeiro), vtQuantity
(quantidadedepapéis)ou vtTrade(númerodenegócios). Osparâmetros Standard,AuctioneCrosscontrolam
ainclusão,respectivamente,denegóciospadrão,leilõeseoperaçõescruzadas. Todosassumem Trueporpadrão.
Afunçãodeveserfinalizadacomoparâmetro |Rank|,onde 0correspondeaomaiorvolumeidentificadonaanálise.
Sintaxe:
Função HighestVolumePrice (Interval: Integer ; Offset: Integer ; Type: Integer ;
Standard: Boolean ; Auction: Boolean ; Cross: Boolean ):Float ;
Parâmetros:
Interval: Integer ;Intervalodaanálise.
Offset: [Opcional] Integer ;Deslocamentodabarra. [Padrão = 1]
Type: [Opcional] Integer ;Tipodevolumeaconsiderar. [Padrão = 1]
Standard: [Opcional] Boolean ;Consideravolumepadrão. [Padrão = True]
Auction: [Opcional] Boolean ;Consideravolumedeleilão. [Padrão = True]
Cross: [Opcional] Boolean ;Consideravolumecruzado. [Padrão = True]
Exemplos de uso:
Noexemploaseguir,seráretornadoopreçodomaiorvolumeemquantidadenosúltimos 5minutos.
1
2
3begin
HighestVolumePrice (itMinute ,5,vtQuantity )|0|;
end;
274

--- PÁGINA 285 ---
Exemplo Gráfico:
275

--- PÁGINA 286 ---
19.61 Função HiLoActivator
Disponível em todas versões.
Afunção HiLoActivator ()retornaovalordoindicador”HiLoActivator”,deacordocomoperíododesejado. Este
indicadoréumseguidordetendênciamuitoutilizadoparasinalizarsaídadetrades. Osinalocorrequandoopreço
fechaabaixodoindicador.
Sintaxe:
Função HiloActivator (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Linha: Integer ;Determinaquallinhaseráobtida:
–[0:]ValorIndicador;
–[1:]Tendência.
–Retornoparaidentificaçãodatendência:
–[0:] Baixa;
–[1:] Alta.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”HiLoActivator”,considerando 3períodospara
ocálculo.
1
2
3begin
Plot (HiloActivator (3));
end
276

--- PÁGINA 287 ---
Exemplo Gráfico:
277

--- PÁGINA 288 ---
19.62 Função HistVolatility
Disponível em todas versões.
Afunção HistVolatility ()retornaovalordoindicador”VolatilidadeHistórica”,deacordocomoperíodoetipode
médiadesejados. OHistoricalVolatilityIndezébaseadonolivrodeDonFishback,”Odds: TheKeyto90%Winners”.
Estafórmulairáresultaremumíndicedevolatilidadehistóricade30dias,plotandovaloresde0e1.
Sintaxe:
Função HistVolatility (Media : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Media: Integer ;Médiautilizadanomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”VolatilidadeHistórica”,considerando 22(Perío-
dos)etipodemédiaWellesWilder( 2).
1
2
3begin
Plot (HistVolatility (22,2));
end
Exemplo Gráfico:
278

--- PÁGINA 289 ---
19.63 Função HullMovingAverage
Disponível em todas versões.
A função HullMovingAverage ()retorna o valor do indicador ”Hull Moving Average”, de acordo com o período
desejado. Buscaidentificaratendênciadomercado,possuindoumasuavizaçãomaiorqueamédiamóvelexponencial
eacompanhacommaiorproximidadeográficodepreços.
Sintaxe:
Função HullMovingAverage (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”HullMovingAverage”,considerando 8períodos
paraocálculo.
1
2
3begin
Plot (HullMovingAverage (8));
end
Exemplo Gráfico:
279

--- PÁGINA 290 ---
19.64 Função IchimokuCloud
Disponível em todas versões.
Afunção IchimokuCloud ()retornaovalordoindicador”IchimokuCloud”,deacordocomosparâmetrosdesejados.
Estefoidesenvolvidoparaqueotraderpossaavaliaratendênciaeaforçadoativoeseuspontosdesuporteede
resistência,seanecessidadedequalqueroutroindicadortécnico.
Sintaxe:
Função IchimokuCloud (Tenkan‐Sen : Integer ; Kijun‐Sen : Integer ; SenkouSpanB :
Integer ):Float ;
Parâmetros:
Tenkan‐Sen: Integer ;Utilizadonomomentodocálculodoindicador.
Kijun‐Sen: Integer ;Utilizadonomomentodocálculodoindicador.
SenkouSpanB: Integer ;Utilizadonomomentodocálculodoindicador.
Linha: Integer ;Determinaquallinhaseráobtida:
–[0:]Tenkan-Sen;
–[1:]Kijun-Sen;
–[2:]ChikouSpan;
–[3:]SenkouSpanA;
–[4:]SenkouSpanB.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordalinhaSenkouSpanB( 4)doindicador”IchimokuCloud”,
considerando 9(Tenkan-Sen), 26(Kijun-Sen)e 52(SenkouSpanB)paraocálculo.
1
2
3begin
Plot (IchimokuCloud (9,26,52)|4|);
end
280

--- PÁGINA 291 ---
Exemplo Gráfico:
281

--- PÁGINA 292 ---
19.65 Função ImpliedVolatility
Disponível em todas versões.
A função ImpliedVolatility ()retorna o valor do indicador ”Volatilidade Implícita”, de acordo com o período
desejado. Este indicador é utilizado para cálcular a volatilidade implícita de derivativos (opções). A volatilidade
implícitapodeserdefinidacomoavolatilidadequeomercadoincluiparaumativoatravésdospreçosdasopções.
Sintaxe:
Função ImpliedVolatility (ModeloTeorico : Boolean ; TipoOpcao : Boolean ):Float ;
Parâmetros:
ModeloTeorico: Boolean ;Determinaomodeloparaocálculo:
–[True:]Black&Scholes;
–[False:]Binomial.
TipoOpcao: Boolean ;Determinaotipodaopção:
–[True:]Americana;
–[False:]Européia.
Exemplos de uso:
No exemplo a seguir, será plotado no gráfico o valor do indicador ”Volatilidade Implícita”, utilizando o modelo
Black&Scholes( True).
1
2
3begin
Plot (ImpliedVolatility (True ,False ));
end
Exemplo Gráfico:
282

--- PÁGINA 293 ---
19.66 Função KVO
Disponível em todas versões.
A função KVO()retorna o valor do indicador ”KVO”, de acordo com os períodos desejados. O indicador ”Klinger
VolumeOscillator(KVO)”éumsociladorbaseadoempreçoevolumeprojetadoparamedirofluxofinanceirotanto
emlongoprazocomoemcurtoprazo.
Sintaxe:
Função KVO(MediaLonga : Integer ; MediaCurta : Integer ; Sinal : Integer ):Float ;
Parâmetros:
MediaLonga: Integer ;DeterminaoperíododaMédiaLongaparaformaçãodocálculo.
MediaCurta: Integer ;DeterminaoperíododaMédiaCurta.
Sinal: Integer ;Determinaosinalparaaformaçãodocálculo.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–[0:]Linha.
–[1:]Histograma.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordohistogramadoindicador”KVO”,considerando 55(Média
Longa), 34(MédiaCurta), 13(Sinal)paraocálculo.
1
2
3begin
Plot (KVO(55,34,13)|1|);
end
Exemplo Gráfico:
283

--- PÁGINA 294 ---
19.67 Função KeltnerCH
Disponível em todas versões.
A função KeltnerCH ()retorna o valor do indicador ”Keltner Channels”, de acordo com o período e tipo de média
desejados. É utilizado para definir zonas de atividade. O mercado está sobrecomprado quando estiver acima da
bandasuperior,esobrevendidoquandoestiverabaixodabandainferior.
Sintaxe:
Função KeltnerCH (Desvio : Float ; Periodo : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Desvio: Float ;Desvioutilizadonomomentodocálculodoindicador.
Periodo: Integer ;Períodoutilizadoparaocálculodoindicador.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–[0:]Superior;
–[1:]Inferior.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordalinhainferiordoindicador”KeltnerChannels”,considerando
2.0(Desvio), 20(Períodos)etipodemédiaexponencial( 1).
1
2
3begin
Plot (KeltnerCH (2.0,20,1)|1|);
end
284

--- PÁGINA 295 ---
Exemplo Gráfico:
285

--- PÁGINA 296 ---
19.68 Função LSVolatilityIndex
Disponível em todas versões.
Afunção LSVolatilityIndex ()retornaovalordoindicador”L&SVolatilityIndex”. Indicaoquãoafastadoopreço
está da mma21 calculada como uma proporção da média da volatilidade histórica calculada sobre os últimos 21
candles. Esseindicadoréutilizadocomoferramentaemumasériedeabordagensdetrade.
Sintaxe:
Função LSVolatilityIndex (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”L&SVolatilityIndex”.
1
2
3begin
Plot (LSVolatilityIndex );
end
Exemplo Gráfico:
286

--- PÁGINA 297 ---
19.69 Função LinearRegressionChannel
Disponível em todas versões.
A função LinearRegressionChannel ()retorna o valor do indicador ”Canal de Regressão Linear”. O canal de
regressão linear é um indicador técnico de três linhas, que descreve a alta, a baica e meio de uma tendência ou
movimentodepreçoqueestásendoanalisadousandofiltrocomdesviopadrãonatentativadeencontrarsuportese
resistênciascompatíveiscomatendênciadotempográficoanalisado.
Sintaxe:
Função LinearRegressionChannel (Periodo : Integer ; Usar Desvio Superior : Boolean ;
Desvio Superior : Float ; Usar Desvio Inferior : Boolean ; Desvio Inferior : Float
):Float ;
Parâmetros:
Periodo: Integer ;DeterminaoperíododaMédiaLongaparaformaçãodocálculo.
Usar Desvio Superior: Boolean ;Defineseodesviosuperiorseráutilizado.
Desvio Superior: Float ;Desviosuperiorconsiderado.
Usar Desvio Inferior: Boolean ;Defineseodesvioinferiorseráutilizado.
Desvio Inferior: Float ;Desvioinferiorconsiderado.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–[0:]Central;
–[1:]Superior;
–[2:]Inferior.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoalinhacentral.
1
2
3begin
Plot (LinearRegressionChannel (100,True ,2,True ,2));
end
287

--- PÁGINA 298 ---
Exemplo Gráfico:
288

--- PÁGINA 299 ---
19.70 Função MACD
Disponível em todas versões.
A função MACD ()retorna o valor do indicador ”MACD Linha e Histograma” de acordo com os períodos desejados.
Esteindicadoréumacombinaçãodosindicadores”MACDHistograma”e”MACDLinha”.
Sintaxe:
Função MACD (MediaLonga : Integer ; MediaCurta : Integer ; Sinal : Integer ):Float ;
Parâmetros:
MediaLonga: Integer ;DeterminaoperíododaMédiaLongaparaformaçãodocálculo.
MediaCurta: Integer ;DeterminaoperíododaMédiaCurta.
Sinal: Integer ;Determinaosinalparaaformaçãodocálculo.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
–[0:]Linha;
–[1:]Histograma.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordohistograma,considerando 26(MédiaLonga), 12(Média
Curta), 9(Sinal).
1
2
3begin
Plot (MACD (26,12,9)|1|);
end
Exemplo Gráfico:
289

--- PÁGINA 300 ---
19.71 Função MFI
Disponível em todas versões.
Afunção MFI()retornaovalordoindicador”MarketFacilitationIndex”. Éumamedidadeeficiênciacomaqualo
ativosemoveparacadaunidadedevolume. Analisadojuntocomovolumeelepermiteclassificaromercadoem4
estágios.
Sintaxe:
Função MFI(): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”MFI”.
1
2
3begin
Plot (MFI);
end
Exemplo Gráfico:
290

--- PÁGINA 301 ---
19.72 Função MIMA
Disponível nas versões com o pacote PhiCube.
A função MIMA ()retorna o indicador cumulativo que aproxima uma média móvel convencional. Sua fórmula e
calibragem proprietária o deixa mais rápido, porém com menos sinais falsos. MIMA é aplicável tanto na tendência
quantonaconsolidação.
Sintaxe:
Função MIMA (Período : Integer ):Float ;
Parâmetros:
Período: Integer ;Determinaoperíodoaserutilizado.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção MIMA ()comintervalo 9.
1
2
3begin
Plot (MIMA (9));
end
Exemplo Gráfico:
291

--- PÁGINA 302 ---
19.73 Função MIMAROC
Disponível nas versões com o pacote PhiCube.
Afunção MIMAROC ()amediçãodainclinação(RafeofChange)do”PhiCubeMIMA”. Umvaloracimadezeroindica
subida,enquantoovalorabaixodezeroindicaqueda.
Sintaxe:
Função MIMAROC (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção MIMAROC ()comintervalo 9.
1
2
3begin
Plot (MIMAROC (9));
end
Exemplo Gráfico:
292

--- PÁGINA 303 ---
19.74 Função MADRIDTRENDSQUEEZE
Disponível em todas versões.
Afunção MADRIDTRENDSQUEEZE ()retornaovalordoindicador”MadridTrendSqueeze”. Buscamedirgráficamente
aforlaem6coresetemobjetivodeindicarforçaedireçãoatéqueacoramarelasejavisualizada, dandosinalde
saídadetrading.
Sintaxe:
Função MADRIDTRENDSQUEEZE (Period : Integer ):Float ;
Parâmetros:
Period: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”MadridTrendSqueeze”requisitandoumperíodo
de34unidades.
1
2
3begin
Plot (MADRIDTRENDSQUEEZE (34));
end
Exemplo Gráfico:
293

--- PÁGINA 304 ---
19.75 Função MAGOMACD
Disponível em todas versões.
Afunção MAGOMACD ()ébaseadanosperíodos”MACD”emconjuntocom”MédiaMóveis”esuasvariaçõesconforme
otempográfico.
Sintaxe:
Função MAGOMACD (): Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador.
1
2
3begin
Plot (MAGOMACD );
end
Exemplo Gráfico:
294

--- PÁGINA 305 ---
19.76 Função MAGOMEDIAS
Disponível em todas versões.
Afunção MAGOMEDIAS ()exibemédiasmóveisexponenciaisbaseadasnasmédiasutilizadaspelotraderIgorRodrigues,
utilizandodeparâmetrosdo AjusteeVWAP.
Sintaxe:
Função MAGOMEDIAS (PlotarMediasMago : Boolean ; PlotarAjuste : Boolean ; PlotarVWAP :
Boolean ):Float ;
Parâmetros:
PlotarMediasMago: Boolean ;Determinaseasmédiasserãoplotadasnográfico:
–[True:]Verdadeiro;
–[False:]Falso.
PlotarAjuste: Boolean ;Determinaseasmédiasterãoajustes:
–[True:]Verdadeiro;
–[False:]Falso.
PlotarVWAP: Boolean ;DeterminaseaVWAPseráaplicadaàsmédias:
–[True:]Verdadeiro;
–[False:]Falso.
Exemplo de uso:
1
2
3begin
Plot (MAGOMEDIAS (True ,True ,True ));
end
295

--- PÁGINA 306 ---
Exemplo Gráfico:
296

--- PÁGINA 307 ---
19.77 Função Momentum
Disponível em todas versões.
Afunção Momentum ()retornaovalordoindicador”Momentum”deacordocomoperíodoetipodemédiadesejados.
Esteindicadoréumamedidadavelocidadedemudançadospreços. Omomentumoscilaemtornodeumalinhazero
ealteralçõesnadeclividadedalinhapodeindicartoposoufundos.
Sintaxe:
Função Momentum (Periodo : Integer ; Media : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Media: Integer ;Médiautilizadanomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir, seráplotadonográficoovalordoindicador”Momentum”, considerando 10(Períodos), 3
(Média)etipodemédiaexponencial( 1)paraocálculo.
1
2
3begin
Plot (Momentum (10,3,1));
end
297

--- PÁGINA 308 ---
Exemplo Gráfico:
298

--- PÁGINA 309 ---
19.78 Função MomentumStochastic
Disponível em todas versões.
A função MomentumStochastic ()retorna o valor do indicador ”Momento Estocástico” de acordo com o período
desejado. O”MomentoEstocástico”ébaseadono”OsciladorEstocástico”,onderelacionaofechamentoatualcomo
pontomédiodadiferençaentreamínimaeamáximadoperíododeterminado.
Sintaxe:
Função MomentumStochastic (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”MomentoEstocástico”,considerando 14período
paraocálculo.
1
2
3begin
Plot (MomentumStochastic (14));
end
Exemplo Gráfico:
299

--- PÁGINA 310 ---
19.79 Função MoneyFlow
Disponível em todas versões.
Afunção MoneyFlow ()retornaovalordoindicador”MoneyFlow”. Esteindicadormomentumtilizaosvaloresmáximos
emínimosatuaiseanterioresparadeterminaradireçãodospreços.
Sintaxe:
Função MoneyFlow (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”MoneyFlow”.
1
2
3begin
Plot (MoneyFlow );
end
Exemplo Gráfico:
300

--- PÁGINA 311 ---
19.80 Função MoneyFlowIndex
Disponível em todas versões.
Afunção MoneyFlowIndex ()retornaovalordoindicador”MoneyFlowIndex”,deacordocomoperíododesejado.
O”MoneyFlowIndex(MFI)”oscilaentre0-100,eéusadoparadeterminaraforladeumatendênciaatual,àpartir
deanálisedepreçoevolumedeperíodoanerior.
Sintaxe:
Função MoneyFlowIndex (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”MoneyFlowIndex”,considerando 14período
paraocálculo.
1
2
3begin
Plot (MoneyFlowIndex (14));
end
Exemplo Gráfico:
301

--- PÁGINA 312 ---
19.81 Função MADRIDMOVINGAVERAGE
Disponível em todas versões.
Oindicador”MadridMovingAverageRibbon”trabalhacom4cores,ondeverdelimãoindicatendênciadealta,ótimo
parafazernegociaçõeslongas;Verdeescuro,perfeitoparafazerreentradas,comprarnaquedaseguindoatendência,
ou um aviso de reversão de tendência de baixa; Vermelho claro indica tendência de baixa, ótimo pra Negociações
curtas;JáacorMarromencontraindíciosdevendanopicodomovimentoouavisodereversãodetendênciadealta
parabaixalonga.
Sintaxe:
Função MADRIDMOVINGAVERAGE (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”MadridMovingAverageRibbon”.
1
2
3begin
Plot (MADRIDMOVINGAVERAGE );
end
Exemplo Gráfico:
302

--- PÁGINA 313 ---
19.82 Função NelogicaBottomFinder
Disponível em todas versões.
Afunção NelogicaBottomFinder ()retornaovalordoindicador”NelogicaBottomFinder”,conformeodadodese-
jado(linhaehistograma). Éumindicadordecompracontraatendênciaqueutilizaumafórmulaproprietáriapara
identificar momentos de teversão. Baseia-se na hipótese de ”reversão à meédia” após um período de sobrevenda
amplificadoporvolatilidade.
Sintaxe:
Função NelogicaBottomFinder (): Float ;
Parâmetros:
Linha: Integer [Opcional] ;Determinaqualdadoseráobtido:
–[0:]Linha;
–[1:]Histograma.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoodadodohistograma.
1
2
3begin
Plot (NelogicaBottomFinder |1|);
end
Exemplo Gráfico:
303

--- PÁGINA 314 ---
19.83 Função NelogicaPullBackFinder
Disponível em todas versões.
A função NelogicaPullBackFinder ()retorna o valor do indicador ”Nelogica Pullback Finder”, conforme o dado
desejado(linhaehistograma). Éumindicadordecompraevendaafavordatendência,identificandoosprincipais
pontosdepullbackdamesma. Baseia-seemumafórmulaproprietáriadeidentificaçãodeidentificaçãodecicloshá
tendênciadefinida.
Sintaxe:
Função NelogicaPullBackFinder (): Float ;
Parâmetros:
Linha: Integer [Opcional] ;Determinaqualdadoseráobtido:
–[0:]Linha;
–[1:]Histograma.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoodadodohistograma.
1
2
3begin
Plot (NelogicaPullBackFinder |1|);
end
Exemplo Gráfico:
304

--- PÁGINA 315 ---
19.84 Função NelogicaWeisWave
Disponível em todas versões.
Afunção NelogicaWeisWave ()retornaovalordoindicador”NelogicaWeisWave”,deacordocomoperíododesejado.
OindicadorébaseadonométododeondasdeWyckoff,levandoemconsideraçãoovolumedasbarrasesuadireção.
Sintaxe:
Função NelogicaWeisWave (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Determinaoperíodoparaocálculodoindicador:
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção,considerando 3períodosparaocálculo.
1
2
3begin
Plot (NelogicaWeisWave (3));
end
Exemplo Gráfico:
305

--- PÁGINA 316 ---
19.85 Função OBV
Disponível em todas versões.
Afunção OBV()retornaovalordoindicador”OBV”,deacordocomoperíododesejado. Oindicadorrelacionapreço
evolume,alémdedivergências,pode-seaplicarmétodosdaanálisetécnicacomosuportes/resistênciaselinhasde
tendência.
Sintaxe:
Função OBV(): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”OBV”.
1
2
3begin
Plot (OBV);
end
Exemplo Gráfico:
306

--- PÁGINA 317 ---
19.86 Função OBVAvg
Disponível em todas versões.
Afunção OBVAvg ()retornaovalordoindicador”OBVPonderado”. Oindicadorrelacionapreçoevolume, alémde
divergências,pode-seaplicarmétodosdaanálisetécnicacomosuportes/resistênciaselinhasdetendência.
Sintaxe:
Função OBVAvg (Periodo : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador:
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção OBVAvg (),considerando 10(Períodos)etipo
demédiaponderada( 3).
1
2
3begin
Plot (OBVAvg (10,3));
end
Exemplo Gráfico:
307

--- PÁGINA 318 ---
19.87 Função OnBalanceTR
Disponível em todas versões.
Afunção OnBalanceTR ()retornaovalordoindicador”On-BalanceTrueRange”. Oferececonfirmaçõesparasinais
dedivergênciaemoutrosindicadores.
Sintaxe:
Função OnBalanceTR (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”On-BalanceTrueRange”.
1
2
3begin
Plot (OnBalanceTR );
end
Exemplo Gráfico:
308

--- PÁGINA 319 ---
19.88 Função OpenDaily
Disponível em todas versões.
Afunção OpenDaily ()retornaodadodeabertura,conformeodeslocamentoespecificado.
Sintaxe:
Função OpenDaily (DaysBack : Integer ):Float ;
Parâmetros:
DaysBack: Integer ;Númerodediasparaodeslocamento.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoaaberturadodiaanterior.
1
2
3begin
Plot (OpenDaily (1));
end
Exemplo Gráfico:
309

--- PÁGINA 320 ---
19.89 Função OpenInterest
Disponível em todas versões.
A função OpenInterest ()retorna o valor do indicador ”Contratos em Aberto”. O indicador mostra o número de
contratosemabertodosativosdaBM&F.
Sintaxe:
Função OpenInterest (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoodadodoindicador.
1
2
3begin
Plot (OpenInterest );
end
Exemplo Gráfico:
310

--- PÁGINA 321 ---
19.90 Função PTAX
Disponível nos produtos Pro ou Ultra.
Afunção PTAX ()retornaovalordoindicador”TR-PTAX”. PTAXéumataxadecâmbiocalculadaduranteodiapelo
BancoCentraldoBrasil. Consistenamédiadastaxasinformadaspelosdealersdedolardurante4janelasdodia.
Sintaxe:
Função PTAX (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooindicador”PTAX”.
1
2
3begin
Plot (PTAX );
end
Exemplo Gráfico:
311

--- PÁGINA 322 ---
19.91 Função PTAXFuturo
Disponível nos produtos Pro ou Ultra.
A função PTAXFuturo ()retorna o valor do indicador ”TR - PTAX Futuro”. PTAX é uma taxa de câmbio calculada
duranteodiapeloBancoCentraldoBrasil. Consistenamédiadastaxasinformadaspelosdealersdedolardurante4
janelasdodia.
Sintaxe:
Função PTAXFuturo (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooindicador”PTAXF”.
1
2
3begin
Plot (PTAXFuturo );
end
Exemplo Gráfico:
312

--- PÁGINA 323 ---
19.92 Função ParabolicSAR
Disponível em todas versões.
Afunção ParabolicSAR ()retornaovalordoindicador”SARParabólico”,deacordocomosparâmetrosdesejados.
O”SARparabólico”éusadoprincipalmenteparagerarsinaisdesaída. Quandoduranteumaalta, porexemplo, os
preçoscaemparabaixodoSAR,umsinaldevendaégerado.
Sintaxe:
Função ParabolicSAR (Fator : Float ; Limite : Float ):Float ;
Parâmetros:
Fator: Float ;DeterminaoFatordeAceleraçãoparaformaçãodocálculo.
Limite: Float ;DeterminaoLimitedeAceleração.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”SARParabólico”,considerando 0,02(Fator)e
0,2(Limite)paraocálculo.
1
2
3begin
Plot (ParabolicSAR (0.02 ,0.2));
end
Exemplo Gráfico:
313

--- PÁGINA 324 ---
19.93 Função Phibo
Disponível nas versões com o pacote Harmonic Trading.
Afunção Phibo ()retornaovalordoindicador”PhiCube-PhiboLine”.
Sintaxe:
Função Phibo (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção Phibo (),considerando 17(Períodos)parao
cálculo.
1
2
3begin
Plot (Phibo (17));
end
Exemplo Gráfico:
314

--- PÁGINA 325 ---
19.94 Função Pivot
Disponível em todas versões.
A função Pivot ()retorna o valor do indicador ”Pivot”, de acordo com os parâmetros específicos desejados. Com
base nos valores de abertura, máxima e fechamento de um dia determina possíveis suportes e resistências para o
próximodia.
Sintaxe:
Função Pivot (Normal : Boolean ; TresLinhas : Boolean ):Float ;
Parâmetros:
Normal: Boolean ;DeterminaotipodecálculoqueseráefetuadoparaoPivot:
–[True:](Máxima+Mínima+Fechamento)/3;
–[False:](Abertura+Máxima+Mínima+Fechamento)/4.
TresLinhas: Boolean ;Determinaquantaslinhasserãoconsideradas:
–[True:]TrêsLinhas;
–[False:]DuasLinhas.
Linha: Integer ;Determinaquallinhaseráobtida:
Para [True]emTresLinhas:
–[0:]Pivot;
–[1:]R3;
–[2:]S3;
–[3:]R2;
–[4:]S2;
–[5:]R1;
–[6:]S1.
Para [False]emTresLinhas:
–[0:]Pivot;
–[1:]R2;
–[2:]S2;
–[3:]R1;
–[4:]S1.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoalinha S3,considerandoparao”Pivot”otipodecálculo: (Máxima
+Mínima+Fechamento)/3.
1
2
3begin
Plot (Pivot (True ,True )|2|);
end
315

--- PÁGINA 326 ---
Exemplo Gráfico:
316

--- PÁGINA 327 ---
19.95 Função PowerMeter
Disponível em todas versões.
Afunção PowerMeter ()retornaovalordoindicador”PowerMeter(MedidordePressão)”,informandoaquantidade
doAgressorCompradoroudoAgressorVendedor,dependendodosparâmetrosfornecidos. Ondesidedeveser0para
comprae1paravenda. Opadrãodoindicadoréretornarosdadosdodiadehoje,mas,aoadicionarumajanelade
minutos,eleretornarábaseadonosúltimosXminutos.
Sintaxe:
Função PowerMeter (Side : Integer ; Minutes : Integer ; InitialDate : Integer ; EndDate
:Integer ):Float ;
Parâmetros:
Side: Integer ;Parâmetro do tipo inteiro, informa o lado de ordem que considera para devolver os valores,
passandoaconstanteosBuyparavaloresdeCompraeaconstanteosSellparavaloresdeVenda.
Minutes: Integer ;Informaajanela de tempo, em minutos, queo indicador deveconsiderar, dos últimos X
minutos. Quandonãoinformadoconsideravaloresdiários. Valorpadrãoé”0”.
InitialDate: Integer [var] ;Utilizadoparainformarperíodoscustomizadosdeanálise,datainicialdajanela
deanálise,ondeopadrãoé”0”.
EndDate: Integer [var] ;Utilizado para informar períodos customizados de análise, data final da janela de
análise,ondeopadrãoé”0”.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodachamada,considerandooladodeCompraparaovalor
diáriosemutilizarumperíodocustomizado.
1
2
3begin
Plot (PowerMeter (osBuy ));
end
317

--- PÁGINA 328 ---
Exemplo Gráfico:
318

--- PÁGINA 329 ---
19.96 Função PRICENERY
Disponível em todas versões.
A função PRICENERY ()retorna o valor do indicador ”PriceNery”. O indicador realiza a divisão do dia anterior em
zonasproporcionais,projetandodistânciasequivalentesacimaeabaixododiaanterior.
Sintaxe:
Função PriceNery (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodachamada.
1
2
3begin
Plot (PriceNery );
end
Exemplo Gráfico:
319

--- PÁGINA 330 ---
19.97 Função PriceOsc
Disponível em todas versões.
A função PriceOsc ()retorna o valor do indicador ”Oscilador de Preços”, de acordo com os períodos e tipos de
médias desejados. O indicador pe de seguimento de tendência que reflete a diferença entre duas médias móveis
exponenciaisparaperíodosdiferentesemumgráfico.
Sintaxe:
Função PriceOsc (Media1 : Integer ; TipoMedia1 : Integer ; Media2 : Integer ;
TipoMedia2 : Integer ):Float ;
Parâmetros:
Media1: Integer ;Períodoutilizadoparaamédia1.
TipoMedia1: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Media2: Integer ;Períodoutilizadoparaamédia2.
TipoMedia2: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”OsciladordePreços”,considerando 12(Média
1)e 21(Média2)períodos,etipoexponencial( 1)paraocálculo.
1
2
3begin
Plot (PriceOsc (12,1,21,1));
end
320

--- PÁGINA 331 ---
Exemplo Gráfico:
321

--- PÁGINA 332 ---
19.98 Função PriceVolumeTrend
Disponível em todas versões.
Afunção PriceVolumeTrend ()retornaovalordoindicador”TendênciaPreço/Volume”. Éumindicadorqueprocura
relacionaropreçoeovolumedeumadeterminadaação. OindicadorTendênciadePreço/Volumepodeserutilizado
paraconfirmartendências,bemcomoidentificarsinaisdenegociação.
Sintaxe:
Função PriceVolumeTrend (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoodadodoindicador”TendênciaPreço/Volume”.
1
2
3begin
Plot (PriceVolumeTrend );
end
Exemplo Gráfico:
322

--- PÁGINA 333 ---
19.99 Função PriorCote
Disponível em todas versões.
Afunção PriorCote ()retornaovalordoindicador”PriorCote”,deacordocomodadodesejado. Oindicador”Priot
Cote” mostra os valores de Fechamento, Abertura, Máximo ou Mínimo correspondentes ao período anterior. Este
períododereferênciaédefinidopelaperiodicidadedográficoepodeserdia,mêsouano.
Sintaxe:
Função PriorCote (Tipo : Integer ):Float ;
Parâmetros:
Tipo: Integer ;Determinaodadoqueseráobtido:
–[0:]Fechamento;
–[1:]Abertura;
–[2:]Máxima;
–[3:]Mínima;
–[4:]Ajuste.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordefechamentodoperíodoanterior.
1
2
3begin
Plot (PriorCote (0));
end
Exemplo Gráfico:
323

--- PÁGINA 334 ---
19.100 Função QuantityVol
Disponível em todas versões.
A função QuantityVol ()retorna o valor do indicador ”Volume Quantidade”. Este indicador mostra o volume em
quantidadedetítulosnegociados,atuandodeformasimilaraovolumefinanceiro,podendo-seincluiroudesconsid-
erar os dados: ”volume projetado” e ”leilão e trades diretos”. Nesta função o parâmetro SoAgressores só será
consideradoparaocálculodoindicadorcasoosejaassinadooOpcional”PluginTapeReading”,casonãopossuao
opcionaloindicadorserásemprecalculadocomoFalse,independentedoqueforinseridonocampo.
Sintaxe:
Função QuantityVol (VolumeProjetado : Boolean ; SoAgressores : Boolean ):Float ;
Parâmetros:
VolumeProjetado: Boolean ;Determinaseovolumeiráconsiderarodadoprojetado.
SoAgressores: Boolean [Opcional] ;Determinaseovolumeirádesconsideraroleilãoetradesdiretos.
Exemplos de uso:
No exemplo a seguir, será plotado no gráfico o valor do indicador ”Volume Quantidade”, desconsiderando os
dadosde”volumeprojetado”e”leilãoetradesdiretos”.
1
2
3begin
Plot (QuantityVol (False ,False ));
end
Exemplo Gráfico:
324

--- PÁGINA 335 ---
19.101 Função RBG
Disponível em todas versões.
Afunção RBG()retornaovalordoindicador”RBG”. Oindicadorébaseadonocomportamentodoativonopregão
anterior,elefuncionaidenticandofalsosrompimentosdemáximas,epullbacksno50%dodiaanterior,indicadopara
daytrade.
Sintaxe:
Função RBG(): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodachamadadefunção.
1
2
3begin
Plot (RBG);
end
Exemplo Gráfico:
325

--- PÁGINA 336 ---
19.102 Função ROC
Disponível em todas versões.
Afunção ROC()retornaovalordoindicador”ROC”,deacordocomosperíodosetipodemédiadesejados. No”ROC”,
o preço atual é comparado com um anterior para medir a magnitude da mudança do preço sobre um período de
tempo.
Sintaxe:
Função ROC(Periodo : Integer ; Media : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Media: Integer ;Períododamédiautilizada.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”ROC”,considerando 3(Período), 9(Média)e
tipodearitmética( 0).
1
2
3begin
Plot (ROC(3,9,0));
end
326

--- PÁGINA 337 ---
Exemplo Gráfico:
327

--- PÁGINA 338 ---
19.103 Função RSI
Disponível em todas versões.
A função RSI()retorna o valor do indicador ”IFR” (RSI), de acordo com o período e tipo desejados. Ajuda os
investidoresaavaliaraforçaatualdeumativo,sinalizandoníveisdecompraexcessivaevendaexcessiva. Ferramentas
comolinhasdesuportepodemserusadassobreoindicador.
Sintaxe:
Função RSI(Periodo : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Clássico;
–[1:]Simples.
Exemplos de uso:
No exemplo a seguir, será plotado no gráfico o valor do indicador ”IFR” (RSI), considerando 2períodos e tipo
clássico( 0)paraocálculo.
1
2
3begin
Plot (RSI(2,0));
end
Exemplo Gráfico:
328

--- PÁGINA 339 ---
19.104 Função Rafi
Disponível em todas versões.
A função Rafi ()retorna o valor do indicador ”Rafi”. É um indicador de ”market breadth” e tem como objetivo
identificar a forla de determinado rompimento de suporte e/ou resistência e verificar se o rompimento poderá ser
falsoounão.
Sintaxe:
Função Rafi (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoodadodoindicadorespecífico.
1
2
3begin
Plot (Rafi );
end
Exemplo Gráfico:
329

--- PÁGINA 340 ---
19.105 Função TENDENCYTRACKER
Disponível em todas versões.
A função TENDENCYTRACKER ()retorna o valor do indicador ”Rastreador de Tendências”. É um indicador com foco
emrastreabilidadedetendênciaparamercadosfuturos.
Sintaxe:
Função TENDENCYTRACKER (Dias : Integer ):Float ;
Parâmetros:
Dias: Integer ;Períodoutilizado.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”RastreadordeTendências”,considerando 30
(dias).
1
2
3begin
Plot (TENDENCYTRACKER (30));
end
Exemplo Gráfico:
330

--- PÁGINA 341 ---
19.106 Função Ravi
Disponível em todas versões.
A função Ravi ()retorna o valor do indicador ”Ravi”, de acordo com os períodos desejados. É um indicador de
momentumsimilarao”ADX”,masquegerasinaismaisrápidos.
Sintaxe:
Função Ravi (MediaLonga : Integer ; MediaCurta : Integer ):Float ;
Parâmetros:
MediaLonga: Integer ;Períodoutilizadonamédialonga.
MediaCurta: Integer ;Períodoutilizadonamédiacurtaparaocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicadorRavi,considerando 7(MédiaCurta)e 65(Média
Longa)períodosparaocálculo.
1
2
3begin
Plot (Ravi (65,7));
end
Exemplo Gráfico:
331

--- PÁGINA 342 ---
19.107 Função RenkoVTwo
Disponível em todas versões.
Afunção RenkoVTwo ()retornaovalordoindicador”RenkoV2”, deacordocomosparâmetrosdesejados. Criaum
envelopenasáreasdeconsolidaçãoedestacaoscandlesapartirdomomentoquesaemdaáreadeconsolidação.
Sintaxe:
Função RenkoVTwo (Periodo : Integer ; Abertura : Float ; Deslocamento : Integer ;
UseCustomDate : Boolean ; CustomDate : Integer ; CustomTime : Integer ; Linha :
Integer ):Integer ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Abertura: Float ;Referenteaoparâmetro”Abertura”doindicador.
Deslocamento: Integer ;Relacionadoaoparâmetro”Deslocamento”doindicador.
UseCustomDate: Boolean [var] [Opcional] ;Determinaseadataseráutilizadaounão:
–[True:]Usardatapersonalizada;
–[False:]Nãousardatapersonalizada.
CustomDate: Integer [var] [Opcional] ;Determinaadatautilizada.
CustomTime: Integer [var] [Opcional] ;Determinaotempoutilizado.
Linha: Integer [Opcional] ;Determinaquallinhaseráobtida:
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordalinhaRenkoV2-( 1)doindicadorRenkoV2,considerando
20(Período), 1.5(Abertura)e 0(Deslocamento)paraocálculo.
1
2
3begin
Plot (RenkoVTwo (20,1.5,0)|1|);
end
332

--- PÁGINA 343 ---
Exemplo Gráfico:
333

--- PÁGINA 344 ---
19.108 Função RsiStochastic
Disponível em todas versões.
Afunção RsiStochastic ()retornaovalordoindicador”IFREstocástico”,deacordocomoperíododesejado. Sendo
umindicadorderivadodeoutroindicador,afórmuladoestocásticoéaplicadaaovalorcalculadodo”IFR”,variando
entre0e1. PodeserutilizadocomoIFRsimplesparamedirsuasensibilidade.
Sintaxe:
Função RsiStochastic (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”IFREstocástico”,considerando 2períodospara
ocálculo.
1
2
3begin
Plot (RsiStochastic (2));
end
Exemplo Gráfico:
334

--- PÁGINA 345 ---
19.109 Função SafeZoneDownTrend
Disponível em todas versões.
A função SafeZoneDownTrend ()retorna o valor do indicador ”Stop SafeZone DownTrend”, de acordo com os
parâmetrosdesejados. Visaindicarníveisadequadosparaposicionamentodostopduranteumatendênciadebaixa.
Sintaxe:
Função SafeZoneDownTrend (Multiplicador : Float ; Periodo : Integer ; Deslocamento :
Integer ):Float ;
Parâmetros:
Multiplicador: Float ;ValordeMultiplicadorutilizadonocálculodoindicador.
Periodo: Integer ;Períodoconsiderado.
Deslocamento: Integer ;Deslocamentodeperíodos.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoodadodoindicador”StopSafeZoneDownTrend”,considerando 2,0
(Multiplicador), 10(Período)e 0(Deslocamento)paraocálculo.
1
2
3begin
Plot (SafeZoneDownTrend (2.0,10,0));
end
Exemplo Gráfico:
335

--- PÁGINA 346 ---
19.110 Função SafeZoneUpTrend
Disponível em todas versões.
Afunção SafeZoneUpTrend ()retornaovalordoindicador”StopSafeZoneUpTrend”,deacordocomosparâmetros
desejados. Visaindicarníveisadequadosparaposicionamentodostopduranteumatendênciadealta.
Sintaxe:
Função SafeZoneUpTrend (Multiplicador : Float ; Periodo : Integer ; Deslocamento :
Integer ):Float ;
Parâmetros:
Multiplicador: Float ;ValordeMultiplicadorutilizadonocálculodoindicador.
Periodo: Integer ;Períodoconsiderado.
Deslocamento: Integer ;Deslocamentodeperíodos.
Exemplos de uso:
Noexemploaseguir, seráplotadonográficoodadodoindicador”StopSafeZoneUpTrend”, considerando 2,0
(Multiplicador), 10(Período)e 0(Deslocamento)paraocálculo.
1
2
3begin
Plot (SafeZoneUpTrend (2.0,10,0));
end
Exemplo Gráfico:
336

--- PÁGINA 347 ---
19.111 Função SampleAverage
Disponível em todas versões.
Afunção SampleAverage ()retornaamédiacombaseemdoisperíodosdistintos.
Sintaxe:
Função SampleAverage (shortPeriod : Integer ; longPeriod : Integer ):Float ;
Parâmetros:
shortPeriod: Integer ;Usadoparacalcularumamédiamóveldecurtoprazo.
longPeriod: Integer ;Usadoparacalcularumamédiamóveldelongoprazo.
Exemplos de uso:
Noexemploaseguir, seráplotadonográficooretornodafunção SampleAverage , com 9períodosdecurtoe
longoprazo.
1
2
3begin
Plot (SampleAverage (9,9));
end
Exemplo Gráfico:
337

--- PÁGINA 348 ---
19.112 Função SampleBollinger
Disponível em todas versões.
Afunção SampleBollinger ()retornavalorrelacionadoàs”BandasdeBollinger”.
Sintaxe:
Função SampleBollinger (nPeriod : Integer ; fStandardDeviation : Float ):Float ;
Parâmetros:
nPeriod: Integer ;Defineonúmerodeperíodosutilizadosparacalcularamédiamóvel.
fStandardDeviation: Float ;Representaomultiplicadordedesviopadrão.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção SampleBollinger ,com 9períodose 9,5como
multiplicadordodesviopadrão.
1
2
3begin
Plot (SampleBollinger (9,9.5));
end
Exemplo Gráfico:
338

--- PÁGINA 349 ---
19.113 Função SampleMACD
Disponível em todas versões.
Afunção SampleMACD ()retornavalorrelacionadoàs”MACD”.
Sintaxe:
Função SampleMACD (shortPeriod : Integer ; longPeriod : Integer ; signalPeriod :
Integer ):Float ;
Parâmetros:
shortPeriod: Integer ;Defineonúmerodeperíodosdamédiamóvelexponencialcurta.
longPeriod: Integer ;Defineonúmerodeperíodosdamédiamóvelexponenciallonga.
signalPeriod: Integer ;Defineonúmerodeperíodosdalinhadesinal,queéumamédiamóveldoMACD.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção SampleMACD ,com 12períodosdemédiamóvel
exponencialcurta, 26períodosdemédiamóvelexponenciallongae 9períodosdalinhadesinal.
1
2
3begin
Plot (SampleMACD (12,26,9));
end
Exemplo Gráfico:
339

--- PÁGINA 350 ---
19.114 Função SampleRSI
Disponível em todas versões.
Afunção SampleRSI ()retornavalorbaseadono”RSI”.
Sintaxe:
Função SampleRSI (dSellThreshold : Integer ; dBuyThreshold : Integer ):Float ;
Parâmetros:
dSellThreshold: Integer ;Representaolimitesuperior(níveldesobrecompra).
dBuyThreshold: Integer ;Representaolimiteinferior(níveldesobrevenda).
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção SampleRSI,comlimitesuperior 25einferior
10.
1
2
3begin
Plot (SampleRSI (25,10));
end
Exemplo Gráfico:
340

--- PÁGINA 351 ---
19.115 Função SampleStochastic
Disponível em todas versões.
Afunção SampleStochastic ()retornavaloresrelacionadosaoindicadorestocástico.
Sintaxe:
Função SampleStochastic (nPeriod : Integer ; nLimitBuy : Integer ; nLimitSell :
Integer ):Float ;
Parâmetros:
nPeriod: Integer ;NúmerodeperíodosusadosparacalcularoEstocástico.
nLimitBuy: Integer ;Limiteinferiorparaindicarcondiçãodecompra.
nLimitSell: Integer ;Limitesuperiorparaindicarcondiçãodevenda.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção SampleStochastic (),com 14períodos,limite
inferiordecompra 20e80delimitesuperiordevenda.
1
2
3begin
Plot (SampleStochastic (14,20,80));
end
Exemplo Gráfico:
341

--- PÁGINA 352 ---
19.116 Função SampleVWAP
Disponível em todas versões.
Afunção SampleVWAP ()retornaocálculodo”VWAP”(VolumeWeightedAveragePrice).
Sintaxe:
Função SampleVWAP (fStandardDeviation : Float ):Float ;
Parâmetros:
fStandardDeviation: Float ;DeterminaonúmerodedesviospadrãoaseremaplicadosaoVWAP.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção SampleVWAP ()comdesviopadrãode 2.
1
2
3begin
Plot (SampleVWAP (2));
end
Exemplo Gráfico:
342

--- PÁGINA 353 ---
19.117 Função Santo
Disponível nas versões com o pacote PhiCube.
Afunção Santo ()retornaoindicadorcumulativoquemededireção, forçaeaceleraçãodopreço. Sendoaplicável
emtendênciaeconsolidação,siafórmulaproprietáriaéumacombinaçãodeváriosindicadoresconvencionais.
Sintaxe:
Função Santo (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Determinaoperíodoaserutilizado.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção Santo ()comintervalo 9.
1
2
3begin
Plot (Santo (9));
end
Exemplo Gráfico:
343

--- PÁGINA 354 ---
19.118 Função SlowStochastic
Disponível em todas versões.
Afunção SlowStochastic ()retornaovalordoindicador”EstocásticoLento”,deacordocomoperíododesejado. A
famíliadeindicadoresestocástico(lento,plenoerápido)ajudaaidentificarsituaçõesdecompraevendaexcessiva.
Normalmente,acimade80eabaixode20omercadotorna-sevulnerávelacorreções. Osparâmetros PeriodoMedia
eTipoMediasãoopcionais,casonãosejamdeterminados,serãoutilizadososvalores14e1respectivamente.
Sintaxe:
Função SlowStochastic (Periodo : Integer ; PeriodoMedia : Integer ; TipoMedia :
Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
PeriodoMedia: Integer [var] [Opcional] ;Períodoutilizadonomomentodocálculodamédia.
TipoMedia: Integer [var] [Opcional] ;Tipodamédiaasercalculadapeloindicador:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”EstocásticoLento”,considerando 14períodos
paraocálculo.
1
2
3begin
Plot (SlowStochastic (14));
end
344

--- PÁGINA 355 ---
Exemplo Gráfico:
345

--- PÁGINA 356 ---
19.119 Função SOMOSRENKOTRENDMPONTO
Disponível nas versões com o pacote SomosRenko.
A função SOMOSRENKOTRENDMPONTO ()auxilia no envio de ordens. Tem como função sinalizar 0,5 ponto acima ou
abaixodofechamentodoúltimobox,indicandoopontoexatodeondeoTradedevecolocarsuaordemdecompra
ouvenda,casoentendaqueoúltimofechamentoéumpontodeentradarelevante.
Sintaxe:
Função SOMOSRENKOTRENDMPONTO (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção SOMOSRENKOTRENDMPONTO ().
1
2
3begin
Plot (SOMOSRENKOTRENDMPONTO ());
end
Exemplo Gráfico:
346

--- PÁGINA 357 ---
19.120 Função StdDevConstPeriod
Disponível em todas versões.
Afunção StdDevConstPeriod ()retornaovalordoindicador”StdDevConstPeriod”. Calculaodesviopadrãodeuma
sériededadosemumdeterminadoperíodoconstante.
Sintaxe:
Função StdDevConstPeriod (Dados : Serie ; Periodo : Integer ):Float ;
Parâmetros:
Dados: Serie ;Sériequeseráconsideradaparaocálculo.
Periodo: Integer ;Períodoutilizadonomomentodocálculodamédia.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”StdDevConstPeriod”,considerando 30períodos,
easériedefechamento(Close)paraocálculo.
1
2
3begin
Plot (StdDevConstPeriod (Close, 30));
end
Exemplo Gráfico:
347

--- PÁGINA 358 ---
19.121 Função StopATR
Disponível em todas versões.
Afunção StopATR ()retornaovalordoindicador”StopATR”,deacordocomosparâmetrosdesejados.
Sintaxe:
Função StopATR (Desvio : Float ; Periodo : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Desvio: Float ;Desvioutilizadoparaocálculodoindicador.
Periodo: Integer ;Períodoqueseráconsiderado.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Dado: Integer [Opcional] ;Determinaodadoqueseráobtido:
–[0:]Valorindicador;
–[1:]Flagparainformaraocorrência(retorno): ”0”paraATR+e”1”paraATR.
Exemplos de uso:
No exemplo a seguir, será plotado no gráfico o valor do indicador ”Stop ATR”, considerando 2,0(Desvio), 20
(Períodos)paraocálculo.
1
2
3begin
Plot (StopATR (2.0,20,0));
end
348

--- PÁGINA 359 ---
Exemplo Gráfico:
349

--- PÁGINA 360 ---
19.122 Função TOSCANABRUNELLO
Disponível nas versões com o pacote Toscana.
A função TOSCANABRUNELLO ()trata-se da região de fibo compreendida entre 0% e 23% do movimento, na cor
vermelhacomlinhasdedemarcaçãodaregiãoelinhadedemarcaçãode10%domovimento. Estaregiãoestarána
partedecimacommercadodevendaenapartedebaixocommercadodecompra. Elaéquemdefineadireçãoda
operação, econsequentementefazcomqueosdadosdenegociaçãofuncionemnadireçãocorretadomovimento.
Usabilidade: TécnicadesenvolvidaporFelipeVasconcellos,indicaaregiãoderetraçãodeFibonaccientre0%e23%
domovimentododia.
Sintaxe:
Função TOSCANABRUNELLO (Dias_Retroativos : Integer ; Exibir_linhas : Boolean ;
Exibir_10_Porcento : Boolean ; Estilo_da_Linha : Integer ; Espessura_da_Linha :
Integer ; Filtro_de_Horario : Integer ; Limite_de_Horario : Integer ;
Ativar_Reversão_Avançada : Boolean ; Incluir_GAP_na_Abertura : Boolean ):Float ;
Parâmetros:
Dias_Retroativos: Integer ;Númerodediaspassadosconsideradosparaocálculo.
Exibir_linhas: Boolean ;MostraouocultaaslinhasdaregiãodeFibo.
Exibir_10_Porcento: Boolean ;Mostraouocultaalinhade10%domovimento.
Estilo_da_Linha: Integer ;Defineoestilovisualdalinha.
Espessura_da_Linha: Integer ;Defineaespessura(largura)dalinha.
Filtro_de_Horario: Integer ;Defineseháfiltroporhorário.
Limite_de_Horario: Integer ;Defineohorário-limiteparaconsiderarosdados.
Ativar_Reversão_Avançada: Boolean ;Ativalógicaavançadadereversãodetendência.
Incluir_GAP_na_Abertura: Boolean ;Consideraounãogapsnaaberturadomercado.
350

--- PÁGINA 361 ---
19.123 Função TOSCANAPICCOLA
Disponível nas versões com o pacote Toscana.
Afunção TOSCANAPICCOLA ()mostraregiõesdeoperaçãoqueprecedemasRTs,comoumfibomenortraçadoentre
o Topo ou Fundo e a região das RTs. Estas regiões também se invertem a depender da direção do mercado, se
compraouvenda. Usabilidade: TécnicadesenvolvidaporFelipeVasconcellos, indicaasmicrosregiõesderetração
deFibonacciemrelaçãoàmáximaeamínima,comrelaçãoaretraçãode61%.
Sintaxe:
Função TOSCANAPICCOLA (Dias_Retroativos : Integer ; Exibir_linhas : Boolean ;
Estilo_da_Linha : Integer ; Espessura_da_Linha : Integer ; Filtro_de_Horario :
Integer ; Limite_de_Horario : Integer ; Ativar_Reversão_Avançada : Boolean ;
Incluir_GAP_na_Abertura : Boolean ):Float ;
Parâmetros:
Dias_Retroativos: Integer ;Númerodediaspassadosconsideradosparaocálculo.
Exibir_linhas: Boolean ;MostraouocultaaslinhasdaregiãodeFibo.
Estilo_da_Linha: Integer ;Defineoestilovisualdalinha.
Espessura_da_Linha: Integer ;Defineaespessura(largura)dalinha.
Filtro_de_Horario: Integer ;Defineseháfiltroporhorário.
Limite_de_Horario: Integer ;Defineohorário-limiteparaconsiderarosdados.
Ativar_Reversão_Avançada: Boolean ;Ativalógicaavançadadereversãodetendência.
Incluir_GAP_na_Abertura: Boolean ;Consideraounãogapsnaaberturadomercado.
351

--- PÁGINA 362 ---
19.124 Função TOSCANAPICCOLO
Disponível nas versões com o pacote Toscana.
Afunção TOSCANAPICCOLO ()mostraregiõesdeoperaçãoqueprecedemasRTs,comoumfibomenortraçadoentre
o Topo ou Fundo e a região das RTs. Estas regiões também se invertem a depender da direção do mercado, se
compraouvenda. Usabilidade: TécnicadesenvolvidaporFelipeVasconcellos, indicaasmicrosregiõesderetração
deFibonacciemrelaçãoàmáximaeamínima,comrelaçãoaretraçãode61%.
Sintaxe:
Função TOSCANAPICCOLO (Dias_Retroativos : Integer ; Exibir_linhas : Boolean ;
Exibir_10_Porcento : Boolean ; Estilo_da_Linha : Integer ; Espessura_da_Linha :
Integer ; Filtro_de_Horario : Integer ; Limite_de_Horario : Integer ;
Ativar_Reversão_Avançada : Boolean ; Incluir_GAP_na_Abertura : Boolean ):Float ;
Parâmetros:
Dias_Retroativos: Integer ;Númerodediaspassadosconsideradosparaocálculo.
Exibir_linhas: Boolean ;MostraouocultaaslinhasdaregiãodeFibo.
Exibir_10_Porcento: Boolean ;Mostraouocultaalinhade10%domovimento.
Estilo_da_Linha: Integer ;Defineoestilovisualdalinha.
Espessura_da_Linha: Integer ;Defineaespessura(largura)dalinha.
Filtro_de_Horario: Integer ;Defineseháfiltroporhorário.
Limite_de_Horario: Integer ;Defineohorário-limiteparaconsiderarosdados.
Ativar_Reversão_Avançada: Boolean ;Ativalógicaavançadadereversãodetendência.
Incluir_GAP_na_Abertura: Boolean ;Consideraounãogapsnaaberturadomercado.
352

--- PÁGINA 363 ---
19.125 Função TOSCANAPRODUTIVIDADE
Disponível nas versões com o pacote Toscana.
TOSCANAPRODUTIVIDADE ()éumindicadorcomumasériedeferramentasparauso,combasenocomportamento
datoscanaquepodemserativadosoudesativadospelousuárioquepodemserativadosoudesativadospelousuário,
sendoestes: AamplitudedodiamostradaemtextoàfrentedoGráfico. Linhasdedemarcaçãodamáximaemínima
dodia. Alvosreferentesaofivomedidosdotopoaofundonomomentodosinaldeentrada. Alarmesquepodemser
configuradosporregiãoondeousuáriodesejaqueoalarmesejaexibido. OsalvoseAlarmespodemserconfigurados
comosmesmosfiltrospresentesnaRegradeColoração. Usabilidade: TécnicadesenvolvidaporFelipeVasconcellos,
indicanográficopontosrelevantesparaaoperação,taiscomo: Amplitudedodia,Maximaeminimadodia,alvosde
FibonaccieAlarmes.
Sintaxe:
Função TOSCANAPRODUTIVIDADE (Dias_Retroativos : Integer ; Exibir_Amplitude : Boolean ;
Exibir_Maxima_e_Minima : Boolean ; Exibir_Alvos_de_Fibo : Boolean ;
Espessura_Maxima_e_Minima : Integer ; Espessura_Alvos : Integer ;
Fonte_da_Amplitude : Integer ; Exibir_Alvo_138 : Boolean ; Exibir_Alvo_150 :
Boolean ; Exibir_Alvo_161 : Boolean ; Exibir_Alvo_200 : Boolean ; Ativar_RT61 :
Boolean ; Ativar_RT50 : Boolean ; Ativar_RT38 : Boolean ; Ativar_Brunello : Boolean
; Filtro_de_Horario : Integer ; Filtro_de_Amplitude : Integer ;
Filtro_de_Rompimento : Integer ; Ativar_Reversão_Avançada : Boolean ;
Incluir_GAP_na_Abertura : Boolean ; Filtro_de_Horario_Dolar : Integer ;
Limite_de_Horario_Dolar : Integer ; Filtro_de_Amplitude_Dolar : Integer ;
Filtro_de_Rompimento_Dolar : Integer ; Filtro_de_Horario_Indice : Integer ;
Limite_de_Horario_Indice : Integer ; Filtro_de_Amplitude_Indice : Integer ;
Filtro_de_Rompimento_Indice : Integer ; Filtro_de_Horario_Ações : Integer ;
Limite_de_Horario_Ações : Integer ; Filtro_de_Amplitude_Ações : Integer ;
Filtro_de_Rompimento_Ações : Integer ):Float ;
Parâmetros:
Dias_Retroativos: Integer ;Númerodediaspassadosconsideradosparaocálculo.
Exibir_Amplitude: Boolean ;Defineseaamplitudedodia(diferençaentremáximaemínima)seráexibida
comotextonográfico.
Exibir_Maxima_e_Minima: Boolean ;Defineseaslinhasdedemarcaçãodamáximaemínimadodiaserão
exibidas.
Exibir_Alvos_de_Fibo: Boolean ;Habilitaoudesabilitaaexibiçãodosalvosbaseadosemníveisderetração
deFibonaccinográfico.
Espessura_Maxima_e_Minima: Integer ;Defineaespessura(largura)daslinhasdamáximaemínimadodia.
Espessura_Alvos: Integer ;Defineaespessura(largura)daslinhasdosalvosdeFibonacci.
Fonte_da_Amplitude: Integer ;Defineotamanhoouestilodafonteusadaparaexibirotextodaamplitude
dodia.
Exibir_Alvo_138: Boolean ;ControlaaexibiçãodoalvobaseadononíveldeFibonacci138%.
Exibir_Alvo_150: Boolean ;ControlaaexibiçãodoalvobaseadononíveldeFibonacci150%.
Exibir_Alvo_161: Boolean ;ControlaaexibiçãodoalvobaseadononíveldeFibonacci161%.
Exibir_Alvo_200: Boolean ;ControlaaexibiçãodoalvobaseadononíveldeFibonacci200%.
Ativar_RT61: Boolean ;AtivaaretraçãodeFibonaccide61%paraanáliseeexibição.
353

--- PÁGINA 364 ---
Ativar_RT50: Boolean ;AtivaaretraçãodeFibonaccide50%paraanáliseeexibição.
Ativar_RT38: Boolean ;AtivaaretraçãodeFibonaccide38%paraanáliseeexibição.
Ativar_Brunello: Boolean ;Ativaalógicaoumétodochamado“Brunello”(técnicaoufiltroespecíficodesen-
volvidopeloautor).
Filtro_de_Horario: Integer ;Definese e qual filtrode horário será aplicado paraconsideraros dados na
análise.
Filtro_de_Amplitude: Integer ;Define um filtro baseado na amplitude para incluir ou excluir dados da
análise.
Filtro_de_Rompimento: Integer ;Define um filtro para considerar rompimentos no preço, influenciando a
análise.
Ativar_Reversão_Avançada: Boolean ;Ativaumalógicaavançadaparadetectarreversõesdetendência
Incluir_GAP_na_Abertura: Boolean ;Determinasegaps(diferençasdepreçonaabertura)devemsercon-
sideradosnaanálise.
Filtro_de_Horario_Dolar: Integer ;Filtrodehorárioespecíficoparadadosdemercadodedólar.
Limite_de_Horario_Dolar: Integer ;Defineohoráriolimiteparaconsiderardadosdomercadodedólar.
Filtro_de_Amplitude_Dolar: Integer ;Filtrodeamplitudeespecíficoparaomercadodedólar.
Filtro_de_Rompimento_Dolar: Integer ;Filtroderompimentoespecíficoparaomercadodedólar.
Filtro_de_Horario_Indice: Integer ;Filtrodehorárioespecíficoparadadosdemercadodeíndice.
Limite_de_Horario_Indice: Integer ;Defineohoráriolimiteparaconsiderardadosdomercadodeíndice.
Filtro_de_Amplitude_Indice: Integer ;Filtrodeamplitudeespecíficoparaomercadodeíndice.
Filtro_de_Rompimento_Indice: Integer ;Filtroderompimentoespecíficoparaomercadodeíndice.
Filtro_de_Horario_Ações: Integer ;Filtrodehorárioespecíficoparadadosdemercadodeações.
Limite_de_Horario_Ações: Integer ;Defineohoráriolimiteparaconsiderardadosdomercadodeações.
Filtro_de_Amplitude_Ações: Integer ;Filtrodeamplitudeespecíficoparaomercadodeações.
Filtro_de_Rompimento_Ações: Integer ;Filtroderompimentoespecíficoparaomercadodeações.
354

--- PÁGINA 365 ---
19.126 Função TOSCANART
Disponível nas versões com o pacote Toscana.
TOSCANART ()São Regiões da Toscana, área verde mostra a região central do fibo, que se inicia em 38% e se
estendeaté61%domovimento,comlinhasdedemarcaçãoexternas,alinhacentralmarcaos50%domovimento.
Usabilidade: TécnicadesenvolvidaporFelipeVasconcellos,indicaasregiõesderetraçãodeFibonacciemrelaçãoà
máximadomercadonodia,mostrandoasregiões61%,50%e38%.
Sintaxe:
Função TOSCANART (Dias_Retroativos : Integer ; Exibir_Linhas : Boolean ;
Estilo_da_Linha : Integer ; Espessura_da_Linha : Integer ; Filtro_de_Horario :
Integer ; Limite_de_Horario : Integer ; Ativar_Reversão_Avançada : Boolean ;
Incluir_GAP_na_Abertura : Boolean ):Float ;
Parâmetros:
Dias_Retroativos: Integer ;Númerodediaspassadosconsideradosparaocálculo.
Exibir_Linhas: Boolean ;Defineseaslinhasquedemarcamasregiõesderetraçãoserãoexibidasnográfico.
Estilo_da_Linha: Integer ;Determinaoestilovisualdaslinhasnográfico.
Espessura_da_Linha: Integer ;Define a espessura (largura) das linhas que representam as retrações de
Fibonaccinográfico.
Filtro_de_Horario: Integer ;Defineseháfiltroporhorário.
Limite_de_Horario: Integer ;Defineohoráriolimiteparaconsiderarosdadosnocálculoenaexibiçãodas
regiões.
Ativar_Reversão_Avançada: Boolean ;Ativalógicaavançadadereversãodetendência.
Incluir_GAP_na_Abertura: Boolean ;Consideraounãogapsnaaberturadomercado.
355

--- PÁGINA 366 ---
19.127 Função TRIX
Disponível em todas versões.
Afunção TRIX ()retornaovalordoindicador”TRIX”,deacordocomoperíodoetipodemédiadesejados. Utilizado
paraidentificarreversões,éumindicadormomentumprojetadoparafiltrarciclosirrelevantes.
Sintaxe:
Função TRIX (Media : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Media: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”TRIX”,considerando 9(Média)períodosetipo
exponecialparaocálculo.
1
2
3begin
Plot (TRIX (9,1));
end
Exemplo Gráfico:
356

--- PÁGINA 367 ---
19.128 Função TRIXM
Disponível em todas versões.
Afunção TRIXM ()retornaovalordoindicador”TRIXM”,deacordocomoperíodoetipodemédiadesejados. Este
indicadoréaprópriamedidadataxadevariaçãodoTRIX.Porrepresentaromomentumpossuicurvamaisagressiva.
Sintaxe:
Função TRIXM (Media : Integer ; Tipo : Integer ):Float ;
Parâmetros:
Media: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Tipo: Integer ;Determinaqualmédiaseráconsiderada:
–[0:]Aritmética;
–[1:]Exponencial;
–[2:]WellesWilder;
–[3:]Ponderada.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”TRIXM”,considerando 9(Média)períodose
tipoexponecial( 1)paraocálculo.
1
2
3begin
Plot (TRIXM (9,1));
end
Exemplo Gráfico:
357

--- PÁGINA 368 ---
19.129 Função TRPTAX
Disponível nos produtos Pro ou Ultra.
Afunção TRPTAX ()retornaovalordoindicador”TR-PTAX”. Esteindicadoréumatacadecâmbiocalculadadurante
odiapeloBancoCentraldoBrasil. Consistenamédiadastaxasinformadaspelosdealersdedolardurante4janelas
dodia.
Sintaxe:
Função TRPTAX (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”TR-PTAX”.
1
2
3begin
Plot (TRPTAX );
end
Exemplo Gráfico:
358

--- PÁGINA 369 ---
19.130 Função TRPTAXFuturo
Disponível em todas versões.
A função TRPTAXFuturo ()retorna o valor do indicador ”TR - PTAX futuro”. Este indicador é uma taca de câmbio
calculadaduranteodiapeloBancoCentraldoBrasil. Consistenamédiadastaxasinformadaspelosdealersdedolar
durante4janelasdodia.
Sintaxe:
Função TRPTAXFuturo (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”TR-PTAXfuturo”.
1
2
3begin
Plot (TRPTAXFuturo );
end
Exemplo Gráfico:
359

--- PÁGINA 370 ---
19.131 Função Tilson
Disponível em todas versões.
Afunção Tilson ()retornaovalordoindicador”Tillson’sT3MovingAverage”,deacordocomosparâmetrosdeseja-
dos. O”TMovingAverage”éumtipodemédiamóvelquesetornouumindicadorpopularnaanálisetécnica. Conta
comumbaixoatrasoemrelaçãoaográficodepreços,eumalinhamaissuavizada.
Sintaxe:
Função Tilson (Fator : Float ; Media : Integer ):Float ;
Parâmetros:
Fator: Float ;DeterminaoFatorparaformaçãodocálculo.
Media: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
No exemplo a seguir, será plotado no gráfico o valor do indicador ”Tillson’s T3 Moving Average”, considerando
0,7(Fator)e 3(Media)paraocálculo.
1
2
3begin
Plot (Tilson (0.7,3));
end
Exemplo Gráfico:
360

--- PÁGINA 371 ---
19.132 Função TimeAgrBuySell
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
Afunção TimeAgrBuySell ()retornaovalordoindicador”TR-TempoAgressão-Compra”. ÉumindicadordeTape
ReadingdesenvolvidopelaScalperTrader.
Sintaxe:
Função TimeAgrBuySell (AlertaVariacoes : Integer ):Float ;
Parâmetros:
AlertaVariacoes: Integer ;Quantidadedevariaçõesqueserãoconsideradas.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção,considerando 3variações.
1
2
3begin
Plot (TimeAgrBuySell (3));
end
Exemplo Gráfico:
361

--- PÁGINA 372 ---
19.133 Função TimeAgrSellBuy
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
Afunção TimeAgrSellBuy ()retornaovalordoindicador”TR-TempoAgressão-Venda”. ÉumindicadordeTape
ReadingdesenvolvidopelaScalperTrader.
Sintaxe:
Função TimeAgrSellBuy (AlertaVariacoes : Integer ):Float ;
Parâmetros:
AlertaVariacoes: Integer ;Quantidadedevariaçõesqueserãoconsideradas.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção,considerando 3variações.
1
2
3begin
Plot (TimeAgrSellBuy (3));
end
Exemplo Gráfico:
362

--- PÁGINA 373 ---
19.134 Função TimeAgrTotal
Disponível nos produtos Pro ou Ultra ou módulo Scalper.
A função TimeAgrTotal ()retorna o valor do indicador ”TR - Tempo Agressão - Total”. É um indicador de Tape
ReadingdesenvolvidopelaScalperTrader.
Sintaxe:
Função TimeAgrTotal (AlertaVariacoes : Integer ):Float ;
Parâmetros:
AlertaVariacoes: Integer ;Quantidadedevariaçõesqueserãoconsideradas.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção,considerando 3variações.
1
2
3begin
Plot (TimeAgrTotal (3));
end
Exemplo Gráfico:
363

--- PÁGINA 374 ---
19.135 Função TopBottomDetector
Disponível em todas versões.
Afunção TopBottomDetector ()retornaovalordoindicador”DetectordeToposeFundos”,deacordocomoperíodo
desejado. Identificavaloresextremosnográficodeumativoparafacilitaraobservaçãodomovimentodospreços,
filtrandoasoscilaçõesmenossignificativas.
Sintaxe:
Função TopBottomDetector (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”DetectordeToposeFundos”,considerando 2
períodoparaocálculo.
1
2
3begin
Plot (TopBottomDetector (2));
end
Exemplo Gráfico:
364

--- PÁGINA 375 ---
19.136 Função TRENDAVERAGE
Disponível em todas versões.
Afunção TRENDAVERAGE ()determinaavolatilidadedequalquerativodeformavisual.
Sintaxe:
Função TRENDAVERAGE (Dias_Retroativos : Integer ; Cor_Compra_1Verde_2Azul : Integer ;
Cor_Venda_3Red_4Fucsia : Integer ; Cor_Reversão_1Sim_2Não : Integer ;
CorRev_5Amarelo_6Branco : Integer ):Float ;
Parâmetros:
Dias_Retroativos: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Cor_Compra_1Verde_2Azul: Integer ;Determinaacoloraçãodecompra:
–[1:]Verde;
–[2:]Azul.
Cor_Venda_3Red_4Fucsia: Integer ;Determinaacoloraçãodevenda:
–[3:]Vermelho;
–[4:]Fucsia.
Cor_Reversão_1Sim_2Não: Integer ;Determinaseareversãoseráaplicadaounão:
–[1:]Sim;
–[2:]Não.
CorRev_5Amarelo_6Branco: Integer ;Determinaacoloraçãodereversão:
–[5:]Amarelo;
–[6:]Branco.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção TRENDAVERAGE (),com 90diasretroativos,cor
verde( 1)paracompras,vermelho( 3)paravendas,comreversão( 1)ecoramarela( 5).
1
2
3begin
Plot (TRENDAVERAGE (90,1,3,1,5));
end
365

--- PÁGINA 376 ---
Exemplo Gráfico:
366

--- PÁGINA 377 ---
19.137 Função TRENDCLOUD
Disponível em todas versões.
Afunção TRENDCLOUD ()retornaovalordoindicador”Tradencia-TrendCloud”. IndicadordeTendênciade”nuvem”
combasenocruzamentodeduasmédiastilson(T3)eregradecoloraçãoespecífica. UtilizadopeloTradenciaTraders
Clube.
Sintaxe:
Função TRENDCLOUD (Dias_Retroativos : Integer ; Cor_Compra_1Verde_2Azul : Integer ;
Vwap_1Ligado_2Desligado : Integer ; Cor_Venda_3Red_4Fucsia : Integer ):Float ;
Parâmetros:
Dias_Retroativos: Integer ;Determinaosdiasretroativos.
Cor_Compra_1Verde_2Azul: Integer ;Determinaacoloraçãodecompra:
–[1:]Verde;
–[2:]Azul.
Vwap_1Ligado_2Desligado: Integer ;DeterminaautilizaçãoounãodeVWAP:
–[1:]Ligado;
–[2:]Desligado.
Cor_Venda_3Red_4Fucsia: Integer ;Determinaacoloraçãodevenda:
–[3:]Vermelho;
–[4:]Fucsia.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”Tradencia-TrendCloud”,considerando 90dias
retroativossemVWAP.
1
2
3begin
Plot (TRENDCLOUD (90,2,2,3));
end
367

--- PÁGINA 378 ---
Exemplo Gráfico:
368

--- PÁGINA 379 ---
19.138 Função TRENDDIFUSOR
Disponível em todas versões.
A função TRENDDIFUSOR ()determina regiões de teversão de mercado para qualquer ativo, tempo e gráfico, bem
comolateralidade.
Sintaxe:
Função TRENDDIFUSOR (Ligar_Linhas_1Sim_2Nao : Integer ; Valor : Integer ;
Cor_compra_1Verde_2Azul : Integer ):Float ;
Parâmetros:
Ligar_Linhas_1Sim_2Nao: Integer ;Períodoutilizadonomomentodocálculodoindicador.
–[1:]Sim;
–[2:]Não.
Valor: Integer ;Determinavalorparaocalculo:
Cor_compra_1Verde_2Azul: Integer ;Determinaacoloraçãodevenda:
–[1:]Verde;
–[2:]Azul.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção TRENDDIFUSOR (),comligamentosdelinhas
1,valor( 30),ecorverde( 1)paracompras.
1
2
3begin
Plot (TRENDDIFUSOR (1,30,1));
end
369

--- PÁGINA 380 ---
Exemplo Gráfico:
370

--- PÁGINA 381 ---
19.139 Função TRENDFLOW
Disponível em todas versões.
A função TRENDFLOW ()registra o volume de agressão que está ocorrendo no mercado em forma de histograma e
análisedereversãodosmovimentosesuacontinuidade.
Sintaxe:
Função TRENDFLOW (Dias_Retroativos : Integer ; Strong_1Ligado_2Desligado : Integer ;
CorIndecisao_1Branco_2Preto : Integer ; Cor_compra_1Verde_2Azul : Integer ):Float
;
Parâmetros:
Dias_Retroativos: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Strong_1Ligado_2Desligado: Integer ;
–[1:]Ligado;
–[2:]Desligado.
CorIndecisao_1Branco_2Preto: Integer ;Determinaacoloraçãodeindecisão:
–[1:]Branco;
–[2:]Preto.
Cor_compra_1Verde_2Azul: Integer ;Determinaacoloraçãodecompra:
–[1:]Verde;
–[2:]Azul.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção TRENDFLOW (),com 30diasretroativos,strong
ligado( 1),cordeindecisãobranca( 1)ecordecomrpaverde( 1).
1
2
3begin
Plot (TRENDFLOW (30,1,1,1));
end
371

--- PÁGINA 382 ---
Exemplo Gráfico:
372

--- PÁGINA 383 ---
19.140 Função TRENDSNIPER
Disponível em todas versões.
Afunção TRENDSNIPER ()retornaovalordoindicador”Tradencia-TrendSniper”. RegradecoloraçãodeTendência
baseadonocruzamentodeduasmédiascomvolatilidade. UtilizadopeloTradenciaTradersClube.
Sintaxe:
Função TRENDSNIPER (Dias_Retroativos : Integer ; Cor_Compra_1Verde_2Azul : Integer ;
Vwap_1Ligado_2Desligado : Integer ; Cor_Venda_3Red_4Fucsia : Integer ;
Reversão_1Ligado_2Desligado : Integer ):Float ;
Parâmetros:
Dias_Retroativos: Integer ;Determinaosdiasretroativos.
Cor_Compra_1Verde_2Azul: Integer ;Determinaacoloraçãodecompra:
–[1:]Verde;
–[2:]Azul.
Vwap_1Ligado_2Desligado: Integer ;DeterminaautilizaçãoounãodeVWAP:
–[1:]Ligado;
–[2:]Desligado.
Cor_Venda_3Red_4Fucsia: Integer ;Determinaacoloraçãodevenda:
–[3:]Vermelho;
–[4:]Fucsia.
Reversão_1Ligado_2Desligado: Integer ;Determinaseareversãoseráaplicadaounão:
–[1:]Ligado;
–[2:]Desligado.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”Tradencia-TrendCloud”,considerando 30dias
retroativossemVWAP.
1
2
3begin
Plot (TRENDSNIPER (30,2,2,3,1));
end
373

--- PÁGINA 384 ---
Exemplo Gráfico:
374

--- PÁGINA 385 ---
19.141 Função TRENDSOLDIER
Disponível em todas versões.
Afunção TRENDSOLDIER ()éumaregradecoloraçãodefinitivacombasenos3dadosfornecidospelaB3: volume,
preçoeagressão.
Sintaxe:
Função TRENDSOLDIER (Dias_Retroativos : Integer ; Strong_1Ligado_2Desligado : Integer
; CorIndecisao_1Branco_2Preto : Integer ; Cor_compra_1Verde_2Azul : Integer ):
Float ;
Parâmetros:
Dias_Retroativos: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Strong_1Ligado_2Desligado: Integer ;
–[1:]Ligado;
–[2:]Desligado.
CorIndecisao_1Branco_2Preto: Integer ;Determinaacoloraçãodeindecisão:
–[1:]Branco;
–[2:]Preto.
Cor_compra_1Verde_2Azul: Integer ;Determinaacoloraçãodecompra:
–[1:]Verde;
–[2:]Azul.
Exemplos de uso:
No exemplo a seguir, será plotado no gráfico o retorno da função TRENDSOLDIER (), com 30dias retroativos,
strongligado( 1),cordeindecisãobranca( 1)ecordecomrpaverde( 1).
1
2
3begin
Plot (TRENDSOLDIER (30,1,1,1));
end
375

--- PÁGINA 386 ---
Exemplo Gráfico:
376

--- PÁGINA 387 ---
19.142 Função TRADENCIATRENDVARIATION
Disponível em todas versões.
A função TRADENCIATRENDVARIATION ()retorna o valor do indicador ”Tradencia - TrendVariation”. Estratégia de
operaçõescontraatendênciacombaseemvariaçãopercentualdoativo,quepodemserpersonalizadaspelousuário
escolhendo o valor do percentual e também de qual tipo de valor decorrerá a variação, podendo escolher entre
fechamento,ajuste,abertura,máxima,mínima,vwapdiária,semanaloumensal.
Sintaxe:
Função TRADENCIATRENDVARIATION (Tipo : Integer ; Dias_Retroativos : Integer ; Pct1 :
Float ; Pct2 : Float ; Pct3 : Float ; Pct4 : Float ; HoraInicio : Integer ;
HoraFechamento : Integer ; Alvo : Integer ; Stop : Integer ):Float ;
Parâmetros:
Tipo: Integer ;Determinaotipodevariação.
–[0:]Fechamento;
–[1:]Ajuste;
–[2:]Abertura;
–[3:]Máxima;
–[4:]Mínima;
–[5:]VWAPdiária;
–[6:]VWAPsemanal;
–[7:]VWAPmensal.
Dias_Retroativos: Integer ;Determinaosdiasretroativos.
Pct1: Float ;Percentualdefinidopelousuárioparacomporolimitedasfaixasdevariação.
Pct2: Float ;Percentualdefinidopelousuárioparacomporolimitedasfaixasdevariação.
Pct3: Float ;Percentualdefinidopelousuárioparacomporolimitedasfaixasdevariação.
Pct4: Float ;Percentualdefinidopelousuárioparacomporolimitedasfaixasdevariação.
HoraInicio: Integer ;Determinaohoráriodeinicio.
HoraFechamento: Integer ;Determinaohoráriodefechamento.
Alvo: Integer ;Determinaoalvo.
Stop: Integer ;Determinaumstop.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”Tradencia-TrendCloud”,considerando 30dias
retroativos.
1
2
3begin
Plot (TRADENCIATRENDVARIATION (2,30,1.5,1.5,1.5,1.5,0900 ,1730 ,10,10));
end
377

--- PÁGINA 388 ---
Exemplo Gráfico:
378

--- PÁGINA 389 ---
19.143 Função TRENDVOLAG
Disponível em todas versões.
Afunção TRENDVOLAG ()éumaregradecoloraçãoparaanálisedefluxodecandleacandle, registrandoovolume
visualmente.
Sintaxe:
Função TRENDVOLAG (voIM : Integer ):Float ;
Parâmetros:
voIM: Integer ;Defineonúmerodecandlesanteriores(períodoretroativo)consideradosnaanálisedevolume.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção TRENDVOLAG ().
1
2
3begin
Plot (TRENDVOLAG (30));
end
Exemplo Gráfico:
379

--- PÁGINA 390 ---
19.144 Função Trades
Disponível em todas versões.
Afunção Trades ()retornaovalordoindicador”Negócios”. Mostraosnegóciosrealizadosduranteasnegociações.
Éumimportanteelementonaconfirmaçãodemovimentos.
Sintaxe:
Função Trades (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoodadodoindicador”Negócios”.
1
2
3begin
Plot (Trades );
end
Exemplo Gráfico:
380

--- PÁGINA 391 ---
19.145 Função TwoMVAggression
Disponível nas versões com o pacote 2MV.
Afunção TwoMVAggression ()retornaoindicador2MVAgressão,sendoelaboradoparaapontarospontosderompi-
mentoeapoiarsuasentradasdecompraouvenda,fazendoumaleituradeordens.
Sintaxe:
Função TwoMVAggression (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção TwoMVAggression ().
1
2
3begin
Plot (TwoMVAggression ());
end
Exemplo Gráfico:
381

--- PÁGINA 392 ---
19.146 Função TwoMVPower
Disponível nas versões com o pacote 2MV.
Afunção TwoMVPower ()retornaoindicador2MV,sendocriadoparaidentificarosmelhorespontosdeentradaspara
ScalpeTendênciaemoperaçõesDayTrade. PodeseraplicadoparaSwingTradeePositionemgráficosmaiores.
Sintaxe:
Função TwoMVPower (Período1 : Integer ; Período2 : Integer ; Período3 : Integer ; Media
:Integer ):Float ;
Parâmetros:
Período1: Integer ;Determinaoprimeiroperíodoparaocalculodafunção.
Período2: Integer ;Determinaosegundoperíodoparaocalculodafunção.
Período3: Integer ;Determinaoterceiroperíodoparaocalculodafunção.
Media: Integer ;Defineoperíodoparaocálculodamédiautilizadanafunção.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção TwoMVPower ().
1
2
3begin
Plot (TwoMVPower (9,9,9,9));
end
Exemplo Gráfico:
382

--- PÁGINA 393 ---
19.147 Função VSS
Disponível em todas versões.
A função VSS()retornao valor do indicador ”VSS”, de acordocom os parâmetros desejados. Utiliza a volatilidade
paradefinirbonspontosparaacolocaçãodestop.
Sintaxe:
Função VSS(Multiplicador : Float ; Media : Integer ; Deslocamento : Integer ):Float ;
Parâmetros:
Multiplicador: Float ;ValordeMultiplicadorutilizadonocálculodoindicador.
Media: Integer ;Períododamédiautilizada.
Deslocamento: Integer ;Deslocamentodeperíodos.
Exemplos de uso:
No exemplo a seguir, será plotado no gráfico o valor do indicador ”VSS”, considerando 1,5(Multiplicador), 5
(Média)períodose 0(Deslocamento)paraocálculo.
1
2
3begin
Plot (VSS(1.5,5,0));
end
Exemplo Gráfico:
383

--- PÁGINA 394 ---
19.148 Função VWAP
Disponível em todas as versões, exceto Vector Basic e BA One.
Afunção VWAP ()retornaovalordoindicador”VWAP”,deacordocomaperiodicidadedesejada. OVWAPéopreço
médioponderadopelovolumedeumacotação. Podeserutilizadoparamedirseopreçoatualestásobrecomprado
ousobrevendidoaopreçomédio.
Sintaxe:
Função VWAP (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoparaobterodadodoindicador:
–[0:]Barra;
–[1:]Diário;
–[2:]Semanal;
–[3:]Mensal.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”VWAP”,considerandoaperiodicidadediária.
1
2
3begin
Plot (VWAP (1));
end
Exemplo Gráfico:
384

--- PÁGINA 395 ---
19.149 Função VWAPDate
Disponível em todas as versões, exceto Vector Basic e BA One.
Afunção VWAPDate ()retornaopreçomédioponderadopelovolume,apartirdeumadataehorárioespecíficos. O
VWAPDataéopreçomédioponderadopelovolumedeumacotação, começandoapartirdeumadataespecífica.
Podeserutilizadoparamedirseopreçoatualestásobrecompradoousobrevendidoemrelaçãoaopreçomédio.
Sintaxe:
Função VWAPDate (Data : Integer ; Time : Integer ):Float ;
Parâmetros:
Data: Integer ;Datadereferência,parainíciodocálculo. ADataprecisaserumaconstante:
Time: Integer ;Horárioinicial.
Exemplos de uso:
No exemplo a seguir, será plotado no gráfico o retorno da chamada, considerando a partir do dia 01/01/2025
(1250502)às9h00.
1
2
3begin
Plot (VWAPDate (1250502 ,900));
end
Exemplo Gráfico:
385

--- PÁGINA 396 ---
19.150 Função VWAPMonthly
Disponível em todas as versões, exceto Vector Basic e BA One.
A função VWAPMonthly ()retorna o valor do indicador ”VWAP Mensal”. O VWAP é o preço médio ponderado pelo
volume de uma cotação. Pode ser utilizado para medir se o preço atual está sobrecomprado ou sobrevendido ao
preçomédio.
Sintaxe:
Função VWAPMonthly (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”VWAPMonthly”.
1
2
3begin
Plot (VWAPMonthly );
end
Exemplo Gráfico:
386

--- PÁGINA 397 ---
19.151 Função VWAPWeekly
Disponível em todas as versões, exceto Vector Basic e BA One.
A função VWAPWeekly ()retorna o valor do indicador ”VWAP Semanal”. O VWAP é o preço médio ponderado pelo
volume de uma cotação. Pode ser utilizado para medir se o preço atual está sobrecomprado ou sobrevendido ao
preçomédio.
Sintaxe:
Função VWAPWeekly (): Float ;
Parâmetros:
Semparâmetros.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”VWAPWeekly”.
1
2
3begin
Plot (VWAPWeekly );
end
Exemplo Gráfico:
387

--- PÁGINA 398 ---
19.152 Função VWMA
Disponível em todas versões.
Afunção VWMA ()retornaovalordoindicador”VWMA”,deacordocomoperíododesejado. Amédiamóvelponder-
ada por volume (VWMA) é uma variação da média móvel tradicional, onde aplica o volume de cada candle como
multiplicadornocálculoponderadodamédia.
Sintaxe:
Função VWMA (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
No exemplo a seguir, será plotado no gráfico o valor do indicador ”VWMA”, considerando 10períodos para o
cálculo.
1
2
3begin
Plot (VWMA (10));
end
Exemplo Gráfico:
388

--- PÁGINA 399 ---
19.153 Função Valerie
Disponível em todas versões.
Afunção Valerie ()retornaovalordoindicador”Válerie”,conformeosparâmetrosdesejados. CriadopelaVálerie
com objetivo de identificar as correções de mercado com base em cálculo estatístico. Observar os pontos como
regiõesdeinversãodefluxoourealizaçãodelucro.
Sintaxe:
Função Valerie (Periodo : Integer ; Offset : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonocálculodoindicador.
Offset: Integer ;Offsetconsiderado.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodachamada,considerando 45períodos,e 5paraoOffset.
1
2
3begin
Plot (Valerie (45,5));
end
Exemplo Gráfico:
389

--- PÁGINA 400 ---
19.154 Função VolumeAgent
Disponível nas versões Ultra ou com a Automação de Estratégias 2.
Afunção VolumeAgent ()retornaovolumefinanceirofiltradopeloagente.
Sintaxe:
Função VolumeAgent (AgentID : Integer ; Período : Integer ):Float ;
Parâmetros:
AgentID: Integer ;IDdoAgenteescolhido.
Periodo: Integer ;Determinaqualtipodecálculodovolumeseráobtido:
–1:Retornaovolumediário,nãoimportandootempográficoondeestáexecutando;
–2:Retornaovolumecandleacandle.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção VolumeAgent ().
1
2
3begin
Plot (VolumeAgent (baItau ,1));
end
Exemplo Gráfico:
390

--- PÁGINA 401 ---
19.155 Função VolumeAtPrice
Exclusivo da versão Profit Ultra e Automações Premium ou superior
Afunção VolumeAtPrice ()retornaovolumenegociadoexatamentenopreçoespecificado,considerandoointervalo
etipodefinidos.
Os dados do Volume Profile não fornecem um histórico extenso, o que limita o backtest de estratégias que utilizam essa
função.
Oparâmetro Intervaldefineoperíododeanáliseepodeassumirosvalores itDaily(intervalodiário)ou itMinute
(intervaloemminutos). O Offsetindicaquantosperíodosatrásocálculodeveconsiderar,sendo 0operíodoatual
eaté 720paraperíodosanteriores.
O parâmetro Typedetermina o tipo de volume a ser analisado: vtFinancial (volume financeiro), vtQuantity
(quantidadedepapéis)ou vtTrade(númerodenegócios). Osparâmetros Standard,AuctioneCrosscontrolam
ainclusão,respectivamente,denegóciospadrão,leilõeseoperaçõescruzadas. Todosassumem Trueporpadrão.
Afunçãodeveserfinalizadacomopreçodesejadoentrebarrasverticais,noformato |Price|,onde Pricerepresenta
ovalorexatonoqualovolumeseráconsultado.
Sintaxe:
Função VolumeAtPrice (Interval: Integer ; Offset: Integer ; Type: Integer ; Standard:
Boolean ; Auction: Boolean ; Cross: Boolean ):Float ;
Parâmetros:
Interval: Integer ;Intervalodaanálise.
Offset: Integer [Opcional] ;Deslocamentodabarra. [Padrão = 1]
Type: Integer [Opcional] ;Tipodevolumeaconsiderar. [Padrão = 1]
Standard: Boolean [Opcional] ;Consideravolumepadrão. [Padrão = True]
Auction: Boolean [Opcional] ;Consideravolumedeleilão. [Padrão = True]
Cross: Boolean [Opcional] ;Consideravolumecruzado. [Padrão = True]
Price: Float ;Preçoexatonoqualsedesejaconsultarovolume.
Exemplos:
No exemplo a seguir, será atribuído à variável dVolumeAtPrice o volume no preço 38,60para os últimos 60
minutos.
1
2
3
4
5var
dVolumeAtPrice: Float ;
begin
dVolumeAtPrice := VolumeAtPrice (itMinute ,60,vtTrade ,True ,True ,True )|38.60 |;
end;
391

--- PÁGINA 402 ---
19.156 Função Williams
Disponível em todas versões.
A função Williams ()retorna o valor do indicador ”Williams %R”, de acordo com o período desejado. É parecido
comoestocástico,comparaofechamentocomovalormaisaltodedeterminadoperíodo.
Sintaxe:
Função Williams (Periodo : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos de uso:
Noexemploaseguir,seráplotadonográficoovalordoindicador”Williams%R”,considerando 14períodospara
ocálculo.
1
2
3begin
Plot (Williams (14));
end
Exemplo Gráfico:
392

--- PÁGINA 403 ---
20Funções de Livro
20.1 Função AskPrice
Disponível em todas versões.
Afunção AskPrice ()retornaopreçodamelhorofertadevenda.
Sintaxe:
Função AskPrice (Asset: Ativo ):Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso não tenha posição aberta, será atribuído à variável asko valor do topo (melhor oferta de
venda)dolivro.
1
2
3
4
5
6
7var
ask : Float ;
begin
ifnot HasPosition then
ask := AskPrice ;
Plot (ask);
end;
Exemplo Gráfico:
393

--- PÁGINA 404 ---
20.2 Função AskSize
Disponível em todas versões.
Afunção AskSize ()retornaaquantidadedamelhorofertadevenda.
AoutilizaromododeCrossOrdernaautomação,oAskSizeiráretornaraquantidadedoAskSizedaseríehistórica,e
nãonoativodenegociação.
Sintaxe:
Função AskSize (Asset: Ativo ):Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso não tenha posição aberta, será atribuído à variável qtdaska quantidade do topo (melhor
ofertadevenda)dolivro.
1
2
3
4
5
6
7var
qtdask : Float ;
begin
ifnot HasPosition then
qtdask := AskPrice ;
Plot (qtdask);
end;
Exemplo Gráfico:
394

--- PÁGINA 405 ---
20.3 Função BidPrice
Disponível em todas versões.
Afunção BidPrice ()retornaopreçodamelhorofertadecompra.
Sintaxe:
Função BidPrice (Asset: Ativo ):Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso não tenha posição aberta, será atribuído à variável bido valor de topo (melhor oferta de
compra)dolivro.
1
2
3
4
5
6
7var
bid : Float ;
begin
ifnot HasPosition then
bid := BidPrice ;
Plot (bid);
end;
Exemplo Gráfico:
395

--- PÁGINA 406 ---
20.4 Função BidSize
Disponível em todas versões.
Afunção BidSize ()retornaaquantidadedamelhorofertadecompra.
AoutilizaromododeCrossOrdernaautomação,oBidSizeiráretornaraquantidadedoBidSizedaseríehistórica,e
nãonoativodenegociação.
Sintaxe:
Função BidSize (Asset: Ativo ):Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso não tenha posição aberta será atribuído à variável qtdbid. A quantidade do topo (melhor
ofertadecompra)dolivro.
1
2
3
4
5
6
7var
qtdbid : Float ;
begin
ifnot HasPosition then
bid := BidSize ;
Plot (qtdbid);
end;
Exemplo Gráfico:
396

--- PÁGINA 407 ---
20.5 Função BookSpread
Disponível em todas versões.
Afunção BookSpread ()retornaadiferençaentreosmelhorespreçosdecompraevenda,notopodolivro.
Sintaxe:
Função BookSpread (Asset: Ativo ):Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo, casonãotenhaposiçãoaberta, seráatribuídoàvariável spreadadiferençaentreosvaloresdas
melhoresofertasdecompraevenda.
1
2
3
4
5
6
7var
spread : Float ;
begin
ifnot HasPosition then
spread := BookSpread ;
Plot (spread);
end;
Exemplo Gráfico:
397

--- PÁGINA 408 ---
20.6 Função BuyOfferCount
Disponível em todas versões.
Afunção BuyOfferCount ()retornaasofertasdecompradoativo
Sintaxe:
Função BuyOfferCountd (Asset: Ativo ; Níveis considerados: Integer ):Integer ;
Parâmetros:
Asset: Ativo [Opcional] ;ParâmetroOpcionaldeclaradoapartirdorecursoAsset,valorpadrãoé””.
Nível considerado: Integer [Opcional] ;ParâmetroOpcionalInteiro,valorpadrãoé0.
Exemplos de uso:
Noexemplo1,casonãotenhaposiçãoaberta,seráatribuídoàvariável buyCountasofertasdecompradoativo.
Noexemplo2,casonãotenhaposiçãoaberta,seráatribuídoàvariável buyCountasofertasdecompradoativo
VALE3.
Exemplo 1:
1
2
3
4
5
6
7var
buyCount : Integer ;
begin
ifnot HasPosition then
buyCount := BuyOfferCount ;
Plot (buyCount);
end;
398

--- PÁGINA 409 ---
Exemplo Gráfico 1:
Exemplo 2:
1
2
3
4
5
6
7
8
9const
VALE3 = Asset ("VALE3" ,feedBovespa );
var
buyCount : Integer ;
begin
ifnot HasPosition then
buyCount := BuyOfferCount (VALE3);
Plot (buyCount);
end;
399

--- PÁGINA 410 ---
Exemplo Gráfico 2:
400

--- PÁGINA 411 ---
20.7 Função GetAsset
Disponível em todas versões.
A função GetAsset ()retorna o ticker do ativo, onde a chamada pode ser efetuada realizando a passagem do
parâmetro opcional, para retornar o ticker de determinado Asset, ou declarar a função sem parametrização, onde
seráretornadootickerdográficoselecionado.
Pararetornaroticker(String)doAssetdeclarado,bastaacessardeformaanálogaàssériesdedados: A1ĠetAsset.
Sintaxe:
Função GetAsset (Asset: Ativo ):String ;
Parâmetros:
Asset: Ativo [Opcional] ;ParâmetroOpcionaldeclaradoapartirdorecursoAsset,valorpadrãoé””.
Exemplos de uso:
Noexemplo1,paraoúltimocandle,serávisualizadoonomedoativoselecionadonográfico,comospreçosde
bideask.
Noexemplo2, adistinçãoestánaespecificaçãodoAssetqueseráexibido(WDOFUT),independentementedo
ativoselecionadonográfico.
Exemplo 1:
1
2
3
4
5
6
7
8
9
10
11var
bid : Float ;
ask : Float ;
get : String;
begin
if(MaxBarsForward =0)then
get := GetAsset ;
bid := BidPrice ;
ask := AskPrice ;
plotText ((get + ":" + "Bid =" + bid + −"Ask=" + ask), clGreen ,2,8)
end;
401

--- PÁGINA 412 ---
Exemplo Gráfico 1:
Exemplo 2:
1
2
3
4
5
6
7
8
9
10
11
12
13const
WDO = Asset ("WDOFUT" ,feedBMF );
var
bid : Float ;
ask : Float ;
get : String;
begin
if(MaxBarsForward = 0)then
get := GetAsset (WDO);
bid := BidPrice ;
ask := AskPrice ;
plotText ((get + ":" + "Bid =" + bid + −"Ask=" + ask), clGreen ,2,8)
end;
402

--- PÁGINA 413 ---
Exemplo Gráfico 2:
403

--- PÁGINA 414 ---
20.8 Função GetFeed
Disponível em todas versões.
Afunção GetFeed ()retornaocódigotextualdoFeeddoativo.
Aparametrizaçãoéopcional,casonãosejadeterminadooAsset,seráretornadootickerdográficoselecionado.
Pararetornarabolsarelacionada(String)doAssetespecífico,pode-seacessardeformaanálogaàssériesdedados:
A1.GetFeed.
Sintaxe:
Função GetFeed (Asset: Ativo ):String ;
Parâmetros:
Asset: Ativo [Opcional] ;ConstantedeclaradaapartirdorecursoAsset.
Exemplos de uso:
No exemplo 1, para o último candle, será visualizado o nome do ativo selecionado no gráfico, a bolsa a qual
pertence,eospreaddobook.
No exemplo 2, será identificada a bolsa (F) vinculada ao Asset definido (WDO), independentemente do ativo
selecionado.
Exemplo 1:
1
2
3
4
5
6
7
8
9
10
11
12
13var
geta : String;
getf : String;
spread: Float ;
begin
if(MaxBarsForward =0)then
Begin
geta := GetAsset ;
spread := BookSpread ;
getf := GetFeed ;
plotText ((geta + "("+getf+"): "+"Spread=" +spread), clGreen ,2,10);
end;
end;
404

--- PÁGINA 415 ---
Exemplo Gráfico 1:
Exemplo 2:
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15const
WDO = Asset ("WDOFUT" ,feedBMF );
var
geta : String;
getf : String;
spread : Float ;
begin
if(MaxBarsForward = 0)then
begin
geta := GetAsset (WDO);
spread := BookSpread ;
getf := GetFeed (WDO);
plotText ((geta + "(" + getf + "): " + "Spread=" + spread), clGreen ,2,10);
end;
end;
405

--- PÁGINA 416 ---
Exemplo Gráfico 2:
406

--- PÁGINA 417 ---
20.9 Função IsBMF
Disponível em todas versões.
Afunção IsBMF ()retornaseoativopertenceaosegmentoBMF.
Sintaxe:
Função IsBMF (): Boolean ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
Noexemplo,casooativopertençaaoBMF,seráplotadoopreçodamelhorofertadevenda.
1
2
3
4begin
if(isBMF )then
Plot (AskPrice );
end;
Exemplo Gráfico:
407

--- PÁGINA 418 ---
20.10 Função Lote
Disponível em todas versões.
Afunção Lote ()retornaaquantidademínimadecontratosreferenteaolotedoativo.
AoutilizaromododeCrossOrdernaautomação,oLoteiráretornaraquantidadedoLotedaseríehistórica,enãono
ativodenegociação.
Sintaxe:
Função Lote (Asset: Ativo ):Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso não haja posição, ocorrerá simulada uma ordem de compra, então será atribuído à variável
qtdaquantidadedolote.
1
2
3
4
5
6
7
8Var
qtd : Float ;
begin
ifnot HasPosition then
BuyAtMarket ;
qtd := Lote;
Plot (qtd);
end;
Exemplo Gráfico:
408

--- PÁGINA 419 ---
20.11 Função MinPriceIncrement
Disponível em todas versões.
Afunção MinPriceIncrement ()retornaoincrementomínimodopreçodoativo.
Sintaxe:
Função MinPriceIncrement (Asset: Ativo ):Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso não haja posição, ocorrerá simulada uma ordem de compra, então será atribuído à variável
incMinovalordoincrementomínimo.
1
2
3
4
5
6
7
8Var
incMin : Float ;
begin
ifnot HasPosition then
BuyAtMarket ;
incMin := MinPriceIncrement ;
Plot (incMin);
end;
Exemplo Gráfico:
409

--- PÁGINA 420 ---
20.12 Função MinOrderIncrement
Disponível em todas versões.
Afunção MinOrderIncrement ()retornaoincrementomínimodopreçodaordem.
Sintaxe:
Função MinOrderIncrement (Asset: Ativo ):Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso não haja posição, ocorrerá simulada uma ordem de compra, então será atribuído à variável
incMinovalordoincrementomínimodeordem.
1
2
3
4
5
6
7
8Var
incMin : Float ;
begin
ifnot HasPosition then
BuyAtMarket ;
incMin := MinOrderIncrement ;
Plot (incMin);
end;
Exemplo Gráfico:
410

--- PÁGINA 421 ---
20.13 Função MinOrderQty
Disponível em todas versões.
Afunção MinOrderIncrement ()retornaaquantidademínimadeordem.
Sintaxe:
Função MinOrderQty (Asset: Ativo ):Float ;
Parâmetros:
Semparâmetros.
Exemplo de uso:
No exemplo, caso não haja posição, ocorrerá simulada uma ordem de compra, então será atribuído à variável
incMinaquantidademínimadeordem.
1
2
3
4
5
6
7
8Var
incMin : Float ;
begin
ifnot HasPosition then
BuyAtMarket ;
incMin := MinOrderQty ;
Plot (incMin);
end;
Exemplo Gráfico:
411

--- PÁGINA 422 ---
20.14 Função SellOfferCount
Disponível em todas versões.
Afunção SellOfferCoubt ()retornaasOfertasdeVendadoAtivo.
Sintaxe:
Função SellOfferCount (Asset: Ativo ; Níveis considerados: Integer ):Integer ;
Parâmetros:
Asset: Ativo [Opcional] ;ParâmetroOpcionaldeclaradoapartirdorecursoAsset,valorpadrãoé””.
Nível considerado: Integer [Opcional] ;ParâmetroOpcionalInteiro,valorpadrãoé0.
Exemplos de uso:
Noexemplo1,casonãotenhaposiçãoaberta,seráatribuídoàvariável sellCountasofertasdevendadoativo.
Noexemplo2,casonãotenhaposiçãoaberta,seráatribuídoàvariável sellCountasofertasdevendadoativo
VALE3.
Exemplo 1:
1
2
3
4
5
6
7var
sellCount : Integer ;
begin
ifnot HasPosition then
sellCount := sellOfferCount ;
Plot (sellCount);
end;
412

--- PÁGINA 423 ---
Exemplo Gráfico 1:
Exemplo 2:
1
2
3
4
5
6
7
8
9const
VALE3 = Asset ("VALE3" ,feedBovespa );
var
sellCount : Integer ;
begin
ifnot HasPosition then
sellCount := SellOfferCount (VALE3);
Plot (sellCount);
end;
413

--- PÁGINA 424 ---
Exemplo Gráfico 2:
414

--- PÁGINA 425 ---
20.15 Função TotalBuyQtd
Disponível em todas versões.
Afunção TotalBuyQtd ()retornaaquantidadedeComprasdoAtivo.
Sintaxe:
Função TotalBuyQtd (Asset: Ativo ; Níveis considerados: Integer ):Integer ;
Parâmetros:
Asset: Ativo [Opcional] ;ParâmetroOpcionaldeclaradoapartirdorecursoAsset,valorpadrãoé””.
Nível considerado: Integer [Opcional] ;ParâmetroOpcionalInteiro,valorpadrãoé0.
Exemplos de uso:
No exemplo 1, caso não tenha posição aberta, será atribuído à variável buyQtda quantidade de compras do
ativo.
No exemplo 2, caso não tenha posição aberta, será atribuído à variável buyQtda quantidade de compras do
ativoVALE3.
Exemplo 1:
1
2
3
4
5
6
7var
buyQtd : Integer ;
begin
ifnot HasPosition then
buyQtd := TotalBuyQtd ;
Plot (buyQtd);
end;
415

--- PÁGINA 426 ---
Exemplo Gráfico 1:
Exemplo 2:
1
2
3
4
5
6
7
8
9const
VALE3 = Asset ("VALE3" ,feedBovespa );
var
buyQtd : Integer ;
begin
ifnot HasPosition then
buyQtd := TotalBuyQtd (VALE3);
Plot (buyQtd);
end;
416

--- PÁGINA 427 ---
Exemplo Gráfico 2:
417

--- PÁGINA 428 ---
20.16 Função TotalSellQtd
Disponível em todas versões.
Afunção TotalSellQtd ()retornaaquantidadedevendasdoAtivo.
Sintaxe:
Função TotalSellQtd (Asset: Ativo ; Níveis considerados: Integer ):Integer ;
Parâmetros:
Asset: Ativo [Opcional] ;ParâmetroOpcionaldeclaradoapartirdorecursoAsset,valorpadrãoé””.
Nível considerado: Integer [Opcional] ;ParâmetroOpcionalInteiro,valorpadrãoé0.
Exemplos de uso:
No exemplo 1, caso não tenha posição aberta, será atribuído à variável sellQtda quantidade de vendas do
ativo.
Noexemplo2,casonãotenhaposiçãoaberta,seráatribuídoàvariável sellQtdaquantidadedevendasdoativo
VALE3.
Exemplo 1:
1
2
3
4
5
6
7var
sellQtd : Integer ;
begin
ifnot HasPosition then
sellQtd := TotalSellQtd ;
Plot (sellQtd);
end;
418

--- PÁGINA 429 ---
Exemplo Gráfico 1:
Exemplo 2:
1
2
3
4
5
6
7
8
9const
VALE3 = Asset ("VALE3" ,feedBovespa );
var
sellQtd : Integer ;
begin
ifnot HasPosition then
sellQtd := TotalSellQtd (VALE3);
Plot (sellQtd);
end;
419

--- PÁGINA 430 ---
Exemplo Gráfico 2:
420

--- PÁGINA 431 ---
21Funções Matemáticas
21.1 Função ABS
Disponível em todas versões.
Afunção ABS()retornaovalorabsolutodeumnúmeropontoflutuante.
Sintaxe:
Função ABS(Valor: Float ):Float ;
Parâmetros:
Valor: Float ;Valorouvariávelparaobteromódulo.
Exemplo de uso:
Noexemplo,avariável niráreceberomódulo( 4)dovalor( ‐4).
1
2
3
4
5
6var
n : Float ;
begin
n := ABS(‐4);
Plot (n);
end;
Exemplo Gráfico:
421

--- PÁGINA 432 ---
21.2 Função Arctangent
Disponível em todas versões.
Afunção Arctangent ()retornaoarcotangente(emgraus)dedeterminadonúmero
Sintaxe:
Função Arctangent (Num: Float ):Float ;
Parâmetros:
Num: Float ;Númeroqueseráconvertido.
Exemplo de uso:
Noexemplo,avariável arciráreceberoarcotangente,emgraus,donúmero 12.
1
2
3
4
5
6var
arc : Float ;
begin
arc := Arctangent (12);
Plot (arc);
end;
Exemplo Gráfico:
422

--- PÁGINA 433 ---
21.3 Função Ceiling
Disponível em todas versões.
Afunção Ceiling ()efetuaumarredondamento,retornandoomenorinteiromaiorqueumnúmeroespecífico.
Sintaxe:
Função Ceiling (Num: Float ):Float ;
Parâmetros:
Num: Float ;Númeroqueseráarredondado.
Exemplo de uso:
Noexemploabaixo,usamosafunção Ceiling ()pararetornaromenorinteiromaiorqueovalor 2.3(Retorno:
3).
1
2
3
4
5
6var
number : Float ;
begin
number := Ceiling (2.3);
Plot (number);
end;
Exemplo Gráfico:
423

--- PÁGINA 434 ---
21.4 Função Combination
Disponível em todas versões.
Afunção Combination ()calculaonúmerodegruposcomcombinaçãoúnica,considerandoumconjuntoespecífico
denúmeros.
Sintaxe:
Função Combination (Num: Integer ; NumChosen: Integer ):Integer ;
Parâmetros:
Num: Integer ;Totaldenúmerosouitensaseremconsiderados.
NumChosen: Integer ;Númerodeitensúnicosemcadagrupo.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável nCombonúmerodegruposdacombinação( 4,2),ondeoresultadoserá 6,
conformeocálculo: ( 1,2),(1,3),(1,4),(2,3),(2,4)e(3,4).
1
2
3
4
5
6var
nComb : Integer ;
begin
nComb := Combination (4,2);
Plot (NcOMB);
end;
Exemplo Gráfico:
424

--- PÁGINA 435 ---
21.5 Função Cos
Disponível em todas versões.
Afunção Cos()temcomoobjetivoretornaraousuáriooCossenodeumvaloremradianos.
Sintaxe:
Função Cos(Valor: Float ):Float ;
Parâmetros:
Valor: Float ;ValorouvariávelparaobteroCosseno.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável nCosoCossenodovalor 180emradianos(-0,60).
1
2
3
4
5
6var
nCos : Float ;
begin
nCos := Cos(180);
Plot (nCos);
end;
Exemplo Gráfico:
425

--- PÁGINA 436 ---
21.6 Função Cosine
Disponível em todas versões.
Afunção Cosine ()temcomoobjetivoretornaraousuáriooCossenodeumvaloremgraus.
Sintaxe:
Função Cosine (Num: Float ):Float ;
Parâmetros:
Num: Float ;ValorouvariávelparaobteroCosseno.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável nCosoCossenodovalor 45emgraus(0,71).
1
2
3
4
5
6var
nCos : Float ;
begin
nCos := Cosine (45);
Plot (nCos);
end;
Exemplo Gráfico:
426

--- PÁGINA 437 ---
21.7 Função Cotangent
Disponível em todas versões.
Afunção Cotangent ()temcomoobjetivoretornaraousuárioaCotangentedeumvaloremgraus.
Sintaxe:
Função Cotangent (Num: Float ):Float ;
Parâmetros:
Num: Float ;ValorouvariávelparaobteroCosseno.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável nCoaCotangentedovalor 30emgraus( 1,73).
1
2
3
4
5
6var
nCo : Float ;
begin
nCo := Cotangent (30);
Plot (nCo);
end;
Exemplo Gráfico:
427

--- PÁGINA 438 ---
21.8 Função Exp
Disponível em todas versões.
Afunção Exp()temcomoobjetivoretornaraousuárioaenésimapotênciadonúmerodeEuler.
Sintaxe:
Função Exp(Value: Float ):Float ;
Parâmetros:
Value: Float ;Valorouumavariávelparaobteraenésimapotência(Euler).
Exemplo de uso:
Noexemplo,seráatribuídoàvariável novalorde( 2)eiráretornarovalor7,39
1
2
3
4
5
6var
n : Float ;
begin
n := Exp(2);
Plot (n);
end;
Exemplo Gráfico:
428

--- PÁGINA 439 ---
21.9 Função ExpValue
Disponível em todas versões.
Afunção ExpValue ()possuicomofinalidaderetornarovalorexponencialdeumdeterminadonúmero.
Sintaxe:
Função ExpValue (Num: Float ):Float ;
Parâmetros:
Num: Float ;Valorouumavariávelparaobterovalorexponencial.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável novalorde( 2)eiráretornarovalor7,39
1
2
3
4
5
6var
n : Float ;
begin
n := ExpValue( 2);
Plot (n);
end;
Exemplo Gráfico:
429

--- PÁGINA 440 ---
21.10 Função ExtremePriceRatio
Disponível em todas versões.
Afunção ExtremePriceRatio ()retornaoratiodasextremidades(divideomaiorvalornoperiodopelomenorvalor)
deumnúmerodeterminadodebarras.
Sintaxe:
Função ExtremePriceValue (Length: Integer ; UseLog: Boolean ):Float ;
Parâmetros:
Length: Integer ;Onúmerodebarrasqueserãoconsideradosnocálculo.
UseLog: Boolean ;Deternaseologaritmode10doresultadodadivisãoseráaplicado.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável pRatio ()oretornodafunção,considerando 300períodosparaadivisão.
1
2
3
4
5
6var
pRatio : Float ;
begin
pRatio := ExtremePriceRatio (300,True );
Plot (pRatio);
end;
Exemplo Gráfico:
430

--- PÁGINA 441 ---
21.11 Função Factorial
Disponível em todas versões.
Afunção Factorial ()temcomofinalidadeefetuarocálculofatorial(n!) deumnúmeronaturaln.
Sintaxe:
Função Factorial (Value: Float ):Float ;
Parâmetros:
Value: Float ;Númeronaturalparaocálculodofactorial.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável nFatorialiráreceberofatorialdonúmero 4.
1
2
3
4
5
6var
nFatorial : Float ;
begin
nFatorial := Factorial (4);
Plot (pFatorial);
end;
Exemplo Gráfico:
431

--- PÁGINA 442 ---
21.12 Função FastD
Disponível em todas versões.
Afunção FastD ()retornaovalordeFastDdoOsciladorEstocástico,deacordocomoperíododesejado.
Sintaxe:
Função FastD (StochLength: Integer ):Float ;
Parâmetros:
StochLength: Float ;Períodoutilizadonomomentodocálculodoindicador.
Exemplo de uso:
No exemplo, será atribuído à variável interval_d irá receber o retorno da função FastD (), considerando 4
períodosparaocálculo.
1
2
3
4
5
6var
interval_d : Float ;
begin
interval_d := FastD (4);
Plot (interval_d);
end;
Exemplo Gráfico:
432

--- PÁGINA 443 ---
21.13 Função FastK
Disponível em todas versões.
Afunção FastK ()retornaovalordeFastKdoOsciladorEstocástico,deacordocomoperíododesejado.
Sintaxe:
Função FastK (StochLength: Integer ):Float ;
Parâmetros:
StochLength: Float ;Períodoutilizadonomomentodocálculodoindicador.
Exemplo de uso:
No exemplo, será atribuído à variável interval_k irá recebero retornoda função FastK (), considerando 14
períodosparaocálculo.
1
2
3
4
5
6var
interval_k : Float ;
begin
interval_k := FastK (14);
Plot (interval_k);
end;
Exemplo Gráfico:
433

--- PÁGINA 444 ---
21.14 Função Floor
Disponível em todas versões.
Afunção Floor ()possuicomofinalidaderetornaromaiorvalorinteiromenorqueumnúmerodeterminado.
Sintaxe:
Função Floor (Num: Float ):Float ;
Parâmetros:
Num: Float ;Valordereferênciaparaobterodadoespecífico.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável movalor-7.
1
2
3
4
5
6var
m : Float ;
begin
m := Floor (‐ 6.1 );
Plot (m);
end;
Exemplo Gráfico:
434

--- PÁGINA 445 ---
21.15 Função FracPortion
Disponível em todas versões.
Afunção FracPortion ()possuicomofinalidaderetornarapartefracionáriadeumnúmero.
Sintaxe:
Função FracPortion (Num: Float ):Float ;
Parâmetros:
Num: Float ;Valordereferênciaparaobterodadoespecífico.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável numFracovalor 7.14eseráretornadoapartefracionáriade0,14.
1
2
3
4
5
6var
numFrac : Float ;
begin
numFrac := FracPortion (7.14 );
Plot (numFrac);
end;
Exemplo Gráfico:
435

--- PÁGINA 446 ---
21.16 Função GCD
Disponível em todas versões.
Afunção GCD()retornaomaiordenominadorcomumentredoisnúmeros.
Sintaxe:
Função GCD(Value1: Float ; Value2: Float ):Float ;
Parâmetros:
Value1: Float ;Primeirovaloraseranalisado.
Value2: Float ;Segundovaloraseranalisado.
Exemplo de uso:
Noexemploaseguir,seráatribuídoàvariável nDemomaiordenominadorcomumentre 12e9.
1
2
3
4
5
6var
nDem : Float ;
begin
nDem := GCD(12,9);
Plot (nDem);
end;
Exemplo Gráfico:
436

--- PÁGINA 447 ---
21.17 Função IntPortion
Disponível em todas versões.
Afunção IntPortion ()temcomofinalidaderetornaraparteinteiradedeterminadonúmero.
Sintaxe:
Função IntPortion (Num: Float ):Float ;
Parâmetros:
Num: Float ;Númeroparaobteraparteinteira.
Exemplos:
Noexemploabaixo,seráatribuídoàvariável auxovalor 7,querepresentaaparteinteirade 7.52.
1
2
3
4
5
6var
aux : Float ;
begin
aux := IntPortion (7.52 );
Plot (aux);
end;
Exemplo Gráfico:
437

--- PÁGINA 448 ---
21.18 Função Log
Disponível em todas versões.
Afunção Log()retornaologaritmonatural(ln)deumnúmero.
Sintaxe:
Função Log(Num: Float ):Float ;
Parâmetros:
Num: Float ;Númeroparaologaritmonatural(ln).
Exemplos:
Noexemploabaixo,seráatribuídoàvariável vLnovalordologaritmonaturalde 5,aproximadamente 1,61.
1
2
3
4
5
6var
vLn : Float ;
begin
vLn := Log(5);
Plot (vLn);
end;
Exemplo Gráfico:
438

--- PÁGINA 449 ---
21.19 Função LogN
Disponível em todas versões.
Afunção Log()retornaologaritmonabaseNdeumnúmero.
Sintaxe:
Função LogN (Base: Float ; Número: Float ):Float ;
Parâmetros:
Base: Float ;Númeroquedeveserelevadoaumacertapotência.
Número: Float ;Númeroparaologaritmonatural(ln).
Exemplos:
Noexemploabaixo,seráatribuídoàvariável vLnovalordologaritmonaturalde 2combase 5,aproximadamente
0,43.
1
2
3
4
5
6var
vLn : Float ;
begin
vLn := LogN (5,2);
Plot (vLn);
end;
Exemplo Gráfico:
439

--- PÁGINA 450 ---
21.20 Função Max
Disponível em todas versões.
Afunção Max()retornaomaiorvalorentredoisnúmeros.
Sintaxe:
Função Max(Valor1: Float ; Valor2: Float ):Float ;
Parâmetros:
Valor1: Float ;Primeironúmerodacomparação.
Valor2: Float ;Segundonúmerodacomparação.
Exemplos:
Noexemploaseguir,seráatribuídoàvariável dMaxovalor 20.0,queéomaiorentre 10.0e20.
1
2
3
4
5
6var
dMax : Float ;
begin
dMax := Max(10.0 ,20);
Plot (dMax);
end;
Exemplo Gráfico:
440

--- PÁGINA 451 ---
21.21 Função Min
Disponível em todas versões.
Afunção Min()retornaomenorvalorentredoisnúmeros.
Sintaxe:
Função Min(Valor1: Float ; Valor2: Float ):Float ;
Parâmetros:
Valor1: Float ;Primeironúmerodacomparação.
Valor2: Float ;Segundonúmerodacomparação.
Exemplos:
Noexemploaseguir,seráatribuídoàvariável dMinovalor 10.0,queéomenorentre 10.0e20.
1
2
3
4
5
6var
dMin : Float ;
begin
dMin := Min(10.0 ,20);
Plot (dMin);
end;
Exemplo Gráfico:
441

--- PÁGINA 452 ---
21.22 Função MinutesToTime
Disponível em todas versões.
Afunção MinutesToTime ()retornaaconversãodeminutosemhoramilitar(contageminiciadaàmeia-noite).
Sintaxe:
Função MinutesToTime (Minutes: Integer ):Integer ;
Parâmetros:
Minutes: Integer ;Minutosparaaconversãoemhoras.
Exemplos:
No exemplo a seguir, a variável nHorairá receber a conversão de 600minutos em horas, retornando o valor
1000,querepresenta 10h.
1
2
3
4
5
6var
nHora : Integer ;
begin
nHora := MinutesToTime (600);
Plot (nHora);
end;
Exemplo Gráfico:
442

--- PÁGINA 453 ---
21.23 Função Mod
Disponível em todas versões.
Afunção Mod()possuicomofinalidaderetornarorestodadivisãoentredoisnúmerosinteiros.
Sintaxe:
Função Mod(Num: Integer ; Divisor: Integer ):Integer ;
Parâmetros:
Num: Integer ;Númeroreferenteaodividendo.
Divisor: Integer ;Númeroqueseráodivisor.
Exemplos:
Noexemploabaixo,seráatribuídoàvariável resovalor 1,referenteaorestodadivisãode 10por3.
1
2
3
4
5
6var
res : Integer ;
begin
res := Mod(10,3);
Plot (res);
end;
Exemplo Gráfico:
443

--- PÁGINA 454 ---
21.24 Função Neg
Disponível em todas versões.
Afunção Neg()retornaovalornegativodeumdeterminadonúmero.
Sintaxe:
Função Neg(Num: Float ):Float ;
Parâmetros:
Num: Float ;Valorparaobterseunúmeronegativo.
Exemplos:
Noexemploabaixo,avariável nNegiráreceberovalor ‐5,queéoretornodafunçãoaplicadasobre 5.
1
2
3
4
5
6var
nNeg : Float ;
begin
nNeg := Neg(5);
Plot (nNeg);
end;
Exemplo Gráfico:
444

--- PÁGINA 455 ---
21.25 Função NumUnits
Disponível em todas versões.
Afunção NumUnits ()retornaonúmerodecontratos/açõesdeumcertoinvestimento.
Sintaxe:
Função NumUnits (Amnt: Integer ; MinLot: Integer ):Integer ;
Parâmetros:
Amnt: Integer ;Valortotaldeinvestimento,emreais,poroperação.
MinLot: Integer ;Tamanhomínimodesejadodeloteportransação.
Exemplos:
Noexemploabaixo,assumindoqueaaçãoselecionadacusta 29.74 BRL,aoinvestir 15500comlotemínimode
100,afunção NumUnits ()retornará 500.
1
2
3
4
5
6var
numU : Integer ;
begin
numU := NumUnits (15500 ,100);
Plot (numU);
end;
Exemplo Gráfico:
445

--- PÁGINA 456 ---
21.26 Função PercentR
Disponível em todas versões.
Afunção PercentR ()retornaumaporcentagemindicandoondeopreçoatualestáemrelaçãoàfaixadenegociação
avaliada.
Sintaxe:
Função PercentR (Length: Integer ):Float ;
Parâmetros:
Length: Integer ;Comprimentoconsideradoparaocálculo.
Exemplos:
Noexemploabaixo,seráatribuídoàvariável vPercentRoretornodafunção PercentR (),considerando 2como
comprimento.
1
2
3
4
5
6var
vPercentR : Float ;
begin
vPercentR := PercentR (2);
Plot (vPercentR);
end;
Exemplo Gráfico:
446

--- PÁGINA 457 ---
21.27 Função Permutation
Disponível em todas versões.
Afunção Permutation ()calculaonúmerodepermutaçõesparaumdeterminadonúmerodeobjetos.
Sintaxe:
Função Permutation (Num: Integer ; NumChosen: Integer ):Integer ;
Parâmetros:
Num: Integer ;Determinaonúmerodecandlesaseremanalisados.
NumChosen: Integer ;Defineonúmerodeobjetosdentrodointervalodecandlesquepodemserselecionados.
Exemplos:
Avariável niráreceberapermutação,considerando 4candlese 2objetos.
1
2
3
4
5
6var
n : Integer ;
begin
n := Permutation (4,2);
Plot (n);
end;
Exemplo Gráfico:
447

--- PÁGINA 458 ---
21.28 Função Pos
Disponível em todas versões.
Afunção Pos()retornaovalorabsoluto(módulo)deumnúmeropontoflutuante.
Sintaxe:
Função Pos(Valor: Float ):Float ;
Parâmetros:
Valor: Float ;Valorouvariávelparaobteromódulo.
Exemplos:
Noexemploabaixo,avariável niráreceberovalor 4,queéomódulodovalor ‐4.
1
2
3
4
5
6var
n : Float ;
begin
n := Pos(‐4);
Plot (n);
end;
Exemplo Gráfico:
448

--- PÁGINA 459 ---
21.29 Função Power
Disponível em todas versões.
Afunção Power ()temcomofinalidaderetornaraenésimapotênciadeumvalor.
Sintaxe:
Função Power (Valor: Float ; Potência: Integer ):Float ;
Parâmetros:
Valor: Float ;Valorbasedapotenciação.
Potência: Integer ;Valoraoqualabaseseráelevada.
Exemplos:
Noexemploaseguir,seráatribuídoàvariável xoresultadodaoperação 2³,ouseja, 8.
1
2
3
4
5
6var
x : Float ;
begin
x := Power (2,3);
Plot (x);
end;
Exemplo Gráfico:
449

--- PÁGINA 460 ---
21.30 Função PowerF
Disponível em todas versões.
Afunção Power ()temcomofinalidaderetornaraenésimapotênciadeumvalor.
Sintaxe:
Função Power (Valor: Float ; Potência: Float ):Float ;
Parâmetros:
Valor: Float ;Valorbasedapotenciação.
Potência: Float ;Valoraoqualabaseseráelevada.
Exemplos:
Noexemploaseguir,seráatribuídoàvariável xoresultadodaoperação 23.5,ouseja, 11,31.
1
2
3
4
5
6var
x : Float ;
begin
x := Power (2,3.5);
Plot (x);
end;
Exemplo Gráfico:
450

--- PÁGINA 461 ---
21.31 Função Random
Disponível em todas versões.
Com a função Random (), o usuário poderá gerar um número aleatório inteiro dentro de um intervalo iniciado em
zero,tendocomolimitesuperiorovalordefinidoporparâmetro.
Sintaxe:
Função Random (Limite: Integer ):Integer ;
Parâmetros:
Limite: Integer ;Valorouvariávelquedeterminaolimitesuperiordointervalo.
Exemplos:
Noexemploaseguir,afunção Random ()irágerarnúmerosaleatóriosentre 0e5,queserãoatribuídosàvariável
aux.
1
2
3
4
5
6var
aux : Integer ;
begin
aux := Random (5);
Plot (aux);
end;
Exemplo Gráfico:
451

--- PÁGINA 462 ---
21.32 Função Round
Disponível em todas versões.
Afunção Round ()possuicomofinalidadeefetuaroarredondamentodeumnúmeropontoflutuante.
Sintaxe:
Função Round (Valor: Float ):Integer ;
Parâmetros:
Valor: Float ;Número(variávelouconstante)comcasasdecimaisqueseráarredondado.
Exemplos:
Conforme o exemplo abaixo, será atribuído à variável auxo valor arredondado de 2.6, ao utilizar a função
Round ().
1
2
3
4
5
6var
aux : Integer ;
begin
aux := Round (2.6);
Plot (aux);
end;
Exemplo Gráfico:
452

--- PÁGINA 463 ---
21.33 Função Round2Fraction
Disponível em todas versões.
Afunção Round2Fraction ()efetuaoarredondamentodeumnúmeroparaovalormaispróximodeummúltiplodo
incrementomínimodeumativo.
Sintaxe:
Função Round2Fraction (Valor: Float ):Float ;
Parâmetros:
Valor: Float ;Valordesejadoparaoarredondamentodeacordocomoincrementomínimodoativo.
Exemplos:
No exemplo abaixo (ativos Bovespa), ao aplicar a função para o valor 31.626, será atribuído o valor 31.63à
variável nRound2.
1
2
3
4
5
6var
nRound2 : Float ;
begin
nRound2 := Round2Fraction (31.626 );
Plot (nRound2);
end;
Exemplo Gráfico:
453

--- PÁGINA 464 ---
21.34 Função Sign
Disponível em todas versões.
Afunção Sign ()possuicomodefiniçãoretornarumnúmerointeirobaseadonosinaldeumvalornumérico.
Sintaxe:
Função Sign (Num: Float ):Float ;
Parâmetros:
Num: Float ;Númeroparaobterseusinal.
Exemplos:
No exemplo abaixo, será atribuído à variável nSinalo valor ‐1, tendo em vista o valor ‐205passado por
parâmetro.
1
2
3
4
5
6var
nSinal : Float ;
begin
nSinal := Sign (‐205 );
Plot (nSinal);
end;
Exemplo Gráfico:
454

--- PÁGINA 465 ---
21.35 Função Sin
Disponível em todas versões.
Afunção Sin()temcomoobjetivoretornarosenodeumvaloremradianos.
Sintaxe:
Função Sin(Valor: Float ):Float ;
Parâmetros:
Valor: Float ;Valorparaobteroseno.
Exemplos:
Noexemploaseguir,seráatribuídoàvariável nSenoovalordosenode 180,aproximadamente ‐0,80.
1
2
3
4
5
6var
nSeno : Float ;
begin
nSeno := Sin(180);
Plot (nSeno);
end;
Exemplo Gráfico:
455

--- PÁGINA 466 ---
21.36 Função Sine
Disponível em todas versões.
Afunção Sine ()retornaosenodeumnúmeroemgraus.
Sintaxe:
Função Sine (Num: Float ):Float ;
Parâmetros:
Sine: Float ;Determinanúmeroescolhidoparaocálculo.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoosenode 75.
1
2
3begin
Plot (Sine (75));
end
Exemplo Gráfico:
456

--- PÁGINA 467 ---
21.37 Função SlowK
Disponível em todas versões.
Afunção SlowK ()retornaovalordeSlowKdoosciladorestocástico.
Sintaxe:
Função SlowK (StochLength: Integer ):Float ;
Parâmetros:
StochLength: Integer ;Determinaotamanhoescolhidoparaocálculo.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção SlowK ().
1
2
3begin
Plot (SlowK (10));
end
Exemplo Gráfico:
457

--- PÁGINA 468 ---
21.38 Função Sqrt
Disponível em todas versões.
Afunção Sqrt ()retornaaraizquadradadeumvalor.
Sintaxe:
Função Sqrt (Valor: Float ):Float ;
Parâmetros:
Valor: Float ;Determinaovalorescolhidoparaocálculo.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoaraizquadradade 144.
1
2
3begin
Plot (Sqrt (144));
end
Exemplo Gráfico:
458

--- PÁGINA 469 ---
21.39 Função Square
Disponível em todas versões.
Afunção Square ()retornaovalordeumdeterminadonúmeroaoquadrado.
Sintaxe:
Função Square (Num: Float ):Float ;
Parâmetros:
Num: Float ;Determinaovalorescolhidoparaocálculo.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção Square (),considerando 12paraocálculo.
1
2
3begin
Plot (Square (12));
end
Exemplo Gráfico:
459

--- PÁGINA 470 ---
21.40 Função Tangent
Disponível em todas versões.
Afunção Tangent ()retornaatangentedeumnúmeroespecífico.
Sintaxe:
Função Tangent (Num: Float ):Float ;
Parâmetros:
Num: Float ;Determinaovalorescolhidoparaocálculo.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção Tangent (),considerando 45paraocálculo.
1
2
3begin
Plot (Tangent (45));
end
Exemplo Gráfico:
460

--- PÁGINA 471 ---
21.41 Função UltimateOscillator
Disponível em todas versões.
Afunção UltimateOscillator ()retornaovalordo”UltimateOscillator”desenvolvidoporLarryWilliams.
Sintaxe:
Função UltimateOscillator (ShortLength: Integer , MiddLength: Integer , LongLength:
Integer ):Float ;
Parâmetros:
ShortLength: Integer ;Númerodeperíodosparaamédiamaiscurtautilizadanocálculodoindicador.
MiddLength: Integer ;Númerodeperíodosparaamédiaintermediáriautilizadanocálculodoindicador.
LongLength: Integer ;Númerodeperíodosparaamédiamaislongautilizadanocálculodoindicador.
Exemplo de uso:
No exemplo a seguir, será plotado no gráfico o retorno do indicador ”Ultimate Oscillator” com períodos de 10
candlesparaas3médias.
1
2
3begin
Plot (UltimateOscillator (10,10,10));
end
Exemplo Gráfico:
461

--- PÁGINA 472 ---
21.42 Função Volatility
Disponível em todas versões.
Afunção Volatility ()retornaavolatilidadedeumdeterminadoperíodo.
Sintaxe:
Função Volatility (Period: Integer ):Float ;
Parâmetros:
Period: Integer ;Determinaoperiodoparacálculo.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção Volatility ()comperíodo 30.
1
2
3begin
Plot (Volatility (30));
end
Exemplo Gráfico:
462

--- PÁGINA 473 ---
21.43 Função VolumeOsc
Disponível em todas versões.
Afunção VolumeOsc ()retornaadiferençaentreamédiarápidaeamédiamóvellentadovolume.
Sintaxe:
Função VolumeOsc (FastLength: Integer , SlowLength: Integer ):Float ;
Parâmetros:
FastLength: Integer ;Valordemédiarápida.
SlowLength: Integer ;Valordemédiamóvel.
Exemplo de uso:
Noexemploaseguir, seráplotadonográfico oretornodafunção VolumeOsc ()commédiarápidaiguala 1e
médiamóveliguala 9.
1
2
3begin
Plot (VolumeOsc (1,9));
end
Exemplo Gráfico:
463

--- PÁGINA 474 ---
21.44 Função VolumeROC
Disponível em todas versões.
Afunção VolumeROC ()retornao”VolumeROC”baseadoemumnúmerodebarras.
Sintaxe:
Função VolumeROC (Length: Integer ):Float ;
Parâmetros:
Length: Integer ;Períododefinidopelaquantidadedebarras,usadonocálculodoVolumeRateofChange.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficooretornodafunção VolumeROC ().
1
2
3begin
Plot (VolumeROC (1));
end
Exemplo Gráfico:
464

--- PÁGINA 475 ---
22Funções de Opções
22.1 Função Delta
Disponível em todas versões.
Afunção Delta ()medeavariaçãodopreçodaopçãocomopreçodaação.
Sintaxe:
Função Delta (DaysLeft : Integer ; StrikePr : Float ; AssetPr : Float ; Rate100 :
Float ; Volty100 : Float ; PutCall : Integer ):Float ;
Parâmetros:
DaysLeft: Integer ;Diasuteisatéovencimentodaopção.
StrikePr: Float ;Preçodoexercíciodaopção.
AssetPr: Float ;Preçodaação.
Rate100: Float ;Taxadejurosem%.
Volty100: Float ;Volatilidadeem%.
PutCall: Integer ;Indicaseéumaputouumacall:
–[optPut:] Opçãodevenda.
–[optCall:] Opçãodecompra.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoavariação,considerando 13diasparaovencimento, 16.47como
Strike, 17.25comopreçodaação, 0.1parataxadejurose 0.25paravolatilidade,aplicadosparauma Call.
1
2
3begin
Plot (Delta (13,16.47 ,17.25 ,0.1,0.25 ,optCall ));
end
465

--- PÁGINA 476 ---
Exemplo Gráfico:
466

--- PÁGINA 477 ---
22.2 Função Gamma
Disponível em todas versões.
Afunção Gamma ()retornaovalordeGamma.
Sintaxe:
Função Gamma (DaysLeft : Integer ; StrikePr : Float ; AssetPr : Float ; Rate100 :
Float ; Volty100 : Float ; PutCall : Integer ):Float ;
Parâmetros:
DaysLeft: Integer ;Diasuteisatéovencimentodaopção.
StrikePr: Float ;Preçodoexercíciodaopção.
AssetPr: Float ;Preçodaação.
Rate100: Float ;Taxadejurosem%.
Volty100: Float ;Volatilidadeem%.
PutCall: Integer ;Indicaseéumaputouumacall:
–[optPut:] Opçãodevenda.
–[optCall:] Opçãodecompra.
Exemplo de uso:
Noexemploaseguir, seráplotadonográficoavariação, considerando 9diasparaovencimento, 11.08como
Strike, 11.94comopreçodaação, 0.2parataxadejurose 0.3paravolatilidade,aplicadosparauma Call.
1
2
3begin
Plot (Gamma (9,11.08 ,11.94 ,0.2,0.3,optCall ));
end
467

--- PÁGINA 478 ---
Exemplo Gráfico:
468

--- PÁGINA 479 ---
22.3 Função Rho
Disponível em todas versões.
Afunção Rho()retornaavariaçãodaopçãoemrelaçãoàtaxadejuros.
Sintaxe:
Função Rho(DaysLeft : Integer ; StrikePr : Float ; AssetPr : Float ; Rate100 : Float ;
Volty100 : Float ; PutCall : Integer ):Float ;
Parâmetros:
DaysLeft: Integer ;Diasuteisatéovencimentodaopção.
StrikePr: Float ;Preçodoexercíciodaopção.
AssetPr: Float ;Preçodaação.
Rate100: Float ;Taxadejurosem%.
Volty100: Float ;Volatilidadeem%.
PutCall: Integer ;Indicaseéumaputouumacall:
–[optPut:] Opçãodevenda.
–[optCall:] Opçãodecompra.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoavariação,considerando 60diasparaovencimento, 11.00como
Strike, 12.92comopreçodaação, 0.2parataxadejurose 0.3paravolatilidade,aplicadosparauma Call.
1
2
3begin
Plot (Rho(60,11.00 ,12.92 ,0.2,0.3,optCall ));
end
469

--- PÁGINA 480 ---
Exemplo Gráfico:
470

--- PÁGINA 481 ---
22.4 Função Strike
Disponível em todas versões.
Afunção Strike ()retornaovalordestrikecasooativosejaumaopção.
Sintaxe:
Função Strike (Asset : Ativo ):Float ;
Parâmetros:
Asset: Ativo [Opcional] ;Determinaoativoparaafunção.
Exemplo de uso:
No exemplo a seguir, será plotado no gráfico o valor da opção PETRE285W2 , onde a constante PETRrecebe o
nomeebolsadoativo.
1
2
3
4
5
6const
PETR = Asset ("PETRE285W2" ,feedBovespa );
begin
Plot (Strike (PETR));
end
Exemplo Gráfico:
471

--- PÁGINA 482 ---
22.5 Função Theta
Disponível em todas versões.
Afunção Theta ()retornaavariaçãodaopçãoemrelaçãoàtaxadejuros.
Sintaxe:
Função Theta (DaysLeft : Integer ; StrikePr : Float ; AssetPr : Float ; Rate100 :
Float ; Volty100 : Float ; PutCall : Integer ):Float ;
Parâmetros:
DaysLeft: Integer ;Diasuteisatéovencimentodaopção.
StrikePr: Float ;Preçodoexercíciodaopção.
AssetPr: Float ;Preçodaação.
Rate100: Float ;Taxadejurosem%.
Volty100: Float ;Volatilidadeem%.
PutCall: Integer ;Indicaseéumaputouumacall:
–[optPut:] Opçãodevenda.
–[optCall:] Opçãodecompra.
Exemplo de uso:
Noexemploaseguir, seráplotadonográficoavariação, considerando 9diasparaovencimento, 17.22como
Strike, 11.94comopreçodaação, 0.1parataxadejurose 0.32paravolatilidade,aplicadosparauma Put.
1
2
3begin
Plot (Theta (9,17.22 ,11.94 ,0.1,0.32 ,optPut ));
end
472

--- PÁGINA 483 ---
Exemplo Gráfico:
473

--- PÁGINA 484 ---
22.6 Função Vega
Disponível em todas versões.
Afunção Vega ()retornaavariaçãodaopçãoemrelaçãoàvolatilidade.
Sintaxe:
Função Vega (DaysLeft : Integer ; StrikePr : Float ; AssetPr : Float ; Rate100 : Float
; Volty100 : Float ; PutCall : Integer ):Float ;
Parâmetros:
DaysLeft: Integer ;Diasuteisatéovencimentodaopção.
StrikePr: Float ;Preçodoexercíciodaopção.
AssetPr: Float ;Preçodaação.
Rate100: Float ;Taxadejurosem%.
Volty100: Float ;Volatilidadeem%.
PutCall: Integer ;Indicaseéumaputouumacall:
–[optPut:] Opçãodevenda.
–[optCall:] Opçãodecompra.
Exemplo de uso:
Noexemploaseguir,seráplotadonográficoavariação,considerando 28diasparaovencimento, 11.08como
Strike, 11.94comopreçodaação, 0.2parataxadejurose 0.36paravolatilidade,aplicadosparauma Put.
1
2
3begin
Plot (Vega (28,11.08 ,11.94 ,0.2,0.36 ,optPut ));
end
474

--- PÁGINA 485 ---
Exemplo Gráfico:
475

--- PÁGINA 486 ---
23Screening
23.1 Função Select
Disponível em todas versões.
A função Select (), apesar de estar disponível na linguagem, não possui recursos para utilização do usuário, sua
implementaçãoéespecíficaparausodosistema,afimdehabilitaçãodoScreening.
Sintaxe:
Função Select (): Void ;
Parâmetros:
Semparâmetros.
476

--- PÁGINA 487 ---
24Funções de Usuário
24.1 Função Cum
Disponível em todas versões.
Afunção Cum()acumulaovalordeumasériededados,desdeaprimeirabarraatéaatual.
Sintaxe:
Função Cum(SerieDeDados: Serie ):Float ;
Parâmetros:
SerieDeDados: Serie ;Sérieparaefetuarosomatório.
Exemplo de uso:
Noexemplo,seráatribuídoàvariável auxosomatóriodadiferençaentreassériesCloseeOpen.
1
2
3
4
5
6var
aux : Float ;
begin
aux := Cum(Close ‐ Open);
Plot (aux);
end;
Exemplo Gráfico:
477

--- PÁGINA 488 ---
24.2 Função FastKCustom
Disponível em todas versões.
Afunção FastKCustom ()retornaovalordeFastKdoOsciladorEstocástico,deacordocomospreçosdeterminados
porparâmetro,eperíododesejado.
Sintaxe:
Função FastKCustom (PriceH: Serie ; PriceL: Serie ; PriceC: Serie ; Período: Serie ):
Float ;
Parâmetros:
PriceH: Serie ;Sériedereferênciaparaamáxima.
PriceL: Serie ;Sériedereferênciaparaamínima.
PriceC: Serie ;Sériedereferênciaparaofechamento.
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplo de uso:
No exemplo, será atribuído à variável kCustomo retorno da função FastKCustom, considerando as séries de
máxima(PriceH),mínima(PriceL),fechamento(PriceC),e14períodosparaocálculo.
1
2
3
4
5
6var
kCustom : Float ;
begin
kCustom := FastKCustom (High, Low, Close, 14);
Plot (kCustom);
end;
478

--- PÁGINA 489 ---
Exemplo Gráfico:
479

--- PÁGINA 490 ---
24.3 Função HarmonicMean
Disponível em todas versões.
Afunção HarmonicMean ()calculaamédiaharmônicadeumasériededados,baseadaemumdeterminadoperíodo.
Sintaxe:
Função HarmonicMean (SerieDeDados: Serie Período: Integer ;): Float ;
Parâmetros:
SerieDeDados: Serie ;Sérieutilizadaparaocálculo.
Período: Float ;Períodoutilizadonomomentodocálculo.
Exemplo de uso:
Noexemploaseguir,seráatribuídoàvariável auxoretornodafunção HarmonicMean (),considerandoamáxima
(Close)e 20(Períodos)paraocálculo.
1
2
3
4
5
6var
aux : Float ;
begin
aux := HarmonicMean (High, 20);
Plot (aux);
end;
Exemplo Gráfico:
480

--- PÁGINA 491 ---
24.4 Funcão Highest
Disponível em todas versões.
Afunção Highest ()temcomofuncionalidaderetornaraousuárioomaiorvalordasérieestipuladaporele,dentro
deumperíododeterminado.
Sintaxe:
Função Highest (SerieDeDados: Serie ; Período: Integer ):Float ;
Parâmetros:
SerieDeDados: Serie ;Sériededadosdesejada, podendoseraabertura, máxima, mínima, fechamento, ou
atémesmoindicadores.
Período: Float ;Determinaoperíodoqueseráconsideradoparaapesquisa.
Exemplo de uso:
Noexemploabaixo,usamosafunção Highest ()pararetornaramaioraberturadentrode 9períodos.
1
2
3
4begin
ifnot HasPosition then
Plot (Highest (Open, 9));
end;
Exemplo Gráfico:
481

--- PÁGINA 492 ---
24.5 Função HighestBar
Disponível em todas versões.
Afunção HighestBar ()temcomofuncionalidaderetornaroíndicedomaiorvalordasérieespecificada,dentrode
umperíododeterminado.
Sintaxe:
Função HighestBar (SerieDeDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDeDados: Serie ;Sériededadosdesejada,comoabertura,máxima,mínima,fechamentoouindicadores.
Periodo: Integer ;Determinaoperíodoqueseráconsideradoparaapesquisa.
Exemplo de uso:
Noexemploabaixo,usamosafunção HighestBar ()pararetornaroíndicedamaiormínimadentrode 9períodos,
utilizandoasériedeabertura.
1
2
3
4
5
6var
mMinima : Float ;
begin
mMinima := HighestBar (Open, 9);
Plot (mMinima);
end;
Exemplo Gráfico:
482

--- PÁGINA 493 ---
24.6 Função Lowest
Disponível em todas versões.
A função Lowest ()tem como funcionalidade retornar o menor valor da série estipulada, dentro de um período
determinado.
Sintaxe:
Função Lowest (SerieDeDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDeDados: Serie ;Série de dados desejada, podendo ser abertura, máxima, mínima, fechamento ou
indicadores.
Periodo: Integer ;Determinaoperíodoqueseráconsideradoparaapesquisa.
Exemplo de uso:
Noexemploabaixo,usamosafunção Lowest ()pararetornaromenorfechamentodentrode 50períodos.
1
2
3
4
5
6var
low : Float ;
begin
low := Lowest (Close, 50);
Plot (low);
end;
Exemplo Gráfico:
483

--- PÁGINA 494 ---
24.7 Função LowestBar
Disponível em todas versões.
Afunção LowestBar ()temcomofuncionalidaderetornaroíndicedomenorvalordasérieestipulada,dentrodeum
períododeterminado.
Sintaxe:
Função LowestBar (SerieDeDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDeDados: Serie ;Série de dados desejada, podendo ser abertura, máxima, mínima, fechamento ou
indicadores.
Periodo: Integer ;Determinaoperíodoqueseráconsideradoparaapesquisa.
Exemplos:
No exemplo abaixo, usamos a função LowestBar ()para retornar o índice da menor mínima dentro de 26
períodos,utilizandoasérie Low.
1
2
3
4
5
6var
lowB : Float ;
begin
lowB := LowestBar (Close, 26);
Plot (lowB);
end;
Exemplo Gráfico:
484

--- PÁGINA 495 ---
24.8 Função Media
Disponível em todas versões.
A função Media ()retorna o valor do indicador Média Móvel, tipo aritmética. o exemplo com o código fonte está
disponívelnoeditordeestratégias,paravisualizá-lo,acesseomenu: ”abrir>exemplos”.
Sintaxe:
Função Media (Periodo: Integer ; TipoSerie: Serie ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Dados: TipoSerie ;Sériequeseráconsideradaparaocálculo.
Exemplo de uso:
No exemplo, será atribuído à variável vMedo valor do indicador Média Móvel (Aritmética), considerando 100
períodos,easériedefechamento(Close)paraocálculo.
1
2
3
4
5
6var
vMed : Float ;
begin
vMed := Media;
Plot (Media (100, Close));
end;
Exemplo Gráfico:
485

--- PÁGINA 496 ---
24.9 Função MediaExp
Disponível em todas versões.
Afunção MediaExp ()retornaovalordoindicadorMédiaMóvel,tipoexponencial.
OindicadorMédiaMóvelcalculaamédiadosdadosentreacotaçãoatualeumperíodoanterior.
Ocódigofonteestádisponívelnoeditordeestratégias,paravisualizá-lo,acesseomenu: ”abrir>exemplos”.
Sintaxe:
Função MediaExp (Periodo: Integer ; Dados: Serie ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Dados: Serie ;Sériequeseráconsideradaparaocálculo.
Exemplo de uso:
Noexemploabaixo,afunção MediaExp ()éutilizadaparacalcularamédiamóvelexponencialdasériedepreços
de fechamento ” Close”. O cálculo considera um período de ” 100” unidades. O valor retornado pela função é
entãoplotadonográfico.
1
2
3
4
5
6var
AvgPeriod : Integer ;
begin
AvgPeriod := 100;
Plot (MediaExp (AvgPeriod,Close));
end;
Exemplo Gráfico:
486

--- PÁGINA 497 ---
24.10 Função MidPoint
Disponível em todas versões.
Afunção MidPoint ()retornaamédiaentreomaioreomenorvalorencontradosnoperíodo.
Sintaxe:
Função MidPoint (SerieDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDados: Serie ;Sériedereferência.
Periodo: Integer ;Períodoutilizadonomomentodocálculo.
Exemplo de uso:
No exemplo abaixo, a variável midPirá receber o valor retornado pela função MidPoint (), utilizando a série
Closee15períodoscomobase.
1
2
3
4
5
6var
midP : Float ;
begin
midP := MidPoint (Close, 15);
Plot (midP);
end;
Exemplo Gráfico:
487

--- PÁGINA 498 ---
24.11 Função PercentChange
Disponível em todas versões.
Afunção PercentChange ()calculaaalteraçãopercentualnopreçodocandleatualemrelaçãoaumdeterminado
deslocamentoanterior.
Sintaxe:
Função PercentChange (SerieDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDados: Serie ;Sériebasedereferência.
Periodo: Integer ;Períodoanteriorparaacomparaçãocomodadodasérieatual.
Exemplos:
Noexemploabaixo,seráatribuídoàvariável pcoretornodafunção PercentChange (),utilizandoasérie Close
e2períodosparaacomparação.
1
2
3
4
5
6var
pc : Float ;
begin
pc := PercentChange (Close, 2);
Plot (pc);
end;
Exemplo Gráfico:
488

--- PÁGINA 499 ---
24.12 Função PriceOscillator
Disponível em todas versões.
Afunção PriceOscillator ()retornaovalordoindicador PriceOscillator ,deacordocomosparâmetrosdeseja-
dos.
Sintaxe:
Função PriceOscillator (SerieDados: Serie ; ComprimentoRapido: Integer ;
ComprimentoLento: Integer ):Float ;
Parâmetros:
SerieDados: Serie ;Sérieutilizadaparaocálculodoindicador.
ComprimentoRapido: Integer ;Referenteaoparâmetro FastLength .
ComprimentoLento: Integer ;Referenteaoparâmetro SlowLength .
Exemplos:
Noexemploabaixo,avariável pOsciráreceberovalordoindicador PriceOscillator (),considerandoasérie
High,comcomprimentorápidoiguala 9ecomprimentolentoiguala 18.
1
2
3
4
5
6var
pOsc : Float ;
begin
pOsc := PriceOscillator (High, 9,18);
Plot (pOsc);
end;
Exemplo Gráfico:
489

--- PÁGINA 500 ---
24.13 Função RateOfChange
Disponível em todas versões.
A função RateOfChange ()retorna a variação percentual de uma série de dados em relação a um valor anterior
definido.
Sintaxe:
Função RateOfChange (SerieDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDados: Serie ;Sériebasedereferência.
Periodo: Integer ;Índicedodadoutilizadonacomparaçãocomovaloratualdasérie.
Exemplos:
No exemplo abaixo, será atribuído à variável rco valor retornado pela função RateOfChange (), utilizando a
série Higheocandleanterior( 1)comobasedecomparação.
1
2
3
4
5
6var
rc : Float ;
begin
rc := RateOfChange (High, 1);
Plot (rc);
end;
Exemplo Gráfico:
490

--- PÁGINA 501 ---
24.14 Função SlowD
Disponível em todas versões.
Afunção SlowD ()retornaovalordo SlowD(OsciladorEstocástico),deacordocomoperíododesejado.
Sintaxe:
Função SlowD (Periodo: Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplos:
No exemplo abaixo, a variável sdirá receber o valor do indicador SlowD (), considerando 14períodos para o
cálculo.
1
2
3
4
5
6var
sd : Float ;
begin
sd := SlowD (14);
Plot (sd);
end;
Exemplo Gráfico:
491

--- PÁGINA 502 ---
24.15 Função StdDevs
Disponível em todas versões.
Afunção StdDevs ()retornaodesviopadrãodeumasériededados,emumdeterminadoperíodo.
Sintaxe:
Função StdDevs (SerieDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDados: Serie ;Sérieutilizadaparaocálculo.
Periodo: Integer ;Períodoutilizadonomomentodocálculo.
Exemplos:
Noexemploabaixo,avariável sdiráreceberoretornodafunção StdDevs (),considerandoasérie Closee20
períodosparaocálculo.
1
2
3
4
5
6var
sd : Float ;
begin
sd := StdDevs (Close, 20);
Plot (sd);
end;
Exemplo Gráfico:
492

--- PÁGINA 503 ---
24.16 Função Summation
Disponível em todas versões.
Afunção Summation ()efetuaosomatóriodosvaloresdeumasériededadosemumdeterminadonúmerodebarras.
Sintaxe:
Função Summation (SerieDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDados: Serie ;Sérieutilizadaparaocálculo.
Periodo: Integer ;Períodoutilizadonomomentodocálculo.
Exemplos:
Noexemploabaixo,avariável siráreceberoretornodafunção Summation (),considerandoasérie Closee10
períodos.
1
2
3
4
5
6var
s : Float ;
begin
s := Summation (Close, 10);
Plot (s);
end;
Exemplo Gráfico:
493

--- PÁGINA 504 ---
24.17 Função TriAverage
Disponível em todas versões.
Afunção TriAverage ()efetuaamédiatriangulardeumasériededados,dentrodeumdeterminadoperíodo.
Sintaxe:
Função TriAverage (SerieDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDados: Serie ;Sérieutilizadaparaocálculo.
Periodo: Integer ;Períodoutilizadonomomentodocálculo.
Exemplos:
Noexemploabaixo,avariável auxiráreceberoretornodafunção TriAverage (),considerandoasérie Highe
20períodosparaocálculo.
1
2
3
4
5
6var
aux : Float ;
begin
aux := TriAverage (High, 20);
Plot (aux);
end;
Exemplo Gráfico:
494

--- PÁGINA 505 ---
24.18 Função UlcerIndex
Disponível em todas versões.
Afunção UlcerIndex ()medeoníveldeestressedomercadocombasenavariaçãonegativadospreçosemrelação
aumtopoanterior,aolongodeumperíododeterminado.
Sintaxe:
Função UlcerIndex (SerieDados: Serie ; Periodo: Integer ):Float ;
Parâmetros:
SerieDados: Serie ;Sérieutilizadaparaocálculo.
Periodo: Integer ;Períodoutilizadonomomentodocálculo.
Exemplos:
Noexemploabaixo,avariável auxiráreceberoretornodafunção UlcerIndex (),considerandoasérie Highe
3períodos.
1
2
3
4
5
6var
aux : Float ;
begin
aux := UlcerIndex (High, 3);
Plot (aux);
end;
Exemplo Gráfico:
495

--- PÁGINA 506 ---
24.19 Função WAverage
Disponível em todas versões.
Afunção WAverage ()calculaamédiaponderadadeumdeterminadoperíodo.
Sintaxe:
Função WAverage (SerieDeDados: Serie , Periodo: Integer ):Float ;
Parâmetros:
SerieDeDados: Serie ;Sérieutilizadaparaocálculo.
Periodo: Integer ;Períodoutilizadonomomentodocálculo.
Exemplo de uso:
Noexemploabaixo,seráplotadonográficooretornodafunção WAverage (),considerandoasérie Highe20
períodosparaocálculo.
1
2
3begin
Plot (WAverage (High, 20));
end
Exemplo Gráfico:
496

--- PÁGINA 507 ---
24.20 Função WellesSum
Disponível em todas versões.
A função WellesSum ()retorna o valor do indicador ”WellesSum”, de acordo com os parâmetros desejados. É o
métodoquecriaasomamóveldeumasériededados,ondecadavaloréasomadosúltimosnperíodos. Oexemplo
comocódigofonteestádisponívelnoeditordeestratégias,paravisualizá-lo,acesseomenu: ”abrir>exemplos”.
Sintaxe:
Função WellesSum (Periodo: Integer , Dados: Serie , Offset : Integer ):Float ;
Parâmetros:
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
SerieDeDados: Serie ;Sérieutilizadaparaocálculo.
Offset: Integer ;Referenteaoparâmetro”Offset”doindicador.
Exemplo de uso:
Noexemploabaixo,seráplotadonográficoodadodoindicador”WellesSum”,considerando 20(Período),série
defechamento(SerieReferencia)e 0(Offset)paraocálculo.
1
2
3begin
Plot (WellesSum (20, Close, 0));
end
Exemplo Gráfico:
497

--- PÁGINA 508 ---
24.21 Função xAverage
Disponível em todas versões.
Afunção xAverage ()retornaamédiaexponêncialdeumdeterminadoperíodo.
Sintaxe:
Função xAverage (SerieDeDados: Serie , Periodo: Integer ):Float ;
Parâmetros:
SerieDeDados: Serie ;Sérieutilizadaparaocálculo.
Periodo: Integer ;Períodoutilizadonomomentodocálculodoindicador.
Exemplo de uso:
Noexemploabaixo,seráplotadonográficooretornodafunção xAverage (),considerandoasériedefechamento
e10períodosparaocálculo.
1
2
3begin
Plot (xAverage (Close, 10));
end
Exemplo Gráfico:
498

--- PÁGINA 509 ---
25Funções Utils
25.1 Função AssetHasValue
Disponível em todas versões.
Afunção AssetHasValue ()retornaseoativoescolhidotemvalordemercadoounão.
Sintaxe:
Função AssetHasValue (Asset: Ativo ):Boolean ;
Parâmetros:
Asset: Ativo ;Ativoescolhidoparaafunção.
Exemplo de uso:
Noexemploabaixo, será plotadono gráficoo melhor preçode vendadoativo, usando a função AskPrice (),
casooativo PETR4tenhavalordemercado.
1
2
3
4
5
6
7const
PETR = Asset ("PETR4" ,feedBovespa );
begin
ifAssetHasValue (PETR) then
Plot (AskPrice );
end
Exemplo Gráfico:
499

--- PÁGINA 510 ---
25.2 Função BoolToString
Disponível em todas versões.
Afunção BoolToString ()transformaumvalorbooleanoemumstring.
Sintaxe:
Função BoolToString (Content: Boolean ):String ;
Parâmetros:
Content: Boolean ;Valorbooleanoescolhidoparasertransformadoemstring.
Exemplo de uso:
No exemplo abaixo, será plotado no gráfico o texto da variavel comparecaso o ativo PETR4tenha valor de
mercado.
1
2
3
4
5
6
7
8
9const
PETR4 = Asset ("PETR4" ,feedBovespa );
var
compare : Boolean ;
begin
compare := AssetHasValue (PETR4 );
ifcompare then
Plottext (BoolToString (compare), clRed );
end
Exemplo Gráfico:
500

--- PÁGINA 511 ---
25.3 Função CompareFloat
A função CompareFloat ()compara dois valores numéricos de ponto flutuante, considerando o número de casas
decimaisespecificadasparaprecisão. Retorna 1seValor_1formaior, 0seforemiguaise ‐1seValor_1formenor.
Tambémépossívelusarconstantesdecomparaçãoparafacilitarasverificações.
Sintaxe:
Função CompareFloat (Valor_1: Float ; Valor_2: Float ; DígitosPrecisao: Integer =9):
Integer ;
Parâmetros:
Valor_1: Float ;Primeirovalorasercomparado.
Valor_2: Float ;Segundovalorasercomparado.
DígitosPrecisao: Integer [Opcional] ;Númerodecasasdecimaisaconsiderar(padrão= 9).
Exemplos:
Noexemploabaixo,comprecisãode 3dígitosdecimais,oresultadodacomparaçãoentre 3.141592e3.14será
atribuídoàvariável resultado,eentãoexibidocomafunção Plot ().
1
2
3
4
5var
resultado : Integer ;
begin
resultado := CompareFloat (3.141592 ,3.14 ,3);
Plot(resultado);
end;
Exemplo Gráfico:
501

--- PÁGINA 512 ---
26Anexos
EsteanexoapresentaexemplosdecomportamentosincorretosquepodemocorreraodesenvolverscriptsemNTSL,
seguidosdasrespectivasboaspráticasparaevitá-los. Oobjetivoéauxiliardesenvolvedoresaescrevercódigosmais
seguros,previsíveisecompatíveiscomomotordeexecuçãodaplataforma.
Essescasosforamobservadoscomfrequêncianousopráticodalinguageme,quandocorrigidos,contribuemdireta-
menteparaaestabilidadeeaassertividadedasestratégiascriadas.
26.1 Exemplos de funcionamento de estratégias
1-Nenhumaordemserácriada,jáqueexisteumcancelamentodeordens.
1
2
3
4begin
BuyAtMarket ;
CancelPendingOrders ;
end;//Fim do fluxo de execução
2-Nenhumaordemserácriada,poisoClosePositionvaicancelaraordemBuyAtMarket.
1
2
3
4begin
BuyAtMarket ;
ClosePosition ;
end;//Fim do fluxo de execução
3-Nenhumaordemserácriada,poisoReversePositionvaicancelaraordemSellShortAtMarket.
1
2
3
4begin
SellShortAtMarket ;
ReversePosition ;
end;//Fim do fluxo de execução
4 - Nenhuma ordem será criada, pois é realizada o agrupamento de ordens AtMarket que estão dentro do mesmo
fluxodeexecução.
1
2
3
4begin
BuyAtMarket ;
SellShortAtMarket ;
end;//Fim do fluxo de execução
5-Ocódigoabaixonãoabreordenscovers. PoisaopassarpelalinhaBuyAtMarketnãoégeradaumaposição,pois
nãoháexecuçãodaordem. Destamaneira,aposiçãonãoéalteradaeoSellToCovernãoserácriadojáquenãohá
posição.
1
2
3
4
5
6
7
8begin
ifnot HasPosition then
begin
BuyAtMarket ;
SellToCoverLimit (Close + 10* MinPriceIncrement);
SellToCoverStop (Close ‐ 10* MinPriceIncrement);
end;
end //Fim do fluxo de execução
Comoalternativa,éaconselhávelusarocódigoabaixo. Destaformaquandoexistirposiçãoasordenscoversserão
enviadas.
502

--- PÁGINA 513 ---
1
2
3
4
5
6
7
8
9
10
11begin
ifnot HasPosition then
begin
BuyAtMarket ;
end
else
begin
SellToCoverLimit (Close + 10* MinPriceIncrement);
SellToCoverStop (Close ‐ 10* MinPriceIncrement);
end;
end //Fim do fluxo de execução
6-Comparaçõesdiretasentrevaloresdotipofloatpodemresultaremcomportamentosinesperadosdevidoànatureza
da representação de ponto flutuante em computadores. Pequenas diferenças de precisão podem fazer com que
comparaçõescomoa<b,a=boua>bproduzamresultadosincorretos.
1
2
3
4
5
6
7
8
9
10
11begin
ifnot HasPosition then
begin
BuyAtMarket ;
end
else
begin
if(BuyPrice = Close + 10)then
ClosePosition ;
end;
end //Fim do fluxo de execução
Paraevitaressetipodeproblema,utilizeafunçãocompareFloat,quecomparadoisnúmerosfloatcomumaprecisão
definidaemcasasdecimais.
1
2
3
4
5
6
7
8
9
10
11begin
ifnot HasPosition then
begin
BuyAtMarket ;
end
else
begin
if(compareFloat (BuyPrice, Close + 10,2) = 0)then
ClosePosition ;
end;
end //Fim do fluxo de execução
503
